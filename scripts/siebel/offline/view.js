/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelApp.S_App.View)){(function(){var g=SiebelApp.S_App.View;var d=SiebelApp.Constants;var a=SiebelApp.Offlineconstants;var c=SiebelApp.OfflineAppSettings;var b=SiebelApp.Utils;var f=SiebelApp.OfflineUtils;var e={};e.View=SiebelApp.S_App.View;e.ViewPro=SiebelApp.S_App.View.prototype;SiebelApp.S_App.View=function(){e.View.call(this);var i=[];var h=false;this.GetBCBrokerList=function(){return i};this.AddToBCBrokerList=function(k){i.push(k)};this.ResetBCBrokerList=function(){i=[]};var j=this.GetActiveApplet;this.GetActiveApplet=function(){if(SiebelApp.OfflineAppSettings.GetMode()===true){var l=SiebelApp.S_App.Model.GetIsInterFace();if(l<0||l===0){return(j.call(this))}else{var k=j.call(this);if(k){return k.GetInterface()}else{return j.call(this)}}}else{return j.call(this)}}};SiebelApp.S_App.View.prototype=e.ViewPro;SiebelApp.S_App.View.prototype.constructor=e.View;e.EndLife=g.prototype.EndLife;e.GetBusObj=g.prototype.GetBusObj;e.GetApplet=g.prototype.GetApplet;g.prototype.ActivateFields=function(){SiebelApp.OfflineUtils.CcfLogEvent([a.get("LOG_EVT_CLIENT_SYS"),27,6,63,this.GetName()]);var h=this.GetAppletMap(),l=[],i=0;for(var k in h){if(h[k]){l[i]={execute:h[k].ActivateFields,executeScope:h[k]};i++}}$.eachAsyncOp(this,l);$.callback(this,function(j){$.setReturnValue(j)})};g.prototype.SetNotifyObjData=function(m){var j=this.GetBCBrokerList();var h=j.length;var l=m.GetChildCount();var k=0;var i=function(){var p=m.GetChild(k);if(p){var r=p.GetType();if(r===d.get("SWE_PST_BUSCOMP_INFO")){var o=p.GetValue();var n=0;var q=function(){var t=j[n].GetBC();var s=t.GetVarName();if(o===s){j[n].GetObjInfo(p,true)}else{n++;if(n<h){q.call(this)}}};if(h>0){q.call(this)}}}$.callback(this,function(){k++;if(k<l){i.call(this)}})};if(k<l){i.call(this)}};g.prototype.Populate=function(){var p=this.GetAppletMap();var h="";var o,m,n,k;var j=[];var l=0;var i={};f.CcfLogEvent([a.get("LOG_EVT_CLIENT_SYS"),54,6,14,this.GetName()]);for(h in p){if(p[h]){n=p[h].GetBusComp();if(!n){continue}k=n.GetVarName();o=this.GetBCBroker(n);m=p[h].GetRowListRowCount();if(!i[k]){i[k]=0}if(n.GetWS().length<m&&i[k]<m){i[k]=m;j[l++]={execute:o.SetWorkSetSize,executeScope:o,preExecute:function(){var q=m;return function(){return[q]}}()}}}}if(j.length>0){$.eachAsyncOp(this,j)}$.callback(this,function(q){this.ActivateFieldsInActivationBlock();$.callback(this,function(u){if(!u.err){var r=this.GetAppletMap(),v=[],s=0;for(var t in r){if(r[t]){v[s]={execute:r[t].Populate,executeScope:r[t]};s++}}$.eachAsyncOp(this,v);$.callback(this,function(w){$.setReturnValue(w)})}else{$.setReturnValue(u)}})})};g.prototype.ActivateFieldsInActivationBlock=function(){var h=this.GetBusObj();var i=h.GetBCMap();h.BeginActivationBlock(i);h.EndActivationBlock()};g.prototype.InterpolateDyncUIPS=function(o){var j=this.GetAppletMap();var h=o.GetChildCount();var k;var p;var n;var m=function(){};var l=0;m=function(){k=o.GetChild(l);p=k.GetValue();if(!b.IsEmpty(p)){for(var i in j){if(j[i]&&(j[i].GetVarName()===p)){n=j[i].GetName();j[n].InterpolatePS(k);break}}$.callback(this,function(){l++;if(l<h){m.call(this)}})}};m.call(this)};g.prototype.ShowView=function(){};g.prototype.PickUpUIActiveFields=function(){};g.prototype.AddBCBroker=function(j,i){var h=this.GetBCBroker(j);if(!h){h=new SiebelApp.S_App.BCBroker();h.Initialize(this.GetBusObj().GetZone(),j);this.AddToBCBrokerList(h)}if(h){h.AddReference();j.GetNotifyInfoArray()[0].SetAppletArray(i)}return h};g.prototype.GetBCBroker=function(j){var k;var i;var h=this.GetBCBrokerList().length;for(k=0;k<h;k++){i=this.GetBCBrokerList()[k];if(i.GetBC()===j){return i}}return null};g.prototype.ResetNotifyPropSet=function(){var k=this.GetBCBrokerList();var h=k.length;for(var j=0;j<h;j++){k[j].ResetNotifyPropSet()}};g.prototype.RemoveBCBroker=function(i){var k=this.GetBCBroker(i);if(k){k.RemoveReference();if(k.GetNumOfRefs()<=0){var h=this.GetBCBrokerList();var j=h.indexOf(k);h.splice(j,1);k=null}}};g.prototype.EndLife=function(){e.EndLife.call(this);if(!(c.GetMode())){return}var k=this.GetBCBrokerList();var h=k.length;for(var j=0;j<h;j++){k[0].EndLife();k.splice(0,1)}this.ResetBCBrokerList()};g.prototype.EnableGenerateNotifyInfo=function(j){var l=this.GetBCBrokerList();var h=l.length;for(var k=0;k<h;k++){l[k].EnableGenerateNotifyInfo(j)}};g.prototype.GenerateExtraNotifyInfo=function(){var k=[arguments[0]];var n=function(){return k},h=this.GetAppletMap(),m=[],i=0;for(var l in h){if(h[l]){m[i]={execute:h[l].GenerateExtraNotifyInfo,executeScope:h[l],preExecute:n};i++}}$.eachAsyncOp(this,m);$.callback(this,function(j){$.setReturnValue(j)})};g.prototype.GetNotifyPropSet=function(k){f.CcfLogEvent([a.get("LOG_EVT_CLIENT_SYS"),44,6,22,"View Name",this.GetName()]);var j=CCFMiscUtil_CreatePropSet();var i;var h=this.GetBCBrokerList().length;this.GenerateExtraNotifyInfo(arguments[1]);$.callback(this,function(){var m=0;var l=function(){i=this.GetBCBrokerList()[m];i.GetNotifyPropSet();$.callback(this,function(q){if(!q.err){var o=q.retVal;var n=o.GetChildCount();if(n){for(var p=0;p<n;p++){j.AddChild(o.GetChild(p))}}}m++;if(m<h){l.call(this)}})};if(!h){return}l.call(this);$.callback(this,function(n){if(!n.err){if(j.GetChildCount()){j.SetType("Notifications");k.AddChild(j)}this.ResetNotifyPropSet()}})})};g.prototype.GetBusObj=function(){if(SiebelApp.OfflineAppSettings.GetMode()===true){var i=SiebelApp.S_App.Model.GetIsInterFace();if(i<0||i===0){return(e.GetBusObj.call(this))}else{var h=e.GetBusObj.call(this);if(h){return h.GetInterface()}else{return(e.GetBusObj.call(this))}}}else{return(e.GetBusObj.call(this))}};g.prototype.GetApplet=function(i){if(SiebelApp.OfflineAppSettings.GetMode()===true){var j=SiebelApp.S_App.Model.GetIsInterFace();if(j<0||j===0){return(e.GetApplet.call(this,i))}else{var h=e.GetApplet.call(this,i);if(h){return h.GetInterface()}else{return(e.GetApplet.call(this,i))}}}else{return(e.GetApplet.call(this,i))}}}())};