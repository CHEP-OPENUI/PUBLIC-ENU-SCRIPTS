/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelApp.Metadata)==="undefined"){SiebelJS.Namespace("SiebelApp.Metadata");SiebelApp.Metadata=(function(){var h=SiebelJS.Dependency("SiebelApp.Offlineconstants");var s=SiebelJS.Dependency("SiebelApp.Constants");var y=SiebelJS.Dependency("SiebelApp.Utils");var i=SiebelApp.S_App;var l=h.get("METADATA_FLD_SEP");var w=SiebelApp.OfflineUtils;var a=SiebelApp.AjaxRequestMgr;var x=["MBCs","MLinks","MBOs","MBSs","MApplets","MBCFilters","MBOFilters","PickListInfo","MViews"];var e=["SystemPreferences","SiebelApplicationParameters","ListOfValues","PickListGeneric","PickListHierarchical","PickListHierarchicalSubArea","MIcons"];var f=null;var c=null;var o=null;var g=null;var r=false;function k(){var C;D=function D(){return C};D.prototype=this;C=new D();C.constructor=D;return C}var v=new k();k.prototype.Load=function(I){var K;var M;var G;var N;f=window.localStorage.getItem("Metadata");if(f){f=JSON.parse(f)}else{f={}}var L=true;if(y.IsEmpty(I)){N=x.concat(e)}else{if(I){N=x}else{N=e;L=false}}K=N.length;var H=function(O){M=O.retVal[0];G=O.retVal[1];switch(M){case x[0]:f[x[0]]={};B.call(this,G);break;case x[1]:f[x[1]]={};m.call(this,G);break;case x[2]:f[x[2]]={};n.call(this,G);break;case x[3]:f[x[3]]={};q.call(this,G);break;case x[4]:f[x[4]]={};d.call(this,G);break;case x[5]:f[x[5]]={};break;case x[6]:f[x[6]]={};break;case x[7]:f[x[7]]={};t.call(this,G);break;case x[8]:f[x[8]]={};SiebelApp.S_App.Model.SetViewModeDef(G);break;case e[0]:f[e[0]]={};b.call(this,G);break;case e[1]:f[e[1]]=G;SiebelApp.S_App.Model.SetSiebelApplicationParameters(G);break;case e[2]:f[e[2]]={};u.call(this,G);break;case e[3]:f[e[3]]={};p.call(this,G);break;case e[4]:f[e[4]]={};z.call(this,G);break;case e[5]:f[e[5]]={};A.call(this,G);break;case e[6]:f[e[6]]={};j.call(this,G);break}var V={};var S=h.get("SWE_POST_CHANGES");var X=h.get("WRITERECORD");var R=h.get("UNDORECORD");var W=h.get("POSITION_ON_ROW");var U=h.get("NEWRECORD");var P=h.get("EDITRECORD");var Y=h.get("DELETERECORD");var Q=h.get("GO_TO_NEXT_SET");var T=h.get("GO_TO_PREV_SET");var Z=s.get("SWE_GET_PICK_INFO");V.PostChanges=[X,R,S,W,P,Q,T,Z];V.WriteRecord=[X,S,W,Q,T];V[W]=[X,W,S];a.SetDepnRequestMap(V)};var E=[];var J=-1;var F=function(){var O=C;return function(){return([N[O]])}};var D;for(var C=0;C<K;C++){if(f[N[C]]){continue}D=F();E[++J]={execute:SiebelApp.BrowserCacheMgr.GetMetadata,executeScope:SiebelApp.BrowserCacheMgr,postExecute:H,preExecute:D}}$.eachAsyncOp(this,E);$.callback(this,function(O){if(L){var P={};P[e[2]]=f[e[2]];window.localStorage.setItem("Metadata",JSON.stringify(P))}$.setReturnValue(O)})};k.prototype.EnumUserProps=function(D){var C=null;if(D.userPropMap){C=[];for(var E in D.userPropMap){if(E){C.push(E)}}return C}else{return null}};k.prototype.GetUserProperty=function(D,C){if(C.userPropMap){return C.userPropMap[D]}else{return""}};function u(E){if(!E){SiebelJS.Log("Unable to load List Of Values");return}var C=E.length;var D=this.GetListOfValues();var G;var H;var F=w.RemoveNonAlphaChars(SiebelApp.Metadata.GetBusCompDef("List Of Values").LanguageField);for(var I=0;I<C;I++){H=E[I][F];G=E[I].Type;if(H!=="ENU"){G=G+"_"+H}if(!D[G]){D[G]=[]}D[G].push(E[I])}}function b(E){if(!E){SiebelJS.Log("Unable to load System Preferences");return}var C=E.length;var D=null;for(var F=0;F<C;F++){D={};D.Value=E[F].Value;this.SetSystemPreference(E[F].Name,D)}}function t(F){if(!F){SiebelJS.Log("Unable to get PickList Definitions.");return}var C=F.length;var D=null;for(var G=0;G<C;G++){D={};for(var E in F[G]){if(F[G][E]){if(this.IsBoolean(F[G][E])){D[E]=y.IsTrue(F[G][E])}else{D[E]=F[G][E]}}}D.Name=F[G].NAME;this.SetPickListDef(D.Name,D)}}function p(H){if(!H){SiebelJS.Log("Unable to get ParsePickListGeneric BC Table.");return}var C=H.length;var G=null;var D=null;var F;var E=w.RemoveNonAlphaChars(SiebelApp.Metadata.GetBusCompDef("PickList Generic").LanguageField);for(var I=0;I<C;I++){D={};G={};for(var F in H[I]){if(H[I][F]){D[F]=H[I][F]}}D.Type=H[I].Type;G.Value=H[I].Value;G.OrderBy=H[I].OrderBy;G.Name=H[I].Name;G[E]=H[I][E];F=D.Type;if(H[I][E]!=="ENU"){F=F+"_"+H[I][E]}this.SetPickListGeneric(F,G)}}function j(G){if(!G){SiebelJS.Log("Unable to get MIcons BC Table.");return}var C=G.length;var F=null;var D=null;for(var H=0;H<C;H++){D={};F={};for(var E in G[H]){if(G[H][E]){D[E]=G[H][E]}}D.IconMapName=G[H].IconMapName;F.IconMapName=G[H].IconMapName;F.IconName=G[H].IconName;F.FileName=G[H].FileName;this.SetMIcons(D.IconMapName,F)}}function z(I){if(!I){SiebelJS.Log("Unable to get ParsePickListHierarchical BC Table.");return}var C=I.length;var H=null;var D=null;var F;var E=w.RemoveNonAlphaChars(SiebelApp.Metadata.GetBusCompDef("PickList Hierarchical").LanguageField);var G;for(var J=0;J<C;J++){D={};H={};G=I[J];for(var F in G){if(G[F]){D[F]=G[F]}}D.Type=G.Type;H.Value=G.Value;H.Parent=G.Parent;H[E]=G[E];F=D.Type;if(G[E]!=="ENU"){F=F+"_"+G[E]}this.SetPickListHierarchical(F,H)}}function A(I){if(!I){SiebelJS.Log("Unable to get PickListHierarchicalSubArea BC Table.");return}var C=I.length;var H=null;var D=null;var G=w.RemoveNonAlphaChars(SiebelApp.Metadata.GetBusCompDef("PickList Hierarchical Sub-Area").LanguageField);var E;for(var J=0;J<C;J++){D={};H={};E=I[J];for(var F in E){if(E[F]){D[F]=E[F]}}D.Type=E.Type;H.Value=E.Value;H.Parent=E.Parent;H.Parent=E.Parent;H.ParentType=E.ParentType;H[G]=E[G];F=D.Type;if(I[J].Language!=="ENU"){F=F+"_"+E[G]}this.SetPickListHierarchicalSubArea(F,H)}}function d(D){if(!D){SiebelJS.Log("Unable to get Applet Definitions.");return}var M=D.length;var J=null;var K=null;var L=null;var G=null;var H=null;for(var E=0;E<M;E++){J={};for(var Q in D[E]){if(this.IsBoolean(D[E][Q])){J[Q]=y.IsTrue(D[E][Q])}else{if(D[E][Q]){J[Q]=(y.IsEmpty(D[E][Q]))?"":D[E][Q]}}}J.userPropMap=null;if(!y.IsEmpty(D[E].userPropMap)){K=D[E].userPropMap.substring(1,D[E].userPropMap.length-1).split(l);L=K.length;J.userPropMap={};for(H=0;H<L;H++){G=K[H].split(h.get("METADATA_SEP"));G[1]=G[1].replace(/&verbar;/g,"|");J.userPropMap[G[0]]=G[1]}}J.control=null;if(!(y.IsEmpty(D[E].control))){var P=D[E].control.substring(1,D[E].control.length-1).split(l);var C={};var I=null;var O=null;L=P.length;for(H=0;H<L;H++){I=P[H].split(h.get("METADATA_SEP"));O={};O.name=I[0];O.field=I[1];O.ReadOnly=y.IsTrue(I[2]);O.PickFrameName=I[3];O.htmlIconMap=I[4];C[O.name]=O}J.control=C}J.drilldown=null;if(!(y.IsEmpty(D[E].drilldown))){var F=D[E].drilldown.substring(1,D[E].drilldown.length-1).split(l);L=F.length;J.drilldown={};var R=[];for(H=0;H<L;H++){var N={};G=F[H].split(h.get("METADATA_SEP"));G[1]=G[1].replace(/&verbar;/g,"|");N.viewname=G[1];N.busCompName=G[2];N.destFieldName=G[3];N.hyperLinkField=G[4];N.srcFieldName=G[5];N.menuText=G[6];N.sequence=G[7];N.visibilityType=G[8];N.Dynamicdrilldown={};J.drilldown[G[0]]=N;R.push(G[4])}J.ddCtrlsArray=R}this.SetAppletDef(D[E].Name,J)}}function q(D){if(!D){SiebelJS.Log("Unable to get Business Object Definitions.");return}var J=D.length;var C={};var I=null;var H=null;var F=null;var G=null;for(var E=0;E<J;E++){C={};for(var K in D[E]){if(D[E][K]){C[K]=D[E][K]
}}if(!y.IsEmpty(D[E].userPropMap)){H=D[E].userPropMap.substring(1,D[E].userPropMap.length-1).split(l);I=H.length;C.userPropMap={};for(G=0;G<I;G++){F=H[G].split(h.get("METADATA_SEP"));F[1]=F[1].replace(/&verbar;/g,"|");C.userPropMap[F[0]]=F[1]}}this.SetBusServiceDef(D[E].Name,C)}}function n(H){if(!H){SiebelJS.Log("Unable to get Business Object Definitions.");return}var C=H.length;var D=null;var I=null;var G=null;var E=null;for(var J=0;J<C;J++){I={};D=H[J].BCLinkProp.substring(1,H[J].BCLinkProp.length-1).split(l);G=D.length;for(var F=0;F<G;F++){E=D[F].split(h.get("METADATA_SEP"));I[E[0]]=E[1]}this.SetBusObjDef(H[J].Name,I)}}function m(F){if(!F){SiebelJS.Log("Unable to get Link Definitions.");return}var C=F.length;var D=null;for(var G=0;G<C;G++){D={};for(var E in F[G]){if(this.IsBoolean(F[G][E])){D[E]=y.IsTrue(F[G][E])}else{if(F[G][E]){D[E]=(y.IsEmpty(F[G][E]))?"":F[G][E]}}}this.SetLinkDef(F[G].Name,D)}}k.prototype.IsBoolean=function(C){if(C==="F"||C==="T"){return true}return false};k.prototype.GetListOfValues=function(){return f[e[2]]};function B(I){if(!I){SiebelJS.Log("Unable to get Business Component Definitions.");return}var H=null;var N=null;var C=null;var M=null;var X=null;var D=null;var V=I.length;var F=null;var S=null;var Y=null;var aa=null;var L=null;var U=null;var R=null;var W=null;for(var O=0;O<V;O++){H={};for(var ad in I[O]){if(this.IsBoolean(I[O][ad])){H[ad]=y.IsTrue(I[O][ad])}else{H[ad]=(y.IsEmpty(I[O][ad]))?"":I[O][ad]}}var ac=I[O].userKey;if(!y.IsEmpty(ac)){var Q=w.RTrim(ac,",");var G=Q.split(",");var ab=G.length;for(var P=0;P<ab;P++){G[P]=w.RemoveNonAlphaChars(G[P])}H.userKey=G.toString()}if(!y.IsEmpty(I[O].userPropMap)){Y=I[O].userPropMap.substring(1,I[O].userPropMap.length-1).split(l);F=Y.length;H.userPropMap={};for(U=0;U<F;U++){aa=Y[U].split(h.get("METADATA_SEP"));aa[1]=aa[1].replace(/&verbar;/g,"|");H.userPropMap[aa[0]]=aa[1]}}if(!y.IsEmpty(I[O].Visibility)){var J=I[O].Visibility.substring(1,I[O].Visibility.length-1).split(l);F=J.length;H.Visibility={};for(U=0;U<F;U++){aa=J[U].split(h.get("METADATA_SEP"));J[U]={};J[U].mode=aa[0];J[U].ownerType=aa[1];J[U].privateField=aa[2];J[U].visibilityField=aa[3];J[U].visibilityMVField=aa[4];J[U].visibilityMVLink=aa[5]}H.Visibility=J}N=I[O].Fields.substring(1,I[O].Fields.length-1).split(l);M={};F=N.length;var T=[];var Z=[];for(U=0;U<F;U++){L=null;X=null;if(N[U].indexOf("}~{")!==-1){X=N[U].substring(N[U].indexOf("~{")+1,N[U].indexOf("}~{")+1);L=N[U].substring(N[U].indexOf("}~{")+2,(N[U].length-2))}else{if(N[U].charAt(N[U].length-1)==="}"){L=N[U].substring((N[U].indexOf("~{")+1),(N[U].length-2));if(N[U].substring((N[U].indexOf("~{")+1),(N[U].indexOf("}",(N[U].indexOf("~{"))))).split("~").length===2){X=L;L=null}}}C=N[U].split(h.get("METADATA_SEP"));D={};D.IsCalculated=(C[1]!==undefined)?C[1]:"";D.CalExpr=(C[2]!==undefined)?C[2]:"";D.ColName=(C[3]!==undefined)?C[3]:"";D.ForceActive=(C[4]!==undefined)?C[4]:"";D.ForceCase=(C[5]!==undefined)?C[5]:"";D.Hidden=(C[6]!==undefined)?C[6]:"";D.ImPostChg=(C[7]!==undefined)?C[7]:"";D.LinkName=(C[8]!==undefined)?C[8]:"";D.NoCopy=(C[9]!==undefined)?C[9]:"";D.PickListName=(C[10]!==undefined)?C[10]:"";D.PostDefault=(C[11]!==undefined)?C[11]:"";D.PreDefault=(C[12]!==undefined)?C[12]:"";D.Precision=(C[13]!==undefined)?C[13]:"";D.ReadOnly=(C[14]!==undefined)?y.IsTrue(C[14]):false;D.Required=(C[15]!==undefined)?y.IsTrue(C[15]):false;D.Scale=(C[16]!==undefined)?C[16]:"";D.OldTextLen=(C[17]!==undefined)?C[17]:"";D.DataType=(C[18]!==undefined)?C[18]:"";D.ValidationSpec=(C[19]!==undefined)?C[19]:"";D.DisableSearch=(C[20]!==undefined)?C[20]:"";D.DisableSort=(C[21]!==undefined)?C[21]:"";D.TransPickList=(C[22]!==undefined)?C[22]:"";D.userPropMap=null;D.pickMap=null;var K=C[C.length-1];if(y.IsEmpty(K)){D.Join=false}else{D.Join=true;var E=[];E=K.split(":");D.JoinInfo={};D.JoinInfo.JoinType=E[0];D.JoinInfo.JoinTable=E[1];if(E[0]==="X"){T.push(C[0]);Z.push(C[3])}}if(L){L=L.substring(1,L.length-1);if(!SiebelApp.Utils.IsEmpty(L)){L=L.substring(1,L.length-1).split(h.get("METADATA_LST_SEP"));S=L.length;D.pickMap=[];for(R=0;R<S;R++){aa=L[R].split(h.get("METADATA_SEP"));D.pickMap.push({FldName:aa[0],IsConstrained:y.IsTrue(aa[1]),NoClear:aa[2],PFldName:aa[3]})}}}if(X){Y=X.substring(1,X.length-1);if(!SiebelApp.Utils.IsEmpty(Y)){Y=Y.substring(1,Y.length-1).split(h.get("METADATA_LST_SEP"));S=Y.length;D.userPropMap={};for(R=0;R<S;R++){aa=Y[R].split(h.get("METADATA_SEP"));aa[1]=aa[1].replace(/&verbar;/g,"|");D.userPropMap[aa[0]]=aa[1]}}}M[C[0]]=D}H.Fields=M;H.InterFieldInfo={};H.InterFieldInfo.InterFieldArr=T;H.InterFieldInfo.InterFieldColName=Z;this.SetBusCompDef(I[O].Name,H)}}k.prototype.IsInitialized=function(){return r};k.prototype.SetInitialized=function(C){r=C};k.prototype.GetBusObjDef=function(C){if(!f[x[2]][C]){w.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),56,9,30,C]);throw new Error()}return f[x[2]][C]};k.prototype.GetBusCompDef=function(C){if(!f[x[0]][C]){w.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),59,9,41,C]);return null}return f[x[0]][C]};k.prototype.GetBCUnqKeys=function(C){var D=this.GetBusCompDef(C);var E;if(D&&!y.IsEmpty(D.userKey)){E=D.userKey}return E};k.prototype.GetLinkDef=function(C){if(!f[x[1]][C]){w.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),56,9,31,C]);throw new Error()}return f[x[1]][C]};k.prototype.GetAppletDef=function(C){if(!f[x[4]][C]){w.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),56,9,32,C]);throw new Error()}return f[x[4]][C]};k.prototype.GetPickListDef=function(C){if(!f[x[7]][C]){w.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),56,9,33,C]);return null}return f[x[7]][C]};k.prototype.GetPickListGeneric=function(C){var D=SiebelApp.S_App.Model.GetLanguage();if(D==="ENU"){if(!f[e[3]][C]){w.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),58,9,39,C]);throw new Error()}return f[e[3]][C]}else{var E=C+"_"+D;if(!f[e[3]][E]&&!f[e[3]][C]){w.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),58,9,39,C]);throw new Error()}else{if(!f[e[3]][E]){return f[e[3]][C]}}return f[e[3]][E]}};k.prototype.GetMIcons=function(C){if(!f[e[6]][C]){w.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),56,9,34,C]);throw new Error()}return f[e[6]][C]};k.prototype.GetPickListHierarchical=function(C,O,E){var D=SiebelApp.S_App.Model.GetLanguage();var J;if(D==="ENU"){if(!f[e[4]][C]){w.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),56,9,35,C]);throw new Error()}J=f[e[4]][C]}else{var M=C+"_"+D;if(!f[e[4]][M]&&!f[e[4]][C]){w.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),56,9,35,C]);throw new Error()}else{if(!f[e[4]][M]){J=f[e[4]][C]}else{J=f[e[4]][M]}}}var P=[];var L=E.length;var I="";var H=0;var G=0;var N=[];for(H=0;H<J.length;H++){if(!O&&!L){P.push(J[H].Value)}else{if(O===J[H].Parent){if(!L){P.push(J[H].Value)}else{N.push(J[H])}}}}if(!L){return P}var K=[];var F=N.length?N:J;for(H=0;H<E.length;H++){for(G=0;G<F.length;G++){if(E[H].PFldValue===F[G][E[H].PFldName]){K.push(F[G].Value)}}}return K};k.prototype.GetPickListHierarchicalSubArea=function(E,J,G){var I=SiebelApp.S_App.Model.GetLanguage();var H;if(I==="ENU"){if(!f[e[5]][E]){w.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),56,9,39,E]);
throw new Error()}H=f[e[5]][E]}else{var D=E+"_"+I;if(!f[e[5]][D]&&!f[e[5]][E]){w.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),56,9,39,E]);throw new Error()}else{if(!f[e[5]][D]){H=f[e[5]][E]}else{H=f[e[5]][D]}}}var C=[];for(var F=0;F<H.length;F++){if(!G){C.push(H[F].Value)}else{if(J===H[F].ParentType&&G===H[F].Parent){C.push(H[F].Value)}}}return C};k.prototype.GetSystemPreference=function(C){if(!f[e[0]][C]){w.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),57,9,38,C]);return""}return f[e[0]][C]};k.prototype.GetBusServiceDef=function(C){if(!f[x[3]][C]){w.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),56,9,37,C]);throw new Error()}return f[x[3]][C]};k.prototype.SetBusServiceDef=function(C,D){f[x[3]][C]=D};k.prototype.SetSystemPreference=function(C,D){f[e[0]][C]=D};k.prototype.SetPickListDef=function(C,D){f[x[7]][C]=D};k.prototype.GetDMLogMsg=function(C){if(!c){c=[];c=h.get("DMGlobalLogMsgArray")}if(!c||!c[C]){return C}return c[C]};k.prototype.GetDMClassName=function(C){if(!o){o=[];o=h.get("DMGlobalClassArray")}if(!o||!o[C]){return C}return o[C]};k.prototype.GetDMMethodName=function(C){if(!g){g=[];g=h.get("DMGlobalMethodArray")}if(!g||!g[C]){return C}return g[C]};k.prototype.SetPickListGeneric=function(D,E){var C=f[e[3]][D];if(C){C.push(E)}else{C=[];C.push(E)}f[e[3]][D]=C};k.prototype.SetMIcons=function(D,E){var C=f[e[6]][D];if(C){C.push(E)}else{C=[];C.push(E)}f[e[6]][D]=C};k.prototype.SetPickListHierarchical=function(D,E){var C=f[e[4]][D];if(C){C.push(E)}else{C=[];C.push(E)}f[e[4]][D]=C};k.prototype.SetPickListHierarchicalSubArea=function(D,E){var C=f[e[5]][D];if(C){C.push(E)}else{C=[];C.push(E)}f[e[5]][D]=C};k.prototype.SetAppletDef=function(C,D){f[x[4]][C]=D};k.prototype.SetBusObjDef=function(C,D){f[x[2]][C]=D};k.prototype.SetBusCompDef=function(C,D){f[x[0]][C]=D};k.prototype.GetLov=function(H){var E=SiebelApp.Metadata.GetListOfValues();var I=SiebelApp.S_App.Model.GetLanguage();var D=[];var F;if(I==="ENU"){F=E[H]}else{var J=H+"_"+I;F=E[J];if(!F){F=E[H]}}if(F){var C=F.length;for(var G=0;G<C;G++){D[G]=F[G].Name}return D}w.CcfLogEvent([h.get("LOG_EVT_CLIENT_SYS"),58,9,40,H])};k.prototype.SetLinkDef=function(C,D){f[x[1]][C]=D};return v}())}if(typeof(SiebelApp.S_App.Model)==="undefined"){SiebelJS.Namespace("SiebelApp.Model");SiebelApp.S_App.Model=(function(){var b={};var n={};var w=[];var r=["Id","Created","Created By","Updated","Updated By","Mod Id","Conflict Id"];var l=SiebelApp.S_App;var t=SiebelApp.Metadata;var j=SiebelApp.Offlineconstants;var q=SiebelApp.Constants;var y=SiebelJS.Dependency("SiebelApp.Utils");var u=SiebelApp.OfflineUtils;var h=j.get("DOUIREG_OBJ_NAME");var m=j.get("DOUIREG_OBJ_TYPE");var e=j.get("DOUIREG_OBJ_MTHD");var o=j.get("DOUIREG_EXT_TYPE");var d=j.get("DOUIREG_SRVC_NAME");var s=j.get("DOUIREG_SRVC_MTDH");var A=j.get("DOUIREG_EXT_TYPEOVERRIDE");var g=j.get("DOUIREG_EXT_TYPEPRE");var x=j.get("DOUIREG_EXT_TYPEPOST");var f=j.get("STAND_ALONE_INST");var c=q.get("SWE_PROP_NAME");var a=j.get("DOUIREG_EXT_CONTEXT");var p=j.get("DOUIREG_OBJ_TYPEBUSCOMP");var k=j.get("DOUIREG_OBJ_TYPEAPPLET");var z=0;function i(){var B;this.GetServiceMap=function(){return n};C=function C(){return B};C.prototype=this;B=new C();B.constructor=C;return B}var v=new i();i.prototype.IsMetadataInitialized=function(){if(!t.IsInitialized()){t.Load();$.callback(this,function(){t.SetInitialized(true)})}};i.prototype.GetPickListDef=function(B){return t.GetPickListDef(B)};i.prototype.GetBusObj=function(B){var D;var C=SiebelApp.S_App.Model.GetIsInterFace();if(C<0||C===0){D=this.GetBusObjDef(B);return(D)}else{D=this.GetBusObjDef(B);return D.GetInterface()}};i.prototype.GetDMLogMsg=function(B){return(SiebelApp.Metadata.GetDMLogMsg(B))};i.prototype.GetDMMethodName=function(B){return(SiebelApp.Metadata.GetDMMethodName(B))};i.prototype.GetDMClassName=function(B){return(SiebelApp.Metadata.GetDMClassName(B))};i.prototype.GetSystemPreference=function(B){return(SiebelApp.Metadata.GetSystemPreference(B))};i.prototype.SetBOArray=function(B){w.push(B)};i.prototype.GetBOArray=function(){return w};i.prototype.GetBusObjDef=function(F){var B;var C=CCFMiscUtil_CreatePropSet();var I=t.GetBusObjDef(F);var E;C.SetType(q.get("SWE_PST_BUSOBJ_INFO"));var D=l.LookupSCIndex(F);if(D!==-1){E=D}else{l.GetStringCache().push(F);E=l.GetStringCache().length-1}C.SetPropertyStr(c,F);C.SetProperty(f,"true");if(I){for(var H in I){if(H){var J=CCFMiscUtil_CreatePropSet();var G=CCFMiscUtil_CreatePropSet();J.SetType(q.get("SWE_PST_NEW_BUSCOMP"));G.SetType(q.get("SWE_PST_BUSCOMP_INFO"));G.SetValue(H);G.SetProperty(q.get("SWE_PROP_NAME"),H);J.AddChild(G);C.AddChild(J)}}}B=new l.BusObj();B.ProcessObjectInfo(C);w.push(B);return B};i.prototype.GetLovNameVal=function(B,I){var H=SiebelApp.Metadata.GetListOfValues();var E,D;if(y.IsEmpty(B)){return""}var C=this.GetLanguage();var D;if(C==="ENU"){E=H[I]}else{var J=I+"_"+C;E=H[J];if(!E){E=H[I]}}if(E){var G=E.length;for(var F=0;F<G;F++){D=E[F];if((D.Name).toUpperCase()===(B).toUpperCase()){return D.Value}}}u.CcfLogEvent([j.get("LOG_EVT_CLIENT_SYS"),60,10,42,B,I]);return""};i.prototype.GetLovValName=function(H,G){var D=SiebelApp.Metadata.GetListOfValues();var E;var I=this.GetLanguage();if(I==="ENU"){E=D[G]}else{var C=G+"_"+I;E=D[C];if(!E){E=D[G]}}if(E){var B=E.length;for(var F=0;F<B;F++){if((E[F].Value).toUpperCase()===(H).toUpperCase()){return E[F].Name}}}u.CcfLogEvent([j.get("LOG_EVT_CLIENT_SYS"),61,10,43,H,G]);return""};i.prototype.GetSystemFields=function(){return r};i.prototype.ResetDyncPS=function(){b={}};i.prototype.GetDyncPS=function(C,B){if(B){return b}else{return(b[C])}};i.prototype.SetDyncPS=function(C,B,E){if(!E){E=C.length}for(var D=0;D<E;D++){b[C[D]]=B[D]}};i.prototype.RegistryLookup=function(B){var E;var H="";var D="";var F="";var G;var C=false;if(B[h]){if(B[m]&&B[e]&&(B[o])){H=B[m];D=B[e];F=B[o]}else{F=null;C=true}E=B[h]}else{return null}if(!C){G=E+H+D+F}else{G=E}if(G){if(n[G]){return(n[G])}else{return null}}};i.prototype.ServiceRegistry=function(F){var C={};var E;var H;var B="";var D="";var I="";var J="";var G="";var K=false;if(F[h]&&F[m]&&F[e]&&F[o]){B=F[m];D=F[e];I=F[o];G=F[s]}else{if(F[d]&&F[h]){I=null;K=true}else{return(false)}}H=F[h];J=F[d];if(!K){E=H+B+D+I;C[d]=J;C[s]=G;C[o]=I}else{E=H;C[d]=J}if(n[E]){n[E][0]=C}else{n[E]=[C]}return(true)};i.prototype.InvokeRegisteredSvc=function(C,J,B){var K=this.RegistryLookup(C);var G={};if(K){var D=K[0];var E=null;if(K.length>1){E=K[1]}if(!D&&!E){$.setReturnValue({err:false,retVal:G});if(B){return({err:false,retVal:G})}return}else{if(B){return(this.InvokeSyncRegisteredSvc(C,J,D,E))}}}else{$.setReturnValue({err:false,retVal:G});if(B){return({err:false,retVal:G})}return}var H={};if(C[a]){H=C[a]}var I=function I(){if(D.Service&&SiebelApp[D.Service]){var M=new SiebelApp[D.Service]();if(H&&(C[m]===k||C[m]===p)){if(M.constructor.superclass){var L=H.GetInterface();M.SetContext(L)}}this.SetIsInterFace(1);M[D[s]](J);$.callback(this,F)}else{SiebelJS.Log("Service Function not found");$.setReturnValue({err:false,retVal:G})}};var F=function(M){I=null;var L=M.err;
M.Outputargs=M.retVal;this.SetIsInterFace(-1);var N={err:L,retVal:M};$.setReturnValue(N)};if(D&&E){if(D[o]===g){SiebelApp.S_App.ModelInterface.InvokeRegisteredSvc(C,J,B,E);$.callback(this,function(M){var N=M.retVal;if(N){var L=N.Outputargs;if(L&&L.GetPropertyAsStr("Invoked")==="true"){$.setReturnValue(M);I=null;F=null;return}else{I.call(this)}}else{I.call(this)}})}else{I.call(this);$.callback(this,function(L){if(!L.err){SiebelApp.S_App.ModelInterface.InvokeRegisteredSvc(C,J,B,E);$.callback(this,function(M){$.setReturnValue(M);I=null;F=null})}else{$.setReturnValue(L)}})}}else{if(D){I.call(this)}else{SiebelApp.S_App.ModelInterface.InvokeRegisteredSvc(C,J,B,E);$.callback(this,function(L){$.setReturnValue(L);I=null;F=null})}}};i.prototype.InvokeSyncRegisteredSvc=function(D,K,E,F){var H={};if(D[a]){H=D[a]}var J=function J(){if(E.Service&&SiebelApp[E.Service]){var M=new SiebelApp[E.Service]();if(H&&(D[m]===k||D[m]===p)){if(M.constructor.superclass){var L=H.GetInterface();M.SetContext(L)}}this.SetIsInterFace(1);M[E[s]](K);var O=SiebelApp.OfflineAppMgr.GetCurrentRetVal();var N=O.err;O.Outputargs=O.retVal;this.SetIsInterFace(-1);var P={err:N,retVal:O};return P}else{SiebelJS.Log("Service Function not found");return({err:false,retVal:G})}};if(E&&F){if(E[o]===g){SiebelApp.S_App.ModelInterface.InvokeRegisteredSvc(D,K,true,F);var B=SiebelApp.OfflineAppMgr.GetCurrentRetVal();var C=B.retVal;if(C){var I=C.Outputargs;if(I&&I.GetPropertyAsStr("Invoked")==="true"){J=null;return(B)}else{return J.call(this)}}else{return J.call(this)}}else{var G=J.call(this);J=null;if(!G.err){SiebelApp.S_App.ModelInterface.InvokeRegisteredSvc(D,K,true,F);return(SiebelApp.OfflineAppMgr.GetCurrentRetVal())}else{return G}}}else{if(E){return(J.call(this))}else{J=null;SiebelApp.S_App.ModelInterface.InvokeRegisteredSvc(D,K,true,F);return(SiebelApp.OfflineAppMgr.GetCurrentRetVal())}}};i.prototype.EndSetupView=function(C,F,D,B,G,E){C.EndActivationBlock();$.callback(this,function(){if(!y.IsEmpty(B)){C.DrillDownByField(F,D,B,G,E)}})};i.prototype.GetLoginName=function(){return window.localStorage.getItem("UID")};i.prototype.SetSiebelApplicationParameters=function(C){var B=C[0];if(y.IsEmpty(this.GetLoginName())){window.localStorage.setItem("UID",B.LoginName)}this.GetLoginId=function(){return B.LoginId};this.GetPositionId=function(){return B.PositionId};this.GetPositionName=function(){return B.PositionName};this.GetOrganizationId=function(){return B.OrganizationId};this.GetOrganizationName=function(){return B.OrganizationName};this.GetLanguage=function(){return B.Language};this.GetCurrencyCode=function(){return B.CurrencyCode};this.GetDivisionId=function(){return B.DivisionId};this.GetDivisionName=function(){return B.DivisionName};this.GetTimeZone=function(){return B.TimeZone}};i.prototype.SetIsInterFace=function(B){z=z+B};i.prototype.GetIsInterFace=function(){return(z)};i.prototype.ReSetIsInterFace=function(){z=0};i.prototype.ReleaseBO=function(B){B.EndLife()};i.prototype.SetViewModeDef=function(C){if(C){var E=C.length;var B={};for(var D=0;D<E;D++){B[C[D].Name]=C[D].Visibility}this.GetViewModeDef=function(){return B}}};i.prototype.GetViewMode=function(C){var B=this.GetViewModeDef();return(B[C])};return v}())}if(typeof(SiebelApp.S_App.ModelInterface)==="undefined"){SiebelJS.Namespace("SiebelApp.S_App.ModelInterface");SiebelApp.S_App.ModelInterface=(function(){var m={};var j=SiebelApp.Offlineconstants;var o=SiebelApp.Constants;var s=SiebelJS.Dependency("SiebelApp.Utils");var i=j.get("DOUIREG_OBJ_NAME");var l=j.get("DOUIREG_OBJ_TYPE");var d=j.get("DOUIREG_OBJ_MTHD");var n=j.get("DOUIREG_EXT_TYPE");var b=j.get("DOUIREG_SRVC_NAME");var q=j.get("DOUIREG_SRVC_MTDH");var u=j.get("DOUIREG_EXT_TYPEOVERRIDE");var g=j.get("DOUIREG_EXT_TYPEPRE");var r=j.get("DOUIREG_EXT_TYPEPOST");var f=j.get("STAND_ALONE_INST");var c=o.get("SWE_PROP_NAME");var a=j.get("DOUIREG_EXT_CONTEXT");var p=j.get("DOUIREG_OBJ_TYPEBUSCOMP");var k=j.get("DOUIREG_OBJ_TYPEAPPLET");function h(){var v;w=function w(){return v};w.prototype=this;v=new w();v.constructor=w;return v}var e=new h();for(var t in SiebelApp.S_App.Model.constructor.prototype){(function(){var v=t;if(typeof(SiebelApp.S_App.Model.constructor.prototype[v])==="function"){h.prototype[v]=function(){return(SiebelApp.S_App.Model.constructor.prototype[v].apply(SiebelApp.S_App.Model,arguments))}}}())}h.prototype.ServiceRegistry=function(z){var w={};var y;var B;var v="";var x="";var C="";var D="";var A="";var E=false;if(z[i]&&z[l]&&z[d]&&z[n]){v=z[l];x=z[d];if((x===j.get("CANINVOKEMETHOD"))&&((z[l]==="Applet")||(z[l]==="BusComp"))){x="DoCanInvokeMethod"}else{if((x===j.get("INVOKEMETHOD"))&&((z[l]==="Applet")||(z[l]==="BusComp"))){x="DoInvokeMethod"}}C=z[n];A=z[q]}else{if(z[b]&&z[i]){C=null;E=true}else{return(false)}}B=z[i];D=z[b];if(!E){y=B+v+x+C;w[b]=D;w[q]=A;w[n]=C}else{y=B;w[b]=D}if(SiebelApp.S_App.Model.GetServiceMap()[y]){SiebelApp.S_App.Model.GetServiceMap()[y].push(w)}else{SiebelApp.S_App.Model.GetServiceMap()[y]=[null,w]}return(true)};h.prototype.InvokeRegisteredSvc=function(x,D,v,y){var A;var z;var w;var C={};if(x[a]){C=x[a]}var B=function(E){z=E.err;E.Outputargs=E.retVal;SiebelApp.S_App.Model.SetIsInterFace(-1);A=null;y=null;$.setReturnValue({err:z,retVal:E});if(v){return E}};if(y&&SiebelApp[y.Service]){A=new SiebelApp[y.Service]();if(C&&(x[l]===k||x[l]===p)){if(A.constructor.superclass){w=C.GetInterface();A.SetContext(w)}}if(typeof(A[y[q]])==="function"){SiebelApp.S_App.Model.SetIsInterFace(1);A[y[q]](D);$.callback(this,B)}else{SiebelApp.S_App.Model.ReSetIsInterFace();SiebelJS.Log("Service Function not found");$.setReturnValue({err:true});if(v){return({err:false,retVal:retObj})}}}else{$.setReturnValue({err:false,retVal:retObj});SiebelJS.Log("Service Function not found");if(v){return({err:false,retVal:retObj})}}};return e}())};