/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelApp.S_App.Applet)){define("siebel/offline/applet",["siebel/offline/model"],function(){(function(){var ag=SiebelApp.S_App.Applet;var h=SiebelApp.S_App.Applet;var j=SiebelApp.S_App.Applet.prototype;var E=SiebelApp.Constants;var R=SiebelApp.Offlineconstants;var Q=R.get("IS_DYNAMIC");var aa=SiebelJS.Dependency("SiebelApp.Utils");var aq=SiebelApp.OfflineAppSettings;var y=SiebelApp.S_App.Model;var Z=SiebelApp.S_App;var A=SiebelApp.OfflineAppMgr;var ay=SiebelApp.OfflineUtils;var d=SiebelApp.AjaxRequestMgr;var b=R.get("DOUIREG_OBJ_NAME");var aB=R.get("DOUIREG_OBJ_TYPE");var r=R.get("DOUIREG_OBJ_MTHD");var v=R.get("DOUIREG_EXT_TYPE");var ad=R.get("DOUIREG_EXT_TYPEOVERRIDE");var av=R.get("DOUIREG_EXT_TYPEPRE");var aA=R.get("DOUIREG_EXT_TYPEPOST");var ak=R.get("DOUIREG_OBJ_TYPEAPPLET");var w=R.get("DOUIREG_EXT_CONTEXT");var z=E.get("SWE_PST_VIEW_INFO");var W=E.get("SWE_PROP_BEGIN_ROW");var J=E.get("SWE_PROP_CAN_UPDATE");var x=E.get("SWE_PROP_CAN_INVOKE");var B=E.get("SWE_PST_BUSCOMP_INFO");var M=E.get("SWE_PROP_NAME");var G=E.get("SWE_PST_CAN_NAV_STATE");var t=false;var N=E.get("SWE_CMD_DRILLDOWN_STR");var m=E.get("SWE_PROP_ROW_SELECTION");var F=R.get("LOG_EVT_CLIENT_SYS");var aD=E.get("SWE_ROW_STR");var ac=E.get("SWE_FIELD_STR");var e=E.get("SWE_DISPLAY_NAME_STR");var H=E.get("SWE_FIELD_VALUE_STR");SiebelApp.S_App.Applet=function(){h.call(this);var aJ=-1;var aN=null;var aO=false;var aF=false;var aH=false;var aI=false;var aM=0;var aK=[];var aP=true;var aL="";var aR=null;var aG=[];var aS=false;var aQ;this.GetInterface=function(){if(!aR){aR=new SiebelApp.S_App.OfflineAppletInterface(this)}return aR};this.SetInPlaceEdit=function(aT){aS=aT};this.GetInPlaceEdit=function(){return aS};this.GetSavedModeState=function(){return aQ};this.SetSavedModeState=function(aT){aQ=aT};this.ResetInterface=function(){if(aR){aR.EndLife()}aR=null};this.GetCanNavigateStateStr=function(){return aL};this.SetCanNavigateStateStr=function(aT){aL=aT};this.GetCanNavigateCtrlArray=function(){return aG};this.SetCanNavigateCtrlArray=function(aT){aG=aT};this.GetNotComp=function(){return aN};this.SetNotComp=function(aT){aN=aT};this.GetNotIdComp=function(){return aJ};this.SetNotIdComp=function(){aJ=-1};this.SetNoUpdate=function(aT){aO=aT};this.SetNoDelete=function(aT){aH=aT};this.SetNoInsert=function(aT){aF=aT};this.SetNoMerge=function(aT){aI=aT};this.GetNoUpdate=function(){return aO};this.GetNoDelete=function(){return aH};this.GetNoInsert=function(){return aF};this.GetNoMerge=function(){return aI};this.SetPrevBegRow=function(aT){aM=aT};this.GetPrevBegRow=function(){return aM};this.SetRowSelectArr=function(aT){aK=aT};this.GetRowSelectArr=function(){return aK};this.GetMultiSelect=function(){return aP};this.SetMultiSelect=function(aT){aP=aT};var n=false;this.SetErrStatus=function(aT){n=aT};this.GetErrStatus=function(){return n}};SiebelApp.S_App.Applet.prototype=j;SiebelApp.S_App.Applet.prototype.constructor=SiebelApp.S_App.Applet;var Y={};Y.ProcessObjectInfo=ag.prototype.ProcessObjectInfo;Y.ProcessPickInfo=ag.prototype.ProcessPickInfo;Y.EndLife=ag.prototype.EndLife;Y.InvokeMethod=ag.prototype.InvokeMethod;Y.LeaveField=ag.prototype.LeaveField;ag.prototype.ProcessObjectInfo=function(n){if(!aq.GetMode()){return(Y.ProcessObjectInfo.call(this,n))}else{var aH=SiebelApp.OfflineAppMgr.GetStatus();if((aH===R.get("NEWLAYOUT")||aH===R.get("NEWPOPUP"))&&!(n.GetProperty(Q))){if(aH===R.get("NEWPOPUP")){var aF=n.GetProperty(B);if(aF===this.GetView().GetActiveApplet().GetBCId()){var aG=SiebelApp.S_App.ActiveBusObject().MaxBCIndex();n.SetProperty(B,"S_BC"+aG)}}this.DeclareFrame(n);if(typeof(this.GetPickAppletSrcInfo)!=="undefined"){this.GetBusComp().SetSrcIdFld(this.GetPickAppletSrcInfo().SrcAppletFld,this.GetParentApplet().GetBusComp());this.GetBusComp().SetPickAppletSrcInfo(this.GetPickAppletSrcInfo())}this.InitializeFrame();this.SetInPlaceState()}else{O.call(this,n)}}};ag.prototype.LeaveField=function(aO,aQ,aG){if(!aq.GetMode()){return(Y.LeaveField.call(this,aO,aQ,aG))}else{var aN=false;var aS;if(!aO||aO!==this.GetActiveControl()){this.SetPrsrvControl(this.GetActiveControl());this.SetActiveControl(null);return true}var aL=this.GetBusComp();var aY=aO.GetFieldName();var aM=!!aL?this.GetFormattedValue(aO):aO.GetValue();var aX=aO.GetName();if(aM!==aQ){if(!!aL){var aW=aQ;if(this.IsInQueryMode()){aS=aO.GetUIType();if(aS===E.get("SWE_CTRL_DATE_TZ_PICK")||aS===E.get("SWE_CTRL_DATE_TIME_PICK")){if(aQ&&!aQ.match(/[><=!&|]/g)){aW=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aQ,E.get("ISO8601_DATETIME_FORMAT"),aO.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat()+" "+SiebelApp.S_App.LocaleObject.GetTimeFormat());if(!aa.IsEmpty(aW)&&aW.charAt(0)!=='"'&&aW.charAt(aW.length-1)!=='"'){aW='"'+aW+'"'}if(aa.IsEmpty(aW)&&!aa.IsEmpty(aQ)){if(aQ.charAt(0)!=='"'&&aQ.charAt(aQ.length-1)!=='"'){aW='"'+aQ+'"'}else{aW=aQ}}}}else{if(aS===E.get("SWE_CTRL_DATE_PICK")){if(aQ&&!aQ.match(/[><=!&|]/g)){aW=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aQ,E.get("ISO_DATE_FORMAT"),aO.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat());if(aa.IsEmpty(aW)&&!aa.IsEmpty(aQ)){if(aQ.charAt(0)!=='"'&&aQ.charAt(aQ.length-1)!=='"'){aW='"'+aQ+'"'}else{aW=aQ}}}}}if(!aa.IsEmpty(aY)){aL.GetFieldMap()[aY].SetSearchSpec(aW)}var aH=aL.GetNotifyObject();aH.NotifyNewFieldQuerySpec(aY)}else{var aT;if(this.CanUpdate(aX)&&aL.GetSelection()>=0||this.IsPrivateField(aX)){var aV=aQ;aS=aO.GetUIType();if(aS===E.get("SWE_CTRL_COMBOBOX")){aT=this.GetFormattedFieldValue(aO,true)}if(SiebelApp.S_App.LocaleObject){if(aS===E.get("SWE_CTRL_DATE_TZ_PICK")||aS===E.get("SWE_CTRL_DATE_TIME_PICK")){aW=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aQ,E.get("ISO8601_DATETIME_FORMAT"),aO.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat()+" "+SiebelApp.S_App.LocaleObject.GetTimeFormat())}else{if(aS===E.get("SWE_CTRL_DATE_PICK")){aW=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aQ,E.get("ISO_DATE_FORMAT"),aO.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat())}}if(""===aW&&""!==aQ){aW=aQ}}var aU=this.SetFormattedValue(aO,aW);if(aU!==undefined){if(!aU){this.SetPrsrvControl(this.GetActiveControl());aL.ProcessError();aT=this.GetFormattedValue(aO);this.SetControlValueByName(aO.GetName(),aT);return false}}else{aN=true}var aK=function(){aV="";if(!aa.IsEmpty(aI.GetFieldName())&&this.HasCustomShadow()){aQ=this.GetFormattedFieldValue(aI,false);if((aQ!==aM)||(aQ!==aT)){this.FireOnChangeFieldValue(aI.GetFieldName(),aQ)}}};var aI=this.GetActiveControl();if(aN){$.callback(this,function(a0){if(aU===undefined&&this.GetErrStatus()){if(!aG){this.SetActiveControl(aI)}this.SetPrsrvControl(this.GetActiveControl());aL.ProcessError();var aZ=this.GetFormattedValue(aO);this.SetControlValueByName(aO.GetName(),aZ);this.SetErrStatus(false)}else{aK.call(this)}})}else{aK.call(this)}}}}else{if(aO.GetRadioGroupPropSet().GetChildCount()!==0){var aJ=aO.GetRadioGroupPropSet();var aR=true;var n;var aP=H;if(aO.GetUIType()===E.get("SWE_CTRL_COMBOBOX")){aP=e}while((n=aJ.EnumChildren(aR))){if(n.GetProperty(aP)===aQ){var aF=n.GetProperty(H);
aO.GetValue=function(){return aF};break}aR=false}aJ=null}else{aO.GetValue=function(){return aQ}}}SiebelApp.S_App.OfflineCallMethod("PassOldValue",this,aO,aQ,aM)}if(!aG){this.SetPrsrvControl(this.GetActiveControl());this.SetActiveControl(null)}}};ag.prototype.InvokeMethod=function(aR,aH,aM){var aN=false;if(typeof(aM)==="object"||aM===true||aM===false){aN=(typeof(aM.async)==="boolean")?aM.async:aM}if(!aq.GetMode()||aN||aR==="EditPopup"||aR==="OnEscapeKey"){return(Y.InvokeMethod.call(this,aR,aH,aM))}else{if(!aR){return false}var aP=true;var aV=false;aH=aH||CCFMiscUtil_CreatePropSet();var aQ=aH.Clone();var aK;var aU;this.SetCancelableRPCInfo(aR,aQ);if(SiebelApp.S_App.GetEnablePerfHooks()&&SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().TimeInvokeMethod("",this.GetName(),aR,"Begin InvokeMethod")}aP=this.FirePreInvokeMethod(aR,aQ);if(!aP){return false}var aJ=this.GetActiveControl();if(this.ConfirmMethod(aR)===false){SiebelApp.S_App.uiStatus.Free();if(aJ){this.SetFocusToCtrl(aJ.GetName(),true)}else{this.FocusFirstControl()}return true}if(aR==="Drilldown"&&!aH.GetProperty(ac)){aU=this.GetActiveControl();if(!aU||this.IsInQueryMode()||!this.CanNavigate(aU.GetFieldName())){return}var aO=this.GetBusComp().GetSelection();var aF;if(typeof(aU.GetSpanPrefix)==="function"){aF=aU.GetSpanPrefix();if(!aa.IsEmpty(aO)){aF+=aO+1}}else{aF=aU.GetInputName()}aQ.SetProperty(aD,aO+1);aQ.SetProperty(ac,aF)}if(aR==="OnFocus"){if(!aa.IsEmpty(this.GetView())){var aT=true;if(!this.GetView().IsAppletActive(this)){aT=false}var aX=this.GetView().SetActiveApplet(this);if(aX&&!aT){this.SetFocusDefaultControl(true);this.FocusDefaultControl()}this.FireInvokeMethod(aR,aH)}else{if(SiebelApp.S_App.GetActiveView()){SiebelApp.S_App.GetActiveView().SetActiveApplet(null)}this.SetAppletActive(true,this)}return true}if(aR==="FocusDefaultControl"){this.SetFocusDefaultControl(true);this.FocusDefaultControl();this.FireInvokeMethod(aR,aH);return true}if(aR==="UndoQuery"||aR==="ExecuteQuery"||aR==="UndoRecord"){this.SetFocusDefaultControl(true)}if(aR==="OnEnterKey"){aK=aw.call(this);if(aK===true){this.FireInvokeMethod(aR,aH)}return true}if(aR==="ImplicitCommit"){return(this.PostChangesToBC(true,null))}if((aR==="GetQuickPickInfo")&&(this.GetCachedCtrlQuickPick(aQ)===true)){SiebelApp.S_App.InvokeCallBack();this.FireInvokeMethod(aR,aH);return true}if(aR==="GotoLastSet"){var aG=-1;this.GetBusComp().SetCurRowNum(aG)}if(aR!=="GetQuickPickInfo"&&aR!=="EditField"&&aR!=="UndoRecord"){aU=this.GetActiveControl();if(aU&&false===this.LeaveField(aU,this.GetControlValueFromUI(aU),true)){this.EnterField(aU);return false}}if(aR!=="PositionOnRow"){if(this.GetBusComp()){this.CollectFieldValues(aQ)}}var aI={};if(typeof(aM)==="object"||aM===true||aM===false){aI.scope=this;aI.args=[];aI.args.push(aR);aI.args.push(aQ);aI.async=(typeof(aM.async)==="boolean")?aM.async:aM;aI.target=aM.target;aI.selfbusy=aM.selfbusy||false;aI.mask=aM.mask||false;aI.cb=function(){var aZ=Array.prototype.slice.call(arguments),aY=aS.GetProperty("Status"),a0=SiebelApp.S_App.ErrorObject.GetErrorSuppressState();aZ.push(this.PostExecute.apply(this,arguments));if(typeof(aM.cb)==="function"){aM.cb.apply(aM.scope||null,aZ)}if((!a0)||(aY===E.get("SWE_RPC_PROP_STATUS_ERROR"))){SiebelApp.S_App.ErrorObject.SetErrorSuppressState(true);this.ProcessError()}}}else{aI={scope:this,cb:function(){}}}var aW=aQ.GetProperty(E.get("SWE_PROP_CANCELABLE_RPC"));if(aa.IsTrue(aW)){var aL=this;var n=setTimeout(function(){aL.ProcessCancelQueryPopup();aL=null},1000*parseInt(SiebelApp.S_App.GetCancelQueryTimeout(),10));this.SetCancelQryTimeoutObj(n)}var aS=CCFMiscUtil_CreatePropSet();this.CallServerApplet(aR,aQ,aS,aI);$.callback(this,function(){if(typeof(aM)==="undefined"){var aY=[];aY.push(aR);aY.push(aQ);aY.push(aS);this.PostExecute.apply(this,aY)}if(aS.GetProperty("Status")===E.get("SWE_RPC_PROP_STATUS_ERROR")){this.SetErrStatus(true)}})}};function aw(){if(SiebelApp.S_App.GetPopupPM().Get("state")===E.get("POPUP_STATE_VISIBLE")&&SiebelApp.S_App.GetPopupPM().Get("isPopupSI")===true){return true}var aI=this.GetActiveControl();if(aa.IsEmpty(aI)){return false}var n=CCFMiscUtil_CreatePropSet();var aG=this.GetDefaultMethod();var aF=this.GetDefaultQryMethod();if(this.IsInQueryMode()===true){if(aF&&this.CanInvokeMethod(aF)){this.InvokeMethod(aF,n);return true}else{this.InvokeMethod("ExecuteQuery",n);return true}}else{if(aG&&this.CanInvokeMethod(aG)){this.InvokeMethod(aG,n);return true}else{if(false===this.LeaveField(aI,this.GetControlValueFromUI(aI),true)){this.EnterField(aI);return false}var aH=this.GetBusComp();if(aH&&aH.IsCommitPending()){this.InvokeMethod("WriteRecord",n);return true}}}this.ClearErrorMsg()}ag.prototype.ProcessPickInfo=function(aF){if(aq.GetMode()){var n=SiebelApp.S_App.GetActiveView().GetActiveApplet().GetVarName();aF.SetValue(n)}return(Y.ProcessPickInfo.call(this,aF))};ag.prototype.DeclareFrame=function(aF){var aI={};var aG={};aG[b]=aF.GetProperty(M);aG[aB]=ak;aG[r]="DeclareFrame";aG[w]=this;var aJ=CCFMiscUtil_CreatePropSet();aJ.AddChild(aF);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.DeclareFrame")}aG[v]=av;retObj=y.InvokeRegisteredSvc(aG,aJ,true);aI=retObj.retVal;err=retObj.err;if((aI.Outputargs)&&(aI.Outputargs).GetProperty("Invoked")&&(aI.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:retObj.err,retVal:aI.Outputargs});return}if(aI.Outputargs&&aJ){(aI.Outputargs).SetType(av);aJ.AddChild(aI.Outputargs)}O.call(this,aF);if(!(aF.GetProperty(Q))){var aH=this.GetBusComp();var n=this.GetView();if(aH!==null){if(n!==null){n.AddBCBroker(aH,this.GetName())}}}if(!this.GetDefn()){ay.CcfLogEvent([F,53,4,28,this.GetName(),this.GetDefn()])}this.SetNoUpdate(this.GetDefn().NoUpdate);this.SetNoInsert(this.GetDefn().NoInsert);this.SetNoDelete(this.GetDefn().NoDelete);this.SetNoMerge(this.GetDefn().NoMerge);aG[v]=aA;retObj=y.InvokeRegisteredSvc(aG,aJ,true);aI=retObj.retVal;if(aI&&aI.Outputargs){$.setReturnValue({err:retObj.err,retVal:aI.Outputargs});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.DeclareFrame")}}};function O(a2){if(!(a2.GetProperty(Q))){var a3=y.GetDyncPS(z,false);var a9=CCFMiscUtil_CreatePropSet();a9.SetType(a2.GetType());a9.SetValue(a2.GetValue());a9.SetProperty(Q,true);var a1=[W,J,x,m];ay.ProcessDPS(a9,a2,a1,3,false);var aL=[B,M];ay.ProcessDPS(a9,a2,aL,2,true);var n=a2.GetChildByType(G);if(n){var a5=a2.FindChildPosition(G);a2.RemoveChild(a5)}a3.AddChild(a9);y.SetDyncPS([z],[a3],1)}var aH;Y.ProcessObjectInfo.call(this,a2);if(a2.GetProperty(Q)){aH=this.GetControls();var aM;var aT=this.GetBusComp();var aI;if(aT){aI=aT.GetActiveRow()}else{aI=-1}var aV=this.GetName();var aU=this.GetView().GetName();var a7=window.localStorage.getItem("SRN");var aO=SiebelApp.OfflineAppMgr.GetControlRegExpMap();for(var a8 in aH){if(aH[a8]){var aX=aH[a8];aM=aX.GetMethodPropSet();if(aM){aM.SetPropertyStr(E.get("SWE_PROP_SESSION_RANDOM_NUMBER"),a7);aM.SetPropertyStr("SWEApplet",aV);aM.SetPropertyStr(E.get("SWE_ROW_STR"),aI);
aM.SetPropertyStr("SWEView",aU)}if(aX.GetSpanPrefix){var aS=aX.GetSpanPrefix();var aR=aX.GetInputName();var aP=new RegExp("(("+aS+"0)|("+aS+"65535))","ig");aO[aR]=aP}}}SiebelApp.OfflineAppMgr.SetControlRegExpMap(aO)}else{var aK=false;var aJ;var a4=CCFMiscUtil_CreatePropSet();aH=this.GetDefn().control;for(var aG in aH){if(aH[aG]){aJ=aH[aG];if(aJ){var a6=aJ.htmlIconMap;if(a6&&!aa.IsEmpty(a6)){a4.SetPropertyStr(M,a6);aK=true;var aW=SiebelApp.Metadata.GetMIcons(a6);var a0=aW.length;var aZ=0;var aN;for(var aY=0;aY<aW.length;aY++){aN=CCFMiscUtil_CreatePropSet();var aQ=SiebelApp.S_App.GetPageURL();aQ=aQ.replace("start.swe","images/");aQ=aQ.concat(aW[aY].FileName);aQ='<img src="'+aQ+'" border="'+aZ+'" space="'+aZ+'" hspace="'+aZ+'" >';aN.SetPropertyStr(M,aW[aY].IconName);aN.SetPropertyStr(E.get("SWE_PROP_ICON_IMG"),aQ);aN.SetType("i");a4.AddChild(aN)}}}}}if(aa.IsTrue(aK)){a4.SetType("il");var aF=y.GetDyncPS(E.get("SWE_PST_APP_INFO"),false);aF.AddChild(a4)}}}ag.prototype.EndLife=function(){if(!aq.GetMode()){return Y.EndLife.call(this)}var n=this.GetNotIdComp();if(n!==-1){this.GetBusComp().UnRegNotifyObj();this.SetNotIdComp(-1);this.SetNotComp(null)}this.ResetInterface();Y.EndLife.call(this)};ag.prototype.InitializeFrame=function(n){var aF={};var aG=CCFMiscUtil_CreatePropSet();aG.AddChild(n);aF[b]=this.GetName();aF[aB]=ak;aF[r]="InitializeFrame";aF[w]=this;aF[v]=av;retObj=y.InvokeRegisteredSvc(aF,aG,true);SStubObj=retObj.retVal;if((SStubObj.Outputargs)&&(SStubObj.Outputargs).GetProperty("Invoked")&&(SStubObj.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:retObj.err,retVal:SStubObj.Outputargs});return}if(SStubObj.Outputargs&&aG){(SStubObj.Outputargs).SetType(av);aG.AddChild(SStubObj.Outputargs)}aF[v]=aA;retObj=y.InvokeRegisteredSvc(aF,aG,true);SStubObj=retObj.retVal;if(SStubObj&&SStubObj.Outputargs){$.setReturnValue({err:retObj.err,retVal:SStubObj.Outputargs});return}};ag.prototype.SetInPlaceState=function(){var n=this.GetMode();if(n===E.get("SWE_PST_APPLET_MODE_EDIT")){this.SetInPlaceEdit(true)}};ag.prototype.ActivateFields=function(n){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.ActivateFields")}var aF={},aG={},aH=CCFMiscUtil_CreatePropSet();aF[b]=this.GetName();aF[aB]=ak;aF[r]="ActivateFields";aF[w]=this;aH.AddChild(n);aF[v]=av;y.InvokeRegisteredSvc(aF,aH);$.callback(this,function(aP){aG=aP.retVal;err=aP.err;if((aG.Outputargs)&&(aG.Outputargs).GetProperty("Invoked")&&(aG.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aP.err,retVal:aG.Outputargs});return}if(aG.Outputargs){(aG.Outputargs).SetType(av);aH.AddChild(aG.Outputargs)}var aX=this.GetBusComp();if(!aX){return}var aK=aX.GetChildBCArray();var aQ=[];var a6;var aI=aX.GetFieldMap();var aL=aK.length;for(var aJ=0;aJ<aL;aJ++){a6=aK[aJ].GetLinkDef();if(a6){if(!aI[a6.srcFieldName]){aQ.push(a6.srcFieldName)}if(!aa.IsEmpty(a6.primeIdFieldName)){aX.ActivateFieldList([a6.primeIdFieldName])}}}if(aQ.length>0){aX.ActivateFieldList(aQ)}var aW=this.EnumUserProps();var a2=[];var aV=-1;var aN=[];var a4;if(aW){aV=aW.length}for(var aY=0;aY<aV;aY++){aX.ActivateFieldList(a2)}if(aN){a4=aN.length;if(a4>0){aX.ActivateFieldList(aN)}}var a3=this.GetParentApplet();if(a3&&a3.GetDefn().AsocAplt&&(a3.GetDefn().AsocAplt===this.GetName())){var aT=a3.GetBusComp().GetActivatedFieldList();if(aT){if(aT.length>0){aX.ActivateFieldList(aT)}}}else{if(a3&&a3.GetActiveControl()){var aU=a3.GetActiveControl().GetFieldName();var aO;var aR=[];var aS;var aM=a3.GetBusComp().GetFieldDefn(aU);if(aM&&aM.PickListName){if(aM.pickMap){var a1=aM.pickMap.length;var a5;for(var a0=0;a0<a1;a0++){aO=aM.pickMap[a0];aR.push(aO.PFldName)}if(a1>0){this.GetBusComp().ActivateFieldList(aR)}for(var aZ=0;aZ<a1;aZ++){aO=aM.pickMap[aZ];if(!aO.IsConstrained){continue}a3.GetBusComp().FieldValue(aO.FldName);$.callback(this,function(a7){if(a7.err){$.setreturnValue(a7);return}else{a5=a7.retVal;aS="[";aS+=aO.PFldName;aS+="] = ";aS+='"'+a5+'"';this.GetBusComp().SetSearchSpec(aS);this.GetBusComp().SetExecuted(false);$.callback(this,function(){$.setReturnValue({err:false,retVal:true});return})}})}}}}}aX.ActivateFields();aF[v]=aA;y.InvokeRegisteredSvc(aF,aH);$.callback(this,function(a7){aG=a7.retVal;if(aG&&aG.Outputargs){$.setReturnValue({err:a7.err,retVal:aG.Outputargs});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.ActivateFields")}return}})})};ag.prototype.Populate=function(n){ay.CcfLogEvent([F,44,4,14,"Name",this.GetDefn().Name]);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.Populate")}var aF={},aG={},aH=CCFMiscUtil_CreatePropSet();aH.AddChild(aG.Outputargs);aF[b]=this.GetName();aF[aB]=ak;aF[r]="Populate";aF[w]=this;aF[v]=av;y.InvokeRegisteredSvc(aF,aH);$.callback(this,function(aM){aG=aM.retVal;err=aM.err;if((aG.Outputargs)&&(aG.Outputargs).GetProperty("Invoked")&&(aG.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aM.err,retVal:aG.Outputargs});return}if(aG.Outputargs){(aG.Outputargs).SetType(av);aH.AddChild(aG.Outputargs)}var aL=this.GetBusComp();if(!aL){$.setReturnValue({err:false});return}var aJ=aL.GetExtObjProp("isNewRecord"),aK=aL.GetExtObjProp("IsEditRecord"),aI=aL.IsExecuted(),aN="",aO=aL.GetExtObjProp("reExecute");if(aJ&&aI){aL.NewRecordX(true,false,null)}if(aK&&aI){aL.UpdateRecordX(true)}$.callback(this,function(){aO=aO?aO:false;var aT=aL.GetParentBusComp();if(!aT){var aQ=aL.GetChildBCArray(),aV=aQ.length,aU;for(var aS=0;aS<aV;aS++){aU=aQ[aS].GetLinkDef().srcFieldName;if(!(aL.GetFieldMap()[aU])){aL.ActivateField(aU);aO=true}}}aL.SetExtObjProp("reExecute",aO);if(aI&&!aO){return}if(aO&&aI){aN=aL.GetIdValueX()}var aR=this.GetDefn().searchSpec;if(aR){var aP=aL.GetAppletSearchSpec();aP.push(aR);ay.CcfLogEvent([F,31,4,10,aL.GetName(),"AppletSearchSpec: ",aP]);aL.SetAppletSearchSpec(aP)}aL.Execute();$.callback(this,function(aW){if(!aW.err){if(aO&&!(aa.IsEmpty(aN))){aL.PositionById(aN)}else{aL.Home()}$.callback(this,function(aX){if(!aX.err){aF[v]=aA;y.InvokeRegisteredSvc(aF,aH);$.callback(this,function(aY){aG=aY.retVal;if(aG&&aG.Outputargs){$.setReturnValue({err:aY.err,retVal:aG.Outputargs});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.Populate")}return}})}})}else{$.setReturnValue(aW)}})})})};ag.prototype.InterpolatePS=function(aF){var aI=[au,am,S,az,K],aH=0,n=aI.length;aF.SetPropertyStr(m);var aG=function(){};aG=function(){aI[aH].call(this,aF);$.callback(this,function(){aH++;if(aH<n){aG.call(this)}})};aG.call(this)};function au(n){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.AddDyncCanInvoke")}var aK=[];var aP;CCFMiscUtil_StringToArray(n.GetProperty(x),aK);var aM=aK.length;if(aM>=2){var aH=0,aG=[];var aI=function(){var aQ=aJ;return function(){return[Z.LookupStringCache(aK[aQ])]}};var aL=function(){var aQ=aJ;return function(aR){if(!aR.err){aP=aR.retVal;aK[aQ+1]=(aa.IsTrue(aP)?"1":"0");if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.AddDyncCanInvoke")
}}}};var aF;var aO;for(var aJ=0,aN=aM;aJ<aN;aJ+=2){aF=aI();aO=aL();aG[aH]={execute:this.CanInvokeMethodX,executeScope:this,preExecute:aF,postExecute:aO};aH++}$.eachAsyncOp(this,aG)}$.callback(this,function(){n.SetProperty(x,CCFMiscUtil_ArrayToString(aK))})}function am(n){var aF;var aI=[];CCFMiscUtil_StringToArray(n.GetProperty(J),aI);var aO=aI.length;if(aO>=2){var aJ=0,aH=[];var aK=function(){var aQ=aL;return function(){return[Z.LookupStringCache(aI[aQ])]}};var aM=function(){var aQ=aL;return function(aR){if(!aR.err){aF=aR.retVal}else{aF=false}aI[aQ+1]=(aa.IsTrue(aF)?"1":"0");if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.AddDyncCanInvoke")}}};var aG;var aP;for(var aL=0,aN=aO;aL<aN;aL+=2){aG=aK();aP=aM();aH[aJ]={execute:this.CanUpdateX,executeScope:this,preExecute:aG,postExecute:aP};aJ++}$.eachAsyncOp(this,aH)}$.callback(this,function(){n.SetProperty(J,CCFMiscUtil_ArrayToString(aI))})}function S(aV){var aN="";var aR=[];var aG="";var aJ=ax.call(this);var aF=aJ.length;if(aF){var n=CCFMiscUtil_CreatePropSet();n.SetType("cn");aV.AddChild(n);var aQ=this.GetControls();var aH=[];var aL=aQ.length;for(var aT=0;aT<aF;aT++){for(var aU in aQ){if(aQ.hasOwnProperty(aU)){if(aQ[aU].GetFieldName()===aJ[aT]){aH.push(aQ[aU].GetName());break}}}}var aS=aH.length;this.SetCanNavigateCtrlArray(aH);if(aS){var aP=0;var aM=this.GetBusComp();var aK;var aI=this.GetNotComp();var aW=false;aI=0;var aO=function(){aR=[];aK=this.GetDrillDown(aQ[aH[aP]].GetFieldName(),true);aG+="*";if(aM&&aM.CheckActiveRow()){aM.WSHomeX(aI,this.GetName());aW=true}else{aW=false}var aY=0;var aX=function(){this.CanNavigateX(aK);$.callback(this,function(aZ){if(!aZ.err){aN=aa.IsTrue(aZ.retVal)?"1":"0";aG+=aN;aR.push(aN);aW=aM.WSNextRecordX(aI,this.GetName());if(aW&&aY<aM.GetWS().length){aY++;aX.call(this)}}})};if(aW){aX.call(this)}$.callback(this,function(){if(aY>0){n.SetProperty(aH[aP],CCFMiscUtil_ArrayToString(aR))}aP++;if(aP<aS){aO.call(this)}})};aO.call(this)}}$.callback(this,function(aX){this.SetCanNavigateStateStr(aG)})}function az(n){}function K(n){var aG=this.GetBusComp();var aF=this.GetNotIdComp();if(!aG||aF===-1){return}var aH=aG.WSGetBegRow(aF,this.GetName());this.SetPrevBegRow(aH);n.SetPropertyStr(W,aH.toString())}function ao(){var n=[];var aF=this.GetBusComp();var aI=0;var aG=this.GetPrevBegRow();if(!aF||aI===-1){return}var aH=aF.WSGetBegRow(aI,this.GetName());if(aa.IsEmpty(aH)){return}if(aG!==aH){this.SetPrevBegRow(aH);n.push(this.GetName());n.push(aH.toString());aF.NotifyGeneric("BegRow",n)}}ag.prototype.GenerateExtraNotifyInfo=function(){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.GenerateExtraNotifyInfo")}var aH=arguments[0];var aG=SiebelApp.OfflineAppMgr.GetStatus();var aF=aa.DecodeFromQueryString(aH);var n=aF.GetProperty(E.get("SWEJI"));if(!aa.IsEmpty(n)||aG===R.get("REFRESHLAYOUT")||aG===R.get("NEWLAYOUT")||aG===R.get("NEWPOPUP")){return}f.call(this);$.callback(this,function(aI){ab.call(this);$.callback(this,function(){q.call(this);$.callback(this,function(aJ){ae.call(this);$.callback(this,function(){ao.call(this);var aK=this.GetPopupApplet();if(aK){aK.GenerateExtraNotifyInfo(aH)}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.GenerateExtraNotifyInfo")}})})})})};function f(){var aM=[];var aH=0;var aN=this.GetCanInvokeArray();if(aa.IsEmpty(aN)){return}var aJ=aN.length;var aK=this.GetBusComp();if(aJ<=0||!aK){return}var aF=false;aM.push(this.GetName());var aI;var aO;var aL=function(aP){if(!aP.err){aO=aP.retVal;aI=this.GetCanInvokeByName()[aN[aH]].bCanInvoke;if(aa.IsEmpty(aO)){aO=aI}if(aO!==aI){this.GetCanInvokeByName()[aN[aH]]={bCanInvoke:aO};aF=true}aM.push(String(aH));aM.push(aa.IsTrue(aO)?"1":"0")}};var n=function(aP){aH=aP;return[aN[aP]]};var aG={iterations:aJ,execute:this.CanInvokeMethodX,executeScope:this,postExecute:aL,preExecute:n};$.eachAsyncOp(this,aG);$.callback(this,function(){if(aF){aK.NotifyGeneric("SWEICanInvokeMethod",aM)}})}function ab(){var aM=[];var aI=this.GetCanUpdateArray();if(aa.IsEmpty(aI)){return}var aJ=aI.length;var aK=this.GetBusComp();var aH=0;if(aJ<=0||!aK){return}var aF=false;aM.push(this.GetName());var n=function(aN){aH=aN;return[aI[aN]]};var aL=function(aO){if(!aO.err){var aP=aO.retVal;var aN=this.GetCanUpdateByName()[aI[aH]].bCanUpdate;if(aa.IsTrue(aP)!==aa.IsTrue(aN)){this.GetCanUpdateByName()[aI[aH]]={bCanUpdate:aP};aF=true}aM.push(String(aH));aM.push(aa.IsTrue(aP)?"1":"0")}};var aG={iterations:aJ,execute:this.CanUpdateX,executeScope:this,postExecute:aL,preExecute:n};$.eachAsyncOp(this,aG);$.callback(this,function(){if(aF){aK.NotifyGeneric("SWEICanUpdate",aM)}})}function q(){var aH="";var aG=[];var aK="";var aL=0;var aM=[];var aF=this.GetCanNavigateMap();var aO=this.GetCanNavigateCtrlArray();aL=aO.length;var n=this.GetBusComp();aM.push(this.GetName());if(
/*!mapCanNav || */
!n||!aL){return}var aI=0;var aP=this.GetNotComp();aP=0;var aJ=false;var aN=function(){aG=[];var aR=this.GetDrillDown(aO[aI],true);aK+="*";if(n&&n.CheckActiveRow()){n.WSHomeX(aP,this.GetName());aJ=true}else{aJ=false}var aS=0;var aQ=function(){this.CanNavigateX(aR);$.callback(this,function(aT){if(!aT.err){aH=aa.IsTrue(aT.retVal)?"1":"0";aK+=aH;aG.push(aH);aJ=n.WSNextRecordX(aP,this.GetName());if(aJ&&aS<n.GetWS().length){aS++;aQ.call(this)}}})};if(aJ){aQ.call(this)}$.callback(this,function(){if(aS>0){aM.push("*"+aO[aI]);aM=aM.concat(aG)}aI++;if(aI<aL){aN.call(this)}})};aN.call(this);$.callback(this,function(aR){var aQ=this.GetCanNavigateStateStr();if(aQ!==aK){aQ=aK;this.NotifyGeneric("SWEICanNavigate",aM)}})}ag.prototype.CanNavigateX=function(n){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.CanNavigateX")}var aF={},aG={},aH=CCFMiscUtil_CreatePropSet();aF[b]=this.GetName();aF[aB]=ak;aF[r]="CanNavigateX";aF[w]=this;aH.SetPropertyStr("ddObj",n);aF[v]=av;y.InvokeRegisteredSvc(aF,aH);$.callback(this,function(aK){aG=aK.retVal;err=aK.err;if((aG.Outputargs)&&(aG.Outputargs).GetProperty("Invoked")&&(aG.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aK.err,retVal:aG.Outputargs});return}if(aG.Outputargs){(aG.Outputargs).SetType(av);aH.AddChild(aG.Outputargs)}var aJ=0;var aI;if(!n){aI=false}else{var aL=this.GetBusComp();if(aL){aJ=aL.GetActiveRow()}if(aJ>=0){aI=true}else{aI=false}}aF[v]=aA;y.InvokeRegisteredSvc(aF,aH);$.callback(this,function(aM){aG=aM.retVal;if(aG&&aG.Outputargs){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanNavigateX")}aI=aG.Outputargs}$.setReturnValue({err:aM.err,retVal:aI})})})};ag.prototype.PositionBaseAncestorFrame=function(){};ag.prototype.GoBackToRecord=function(aJ){ay.CcfLogEvent([F,44,4,15,"Name",this.GetDefn().Name]);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.GoBackToRecord")}var aG;var aI;var aF;var aK=this.GetBusComp();var n=ay.JsonRecordSet(aJ);var aH=n.SweCommands.SWERowId;if(aK){aI=aK.GetExtObjProp("m_wsActiveRow");aF=aK.FindWorkSet(aI);if(aF){aK.FieldValue(E.get("SWE_ROW_ID_FIELD"),aF);
$.callback(this,function(aL){if(!aL.err){aG=aL.retVal;if(!this.CheckActiveRowId(aG,aH)){aK.PositionById(aH)}}else{$.setReturnValue(aL)}if(SiebelApp.S_App.GetTimer()){$.callback(this,function(){SiebelApp.S_App.GetTimer().EndTime("Applet.GoBackToRecord")})}})}}};ag.prototype.CanPostChangesToBC=function(aG){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.CanPostChangesToBC")}var n;var aH=CCFMiscUtil_CreatePropSet();aH.SetProperty("inputParam1",aG);var aF={};aF[b]=this.GetName();aF[aB]=ak;aF[r]="CanPostChangesToBC";aF[w]=this;aF[v]=av;y.InvokeRegisteredSvc(aF,aH);$.callback(this,function(aI){SStubObj=aI.retVal;err=aI.err;if((SStubObj.Outputargs)&&(SStubObj.Outputargs).GetProperty("Invoked")&&(SStubObj.Outputargs).GetProperty("Invoked").toString()==="true"){$.setReturnValue({err:aI.err,retVal:SStubObj.Outputargs});return}if(SStubObj.Outputargs&&aH){(SStubObj.Outputargs).SetType(av);aH.AddChild(SStubObj.Outputargs)}if(aG===null||aG===undefined){return false}if(aG==="EditField"||aG==="EditMail"||aG==="ExecuteQuery"||aG==="ExecuteNewQuery"||aG==="PostChanges"||aG==="WriteRecord"||aG==="SaveEditRecord"||aG==="PositionOnRow"||aG==="UndoQuery"||aG==="ShowPopup"||aG==="ViewField"||aG==="GetSMCUpdate"||aG==="ExecuteFrameQuery"){n=false}else{n=true}aF[v]=aA;aH.SetProperty("RetVal",n);y.InvokeRegisteredSvc(aF,aH);$.callback(this,function(aJ){err=aJ.err;var aK=aJ.retVal;if(aK.Outputargs){n=aK.Outputargs}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanPostChangesToBC")}$.setReturnValue({err:err,retVal:n})})})};ag.prototype.CanInvokeMethodX=function(n){if(!n){$.setReturnValue({err:true,retVal:false});return}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.CanInvokeMethodX")}var aH,aF={},aG;aF[b]=this.GetName();aF[aB]=ak;aF[r]="DoCanInvokeMethod";aF[w]=this;var aI=CCFMiscUtil_CreatePropSet();aI.SetPropertyStr("MethodName",n);aF[v]=av;y.InvokeRegisteredSvc(aF,aI);$.callback(this,function(aO){aH=aO.retVal;aG=aO.err;if(aH.Outputargs&&(aH.Outputargs).GetProperty("Invoked")&&(aH.Outputargs).GetProperty("Invoked").toString()==="true"){var aL=(aH.Outputargs).GetProperty("RetVal").toString();$.setReturnValue({err:aG,retVal:aL});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return}if(aH.Outputargs&&aI){(aH.Outputargs).SetType(av);aI.AddChild(aH.Outputargs)}var aK=this.GetUserProperty("CanInvokeMethod: "+n);aK=(aa.IsEmpty(aK))?this.GetUserProperty("CanInvokeMethod:"+n):aK;if(!aa.IsEmpty(aK)){if(aK==="TRUE"){$.setReturnValue({err:false,retVal:true});return}else{if(aK==="FALSE"){$.setReturnValue({err:false,retVal:false});return}else{var aJ=SiebelApp.Query.Parse(aK);var aN=SiebelApp.Query.Evaluate(aJ,this.GetBusComp());$.setReturnValue({err:false,retVal:aN});return}}}var aM=false;switch(n){case R.get("NEWRECORD"):case R.get("COPYRECORD"):$.setReturnValue({err:false,retVal:this.CanNewAndBOL(true,false)});return;case R.get("CREATERECORD"):$.setReturnValue({err:false,retVal:false});return;case R.get("WRITERECORD"):case"ExplicitWriteRecord":this.CanWriteRecord();aM=true;break;case R.get("SHOW_POPUP"):$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("UNDORECORD"):$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("EXECUTEFRMQUERY"):case R.get("EXECUTE_QUERY"):aO=this.CanExecuteQuery();$.setReturnValue(aO);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("EDITRECORD"):if(!this.GetInPlaceEdit()){this.CanUpdateX();aM=true}else{$.setReturnValue({err:false,retVal:false});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return}break;case R.get("EXECUTESORT"):this.CanSort();break;case R.get("DELETERECORD"):this.CanDeleteRecord();aM=true;break;case R.get("DELETERECORDS"):this.CanDeleteRecords();aM=true;break;case R.get("DRILLDOWN"):case"DrillDown":$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("EDIT_FIELD"):$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("GO_TO_NEXT_SET"):aO=this.CanGotoNextSet();$.setReturnValue(aO);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("GO_TO_PRV_SET"):aO=this.CanGotoPreviousSet();$.setReturnValue(aO);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("SCROLL_NEXT"):aO=this.CanScrollNext();$.setReturnValue(aO);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("SCROLL_PREVIOUS"):aO=this.CanScrollPrevious();$.setReturnValue(aO);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("SCROLL_NEXT_DATA"):aO=this.CanScrollNext();$.setReturnValue(aO);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("SCROLL_PREV_DATA"):aO=this.CanScrollPrevious();$.setReturnValue(aO);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("GOTOVIEW"):$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("PICKRECORD"):this.CanPickRecord();aM=true;break;case R.get("POSITION_ON_ROW"):var aP=this.GetBusComp();if(!aP){$.setReturnValue({err:false,retVal:false});return}if(!aP.CheckActiveRow()){$.setReturnValue({err:false,retVal:false})}else{$.setReturnValue({err:false,retVal:true})}if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("SWE_POST_CHANGES"):$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case"ResetRecord":$.setReturnValue({err:false,retVal:true});return;case"GetQuickPickInfo":$.setReturnValue({err:false,retVal:true});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case"Refresh":$.setReturnValue({err:false,retVal:true});return;case R.get("GO_TO_FST_SET"):aO=this.CanGotoFirstSet();$.setReturnValue(aO);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("GO_TO_LAST_SET"):aO=this.CanGotoLastSet();$.setReturnValue(aO);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("GO_TO_NEXT_REC"):this.CanGotoNextRecord();if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}break;
case R.get("GO_TO_PREVIOUS_REC"):aO=this.CanGotoPreviousRecord();$.setReturnValue(aO);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}return;case R.get("ADDRECORD"):aO=this.CanAddRecord();$.setReturnValue(aO);break;case R.get("SWE_CLOSE_APPLET"):aO=({err:false,retVal:true});$.setReturnValue(aO);break;default:if(this.GetBusComp()){this.GetBusComp().CanInvokeMethodX(n);aM=true}}if(aM){$.callback(this,function(aQ){$.setReturnValue(aQ);if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanInvokeMethodX")}})}})};ag.prototype.CanNewAndBOL=function(aF,n){if(this.GetParentApplet()){return false}var aG=this.GetBusComp();if(aG===null||aG===undefined){ay.CcfLogEvent([F,37,4,13,"InserRecord","buscomp is undefined"]);return false}if(this.m_bNoInsert||this.IsMultiRecSelected()||aG.IsInQueryState()){return false}else{if(aF){if(aG.HasAssocList()&&n){return !this.m_cszAssocFrameName}else{return(aG.CanInsert())}}else{return(aG.GetSelection()>=0&&aG.CanInsert())}}};ag.prototype.IsMultiRecSelected=function(){return this.GetBusComp().GetMultiSelectMode()};ag.prototype.CanGotoNextSet=function(){var aF=this.GetBusComp();if(aF){var n=aF.GetRecordCount();var aG=aF.GetCursor();if(aG[0]>=(n-1)){return({err:false,retVal:false})}}return({err:false,retVal:true})};ag.prototype.CanGotoPreviousSet=function(){var aF=this.GetBusComp();if(aF){var aG=aF.GetCursor();var n=aF.GetRecordCount();if((aG[0]>0)&&(n>1)){return({err:false,retVal:true})}}return({err:false,retVal:false})};ag.prototype.CanGotoFirstSet=function(){return({err:false,retVal:true})};ag.prototype.CanGotoLastSet=function(){return({err:false,retVal:true})};ag.prototype.CanScrollNext=function(){var aF=this.GetBusComp();if(aF){var n=aF.GetRecordCount();if(n<=R.get("PAGE_SIZE")||aF.GetIsRelatedBC()){return({err:false,retVal:false})}else{var aG=aF.GetCursor();if(aF.GetScrollCount()<(n-R.get("PAGE_SIZE"))){return({err:false,retVal:true})}}}return({err:false,retVal:false})};ag.prototype.CanScrollPrevious=function(){var aF=this.GetBusComp();if(aF){var aG=aF.GetCursor();var n=aF.GetRecordCount();if((n>R.get("PAGE_SIZE"))&&(aF.GetScrollCount()>0)&&!aF.GetIsRelatedBC()){return({err:false,retVal:true})}}return({err:false,retVal:false})};ag.prototype.CanGotoNextRecord=function(){var aI=0;var aH;var aG=this.GetBusComp();if(aG===null||aG===undefined){$.setReturnValue({err:true,retVal:false});return}if(this.m_bNoRecordNavigation){$.setReturnValue({err:false,retVal:false});return}if(aG.IsInQueryState()){$.setReturnValue({err:false,retVal:false});return}var n=aG.GetSelection();var aF=aG.FindWorkSet(n);aI=aG.GetRowNum(aF);if(aI<1){$.setReturnValue({err:false,retVal:false});return}aH=aG.GetNumRows();if(aI>=aH){$.setReturnValue({err:false,retVal:false});return}$.setReturnValue({err:false,retVal:true})};ag.prototype.CanGotoPreviousRecord=function(){var aH=0;var aG=this.GetBusComp();if(aG===null||aG===undefined){$.setReturnValue({err:true,retVal:false});return}if(this.m_bNoRecordNavigation){$.setReturnValue({err:false,retVal:false});return}if(aG.IsInQueryState()){$.setReturnValue({err:false,retVal:false});return}var n=aG.GetSelection();var aF=aG.FindWorkSet(n);aH=aG.GetRowNum(aF);if(aH===1){$.setReturnValue({err:false,retVal:false});return}$.setReturnValue({err:false,retVal:true})};ag.prototype.CanDeleteRecord=function(){var aF=this.GetBusComp();var n={};n.err=false;n.retVal=false;if(this.GetNoDelete()||this.IsMultiRecSelected()){$.setReturnValue(n)}else{if(!aF){n.err=true;$.setReturnValue(n)}else{if(aF.IsInQueryState()){n.retVal=false;$.setReturnValue(n)}else{aF.CanDelete();$.callback(this,function(aG){$.setReturnValue(aG)})}}}};ag.prototype.CanDeleteRecords=function(){$.setReturnValue({err:false,retVal:true})};ag.prototype.CanExecuteQuery=function(aF,n){var aH=this.GetBusComp();var aG={};aG.err=false;aG.retVal=false;if(aH===null||aH===undefined){aG.err=true;$.setReturnValue(aG);return}$.setReturnValue({err:false,retVal:!this.m_bNoExecuteQuery});return({err:false,retVal:!this.m_bNoExecuteQuery})};ag.prototype.CanWriteRecord=function(){var aF=this.GetBusComp();var n=[];if(aF===null||aF===undefined){ay.CcfLogEvent([F,37,4,13,"WriteRecord","buscomp is undefined"]);return}if(!aF.CheckActiveRow()){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("BCErrNoActiveRow","","","","",4,70);$.setReturnValue({err:"BCErrNoActiveRow",retVal:false});return}if(aF.IsInQueryState()){ay.CcfLogEvent([F,37,4,13,"WriteRecord","buscomp is in Query Mode",aF.GetName()]);return}if(!aF.IsCommitPending()){if(!this.m_bNoUpdate){aF.CanUpdateX(true);$.callback(this,function(aG){if(!aG.retVal){$.setReturnValue({err:false,retVal:false})}else{$.setReturnValue({err:false,retVal:true})}})}else{$.setReturnValue({err:false,retVal:false});return}}else{$.setReturnValue({err:false,retVal:true})}};ag.prototype.CanUpdateX=function(n){if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().StartTime("Applet.CanUpdateX")}var aG,aF={};aF[b]=this.GetName();aF[aB]=ak;aF[r]="CanUpdate";aF[w]=this;var aH=CCFMiscUtil_CreatePropSet();aH.SetPropertyStr("Field",n);aF[v]=av;y.InvokeRegisteredSvc(aF,aH);$.callback(this,function(aM){aG=aM.retVal;err=aM.err;if(aG.Outputargs&&(aG.Outputargs).GetProperty("Invoked")&&(aG.Outputargs).GetProperty("Invoked").toString()==="true"){var aK=(aG.Outputargs).GetProperty("RetVal").toString();$.setReturnValue({err:err,retVal:aK});if(SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().EndTime("Applet.CanUpdateX")}return}if(aG.Outputargs&&aH){(aG.Outputargs).SetType(av);aH.AddChild(aG.Outputargs)}var aN=this.GetBusComp();if(n!==undefined){var aJ=this.GetControls();if(aJ[n]!==undefined){if(aa.IsEmpty(aJ[n].GetFieldName())){var aI=aJ[n].IsEditEnabled();if(!aI){$.setReturnValue({err:false,retVal:true});return}}if(aN&&aN.IsInQueryState()){$.setReturnValue({err:false,retVal:true});return}if(this.GetDefn().control){if(this.GetDefn().control[n]){if(this.GetDefn().control[n].ReadOnly===true){$.setReturnValue({err:false,retVal:false});return}}}}if(this.GetNoUpdate()&&aN&&!aN.IsNewRecordPending()){$.setReturnValue({err:false,retVal:false});return}if(aN!==null&&aN!==undefined){aN.CanUpdateX(false,n);$.callback(this,function(aO){$.setReturnValue(aO)})}else{$.setReturnValue({err:false,retVal:false})}}else{var aL;if(this.m_bNoUpdate){$.setReturnValue({err:false,retVal:false});return}if(aN===null||aN===undefined){$.setReturnValue({err:false,retVal:false});return}aL=aN.GetActiveRow();if(aL>=0){aN.CanUpdateX(true);$.callback(this,function(aO){if(aO.retVal){$.setReturnValue({err:false,retVal:true})}else{$.setReturnValue({err:false,retVal:false})}})}else{$.setReturnValue({err:false,retVal:false})}}})};ag.prototype.CanSort=function(){return(false)};ag.prototype.CanAddRecord=function(){var aF=this.GetBusComp();var n=(aF&&(!(aF.IsInQueryState()))&&(aF.CheckActiveRow()));return({err:false,retVal:n})};ag.prototype.CanPickRecord=function(){var aF=this.GetBusComp();var aG=this.GetParentApplet();var n=true;if(aG&&aG.GetActiveControl()&&aG.GetActiveControl().GetFieldName()){var aH=aG.GetActiveControl().GetFieldName();
aG.CanUpdateX(aH);$.callback(this,function(aI){n=(aF&&(aI.retVal)&&(aF.CheckActiveRow()));$.setReturnValue({err:false,retVal:n});return})}else{$.setReturnValue({err:false,retVal:n});return}};ag.prototype.CoreMethod=function(n){switch(n){case R.get("DELETERECORD"):case E.get("SWE_GET_PICK_INFO"):case R.get("SWE_POST_CHANGES"):case R.get("SWE_CLOSE_APPLET"):case R.get("POSITION_ON_ROW"):case R.get("PICKRECORD"):case R.get("WRITERECORD"):case R.get("NEWRECORD"):case R.get("ADDRECORD"):case R.get("EDIT_FIELD"):case R.get("UNDORECORD"):case R.get("EDITRECORD"):case"ShowPopup":case N:case"DrillDown":case R.get("SCROLL_NEXT_DATA"):case R.get("SCROLL_PREV_DATA"):case R.get("GO_TO_NEXT_SET"):case R.get("GO_TO_PREV_SET"):case R.get("EXECUTE_FRAME_QUERY"):case R.get("FIND"):return true;default:return false}};ag.prototype.InvokeMethodX=function(n,aK){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.prototype.InvokeMethodX ")}var aG=this.CoreMethod(n);var aJ;var aF={};var aI;var aH=[];if(!n){aH.push(n);SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("AppletErrNoSuchMethod",aH,"","","",4,11);$.setReturnValue({err:"AppletErrNoSuchMethod",retVal:""});return}aF[b]=this.GetName();aF[aB]=ak;aF[r]="DoInvokeMethod";aF[w]=this;aK.SetProperty("MethodName",n);aF[v]=av;y.InvokeRegisteredSvc(aF,aK);$.callback(this,function(aL){aJ=aL.retVal;aI=aL.err;if(aI){$.setReturnValue({err:aI,retVal:aJ.Outputargs});return}if((aJ.Outputargs)&&(aJ.Outputargs).GetProperty("Invoked")&&(aJ.Outputargs).GetProperty("Invoked").toString()==="true"){ay.CcfLogEvent([F,48,4,11,aF[b],n,aF.ExtType]);$.setReturnValue({err:aI,retVal:aJ.Outputargs});if(!A.GetPostedAction()||!A.GetPostedAction().Action){A.PostActions(R.get("ACTION_RPC_COMPLETED"))}if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.prototype.InvokeMethodX ")}return}if(aJ.Outputargs&&aK){(aJ.Outputargs).SetType(av);aK.AddChild(aJ.Outputargs)}ar.call(this,n,aK);$.callback(this,function(aO){var aM=aO.retVal;var aN=aO.err;if(aN){$.setReturnValue({err:aN,retVal:aM});return}if(aM){if(this.GetBusComp()){this.GetBusComp().InvokeMethodX(n,aK)}$.callback(this,function(aP){aJ=aP.retVal;if(aJ){$.setReturnValue({err:aN,retVal:aJ.Outputargs})}if(!A.GetPostedAction()||!A.GetPostedAction().Action){A.PostActions(R.get("ACTION_RPC_COMPLETED"))}return})}aF[v]=aA;aK.SetProperty("RetVal",aM);y.InvokeRegisteredSvc(aF,aK);$.callback(this,function(aQ){var aP=aQ.retVal.Outputargs;aN=aQ.err;$.setReturnValue({err:aN,retVal:aP});if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.prototype.InvokeMethodX ")}return})})})};function ar(n,aI){if(!n){$.setReturnValue({err:true,retVal:false})}var aF={};aF.request=aI.GetProperty("Request").toString();if(n==="NewRecord"){this.NewRecord(aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="EditRecord"){this.EditRecord(aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="WriteRecord"){V.call(this,aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="GetQuickPickInfo"){var aJ;var aG;if(this.GetParentApplet()!==null){aJ=this.GetActiveControl().GetInputName();P.call(this,aJ);$.callback(this,function(aK,aL){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}})}else{if(this.GetActiveControl()===null&&d.GetActiveRequestObj()&&d.GetActiveRequestObj().activeControl){this.SetActiveControl(d.GetActiveRequestObj().activeControl)}aJ=this.GetActiveControl().GetFieldName();aG=this.GetActiveControl().GetApplet().GetBusComp();var aH=aG.GetFieldMap()[aJ].GetDefn().PickListName;s.call(this,aH,aJ);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}})}return}if(n==="EditField"){an.call(this,aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="ShowPopup"){this.MakePopup("ShowPopup",aF);$.setReturnValue({err:false,retVal:false});return}if(n==="AddRecord"){u.call(this,aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="UndoRecord"){c.call(this,aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="PickRecord"){U.call(this,aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="PositionOnRow"){g.call(this,aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="DeleteRecord"){p.call(this,aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="PostChanges"){ai.call(this,aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="ScrollNextData"){T.call(this,aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="ScrollPrevData"){al.call(this,aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="GotoNextSet"){C.call(this,aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="GotoPreviousSet"){o.call(this,aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="ExecuteFrameQuery"){ap.call(this,aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="CloseApplet"){X.call(this,aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n==="Find"){D.call(this,aF);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK)}else{$.setReturnValue({err:false,retVal:false})}});return}if(n===N||n==="DrillDown"){ah.call(this,aF);$.callback(this,function(aK){$.setReturnValue({err:false,retVal:false})});return}$.setReturnValue({err:false,retVal:true})}ag.prototype.NewRecord=function(aI){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.prototype.NewRecord ")}var n=this.GetDefn();var aH=n.AsocAplt;var aG=aa.DecodeFromQueryString(aI.request);var aF=aG.GetProperty(E.get("SWE_SHOW_POPUP_STR")).toString();if(!aa.IsEmpty(aH)&&(aF==="true")){aI.appletName=aH;this.MakePopup("NewRecord",aI)}else{this.GetBusComp().SetExtObjProp("isNewRecord",true);I.call(this,aI)}if(Z.GetTimer()){$.callback(this,function(){Z.GetTimer().EndTime("Applet.prototype.NewRecord ")})}};function c(aF){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.OnActionCancelRecord ")}var n=this.GetBusComp();if(n&&n.IsCommitPending()){n.UndoRecord()}$.callback(this,function(){var aH=R.get("VIEW_INFO");
var aG=R.get("GOTOVIEWCOLD");this.PostLayoutAction(false,aG,aH);if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.OnActionCancelRecord ")}})}function U(aI){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.OnActionsPickRecord ")}var n;var aH;var aF;var aG;n=this.GetBusComp();aH=this.GetParentApplet();aG=this.GetPickAppletSrcInfo().SrcAppletFld;if(aG){aF=aH.GetBusComp();n.SetPickSrcField(aG);n.SetSrcIdFld(aG,aF);n.SetMasterBC(aF);n.PickCurrentRow()}$.callback(this,function(){this.ClosePopupApplet()});if(Z.GetTimer()){$.callback(this,function(){Z.GetTimer().EndTime("Applet.OnActionsPickRecord ")})}}function g(n){A.PostActions(R.get("ACTION_RPC_CONTINUE"),"PositionOnRow")}function T(n){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.OnActionsScrollNextData ")}var aF=R.get("SCROLL_SIZE");af.call(this,aF,n);$.callback(this,function(aG){if(!aG.err){var aH=aG.retVal;this.PostLayoutAction(true,n.methodName);if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.OnActionsScrollNextData ")}}else{$.setReturnValue(aG)}})}function al(n){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.OnActionsScrollPrevData ")}var aF=R.get("SCROLL_SIZE");if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.OnActionsScrollPrevData ")}aF=-aF;af.call(this,aF,n);$.callback(this,function(aG){if(!aG.err){var aH=aG.retVal;this.PostLayoutAction(true,n.methodName);if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.OnActionsScrollPrevData ")}}else{$.setReturnValue(aG)}})}function C(aF){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.OnActionsNextset ")}var n=true;l.call(this,aF,n);$.callback(this,function(aG){if(!aG.err){this.PostLayoutAction(true,aF.methodName);if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.OnActionsNextset ")}}else{$.setReturnValue(aG)}})}function ap(aF){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.ExecuteQuery")}var n=this.GetBusComp();var aG=n.GetCursor();aG[0]=0;n.SetCursor(aG);n.SetSearchSpec("");if(!n.IsInQueryState()){n.BeginQuery()}k.call(this);$.callback(this,function(aH){if(!aH.err){n.Execute();$.callback(this,function(aI){if(!aI.err){$.callback(this,function(aJ){if(!aJ.err){n.Home();$.callback(this,function(aK){if(!aK.err){this.PostLayoutAction(true,aF.methodName);if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.ExecuteQuery")}}})}})}})}else{$.setReturnValue(aH)}})}function X(){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.Close")}var aF=this.GetBusComp();var n=this.GetName();var aG=aF.GetVarName();this.ClosePopupApplet()}function D(aI){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.OnQueryExecute")}var aF=this.GetBusComp();aF.SetSearchSpec("");var aO=this.GetControls();var aQ=aO.PopupQueryCombobox;var aG=aO.PopupQuerySrchspec;if(aQ&&aG){var aS=d.GetActiveRequestObj();var aP=aG.GetInputName();var aM=aQ.GetInputName();var aJ=aS.SweCommands[aP];var aN=aS.SweCommands[aM];var n=this.GetControls()[aN];var aH=[];if(aa.IsEmpty(n)){var aR=aF.GetFieldList();var aL=aR.length;for(var aK=0;aK<aL;aK++){aH[aK]=SiebelApp.S_App.LookupStringCache(aR[aK]);if(aH[aK]&&aO[aH[aK]]&&(aO[aH[aK]].GetDisplayName()===aN)){n=this.GetControls()[aO[aH[aK]].GetFieldName()];break}}}aJ=aF.DoBldQueryText(n,aJ);aF.SetSearchSpec(aJ);aF.Execute();$.callback(this,function(aT){if(!aT.err){$.callback(this,function(aU){if(!aU.err){aF.Home();$.callback(this,function(aV){if(!aV.err){this.PostLayoutAction(true,aI.methodName);if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.OnQueryExecute")}}})}})}})}}function o(aF){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.OnActionsPreviousset ")}var n=false;l.call(this,aF,n);$.callback(this,function(aG){if(!aG.err){this.PostLayoutAction(true,aF.methodName);if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.OnActionsPreviousset ")}}else{$.setReturnValue(aG)}})}function l(aI,aF){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.DoNextPriorSet ")}var aH=this.GetBusComp();var aJ=0;aH.WSHomeX(aJ,this.GetName());var n=aH.GetActiveRow();var aG=aH.FindWorkSet(n);if(!aG){$.setReturnValue({err:true,retVal:""});return}if(aF){aH.NextSet(aI,this.GetName())}else{aH.PriorSet(aI,this.GetName())}$.callback(this,function(aK){if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.DoNextPriorSet ")}$.setReturnValue(aK)})}function af(aG,aF){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.DoScrollData ")}var n=this.GetBusComp();n.ScrollWorkSetByNum(aG,aF,this.GetName());$.callback(this,function(aH){$.setReturnValue(aH);if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.DoScrollData ")}})}function an(aF){ay.CcfLogEvent([F,44,4,16,"Name",this.GetDefn().Name]);var n=false;var aG=this.GetActiveControl().GetName();if(!this.CanUpdate(aG)){ay.CcfLogEvent([F,47,4,24,aG]);n=true}this.ShowFieldDetail(n,aF)}function I(n){this.SetSavedModeState(E.get("SWE_PST_APPLET_MODE_NEW"));SiebelApp.RequestProcessor.SetLayoutState(true,this.GetName());this.PostLayoutAction(false,"NewRecord",R.get("NEW_VIEW_INFO"))}function a(n){this.SetSavedModeState(E.get("SWE_PST_APPLET_MODE_EDIT"));SiebelApp.RequestProcessor.SetLayoutState(true,this.GetName());this.PostLayoutAction(false,"EditRecord",R.get("NEW_VIEW_INFO"))}ag.prototype.ShowFieldDetail=function(n,aF){ay.CcfLogEvent([F,44,4,17,"Name",this.GetDefn().Name]);this.MakePopup("EditField",aF);$.callback(this,function(){aj.call(this);$.callback(this,function(){})})};function aj(){ay.CcfLogEvent([F,44,4,17,"Name",this.GetDefn().Name]);if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.PostChangesForPopup ")}k.call(this,false);$.callback(this,function(){if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.PostChangesForPopup ")}})}ag.prototype.EditRecord=function(aG){this.GetBusComp().SetExtObjProp("IsEditRecord",true);var aF=this.GetBusComp().GetActiveRow();var n=this.GetBusComp().FindWorkSet(aF);this.GetBusComp().SetOrigRecVal(n);a.call(this,aG)};ag.prototype.MakePopup=function(n,aJ){ay.CcfLogEvent([F,44,4,18,"methodName",n]);var aH;switch(n){case"ShowPopup":aH="puinf";var aG=aa.DecodeFromQueryString(aJ.request);var aI=aG.GetProperty("SWETA").toString();A.SetContext("Applet",aH,aI);break;case R.get("NEWRECORD"):aH=R.get("NEW_VIEW_INFO");A.SetContext("Applet",aH);break;case R.get("EDIT_FIELD"):var aF=this.GetBusComp();if(aF.IsDeletePending()){aF.WriteRecord()}$.callback(this,function(){this.CreatePopup(n,aJ)});break}};ag.prototype.CreatePopup=function(n,aH){ay.CcfLogEvent([F,44,4,19,"methodName",n]);if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.CreatePopup ")}var aG;var aF=this.GetActiveControl();if(aF.GetUIType()==="Pick"){SiebelApp.BrowserCacheMgr.GetPickAppletInfo(this.GetView().GetName(),this.GetName(),aF.GetName());$.callback(this,function(aK){var aI=aK.retVal;aG=R.get("PICK_APLT_INFO");var aJ=aI.PickApplet+"__"+this.GetName()+"__"+this.GetView().GetName();SiebelApp.RequestProcessor.SetPrevReqObj({reqType:n,searchVal:aJ});A.SetContext("Applet",aG,aJ);if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.CreatePopup ")}})}};ag.prototype.WSNextRecordX=function(){var aI=false;var aG=this.GetBusComp();var aJ=this.GetNotIdComp();aJ=0;var aF=aG.WSNextRecordX(aJ,this.GetName());var aH=aF.err;if(!aH){aI=true;aF.err="";aF.retVal=aI;return aF}if(aH==="SSAOMErrEOWS"){aF.err="";
aF.retVal=aI;return aF}var n=[aG];aF.err=aH;aF.retVal=n;return aF};function u(){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.OnActionAddRecord ")}var aF=this.GetBusComp();var n=aF.IsNotifyEnabled();if(n){aF.DisableNotifySys()}aF.AssocSelection();$.callback(this,function(aG){if(!aG.err){if(n){aF.EnableNotify()}this.ClosePopupApplet();if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.OnActionAddRecord ")}}else{$.setReturnValue(aG)}})}ag.prototype.ClosePopupApplet=function(){var n;var aF=this.GetParentApplet();if(aF.GetBusComp()){n=[];n.push(aF.GetName());aF.NotifyDeletePopup(n)}A.PostActions(R.get("ACTION_RPC_CLOSE_POPUP"));this.SetRowSelectArr([])};ag.prototype.NotifyDeletePopup=function(n){this.GetBusComp().NotifyGeneric(E.get("SWE_RPC_PROP_CLOSE_POPUP"),n)};ag.prototype.SetDefaultShowMode=function(){};function V(aF){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.OnActionWriteRecord ")}var n=this.GetBusComp();if(n.IsDeletePending()){n.WriteRecord()}$.callback(this,function(){this.CanWriteRecord();$.callback(this,function(aH){var aG=aH.retVal;if(!aG){$.setReturnValue({err:false,retVal:false})}else{if(!n.IsCommitPending()){n.UpdateRecordX()}$.callback(this,function(aI){k.call(this,true);$.callback(this,function(aK){if(!aK.err){var aJ=false;if(this.GetParentApplet()){aJ=true}else{if((this.GetSavedModeState()!==this.GetMode())){aJ=true}}this.PostLayoutAction(aJ,R.get("GOTOVIEWCOLD"),R.get("VIEW_INFO"));this.SetSavedModeState();if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.OnActionWriteRecord ")}}else{$.setReturnValue({err:true,retVal:false})}})})}})})}function s(aH,aJ){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.OnActionsGetQuickPickInfo ")}var n={};var aF;var aI=this.GetBusComp();var aG=this;n.viewName=this.GetView().GetName();n.appletName=this.GetName();n.fieldName=this.GetActiveControl().GetInputName();if(aI){aF=aI.GetPickListInfo(aH,aJ);this.GetComboBoxOptions(aH,aJ);$.callback(this,function(aO){var aN=aO.retVal;var aL=[];n.LOV=aN;aL[0]="";aL[1]=n.viewName;aL[2]=n.appletName;aL[3]=n.fieldName;aL[4]="true";aL[5]=aF.NAME;var aM=0;for(var aK=6;aK<6+aN.length;aK++){aL[aK]=aN[aM];aM++}aI.NotifyGeneric("GetQuickPickInfo",aL);A.PostActions(R.get("ACTION_RPC_COMPLETED"),"GetQuickPickInfo");if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.OnActionsGetQuickPickInfo ")}})}}function P(aO){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.GetQuickInfoForPopup ")}var aM={};var aQ;var aL=this.GetBusComp();var aI=this;if(aL){var aR=aL.GetFieldList();var aK=aR.length;var aH=[];var aJ=this.GetControls();var aN=[];for(var aF=0;aF<aK;aF++){aH[aF]=SiebelApp.S_App.LookupStringCache(aR[aF]);if(aH[aF]&&aJ[aH[aF]]&&!aa.IsEmpty(aJ[aH[aF]].GetDisplayName())&&(aJ[aH[aF]].GetUIType()===E.get("SWE_CTRL_TEXT")||aJ[aH[aF]].GetUIType()===E.get("SWE_CTRL_COMBOBOX"))){aN.push(aJ[aH[aF]].GetDisplayName())}}var aP=[];aP[0]="";aP[1]=aI.GetView().GetName();aP[2]=aI.GetName();aP[3]=aO;aP[4]="true";aP[5]="";var aG=0;for(var n=6;n<6+aN.length;n++){aP[n]=aN[aG];aG++}aL.NotifyGeneric("GetQuickPickInfo",aP);A.PostActions(R.get("ACTION_RPC_COMPLETED"),"GetQuickPickInfo");if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.GetQuickInfoForPopup ")}}}ag.prototype.GetComboBoxOptions=function(n,aG){var aF=this.GetBusComp();aF.GetQuickPickInfo(n,aG);$.callback(this,function(aH){$.setReturnValue(aH)})};function k(aI){if(Z.GetTimer()){Z.GetTimer().StartTime("SiebelApp.S_App.Applet.PostChangesToBC")}var aG={};var aF;var aH=CCFMiscUtil_CreatePropSet();aH.SetProperty("inputParam1",aI);var n={};n[b]=this.GetName();n[aB]=ak;n[r]="PostChangesToBC";n[w]=this;n[v]=av;y.InvokeRegisteredSvc(n,aH);$.callback(this,function(aM){aG=aM.retVal;aF=aM.err;if((aG.Outputargs)&&(aG.Outputargs).GetProperty("Invoked")&&(aG.Outputargs).GetProperty("Invoked").toString()==="true"){ay.CcfLogEvent([F,45,4,23,n.ObjectName,n.ObjectType,n.ObjectMethod,n.ExtType]);$.setReturnValue({err:aM.err,retVal:aG.Outputargs});return}var aO;var aP=this.GetBusComp();var aK=null;var aR=d.GetActiveRequestObj();if(!aR){aR=d.GetActiveRequestObj()}if(!aR){aR=d.GetActiveRequestObj()}if(!aR){$.setReturnValue({err:true});return}if(aP&&!aP.IsInQueryState()){var aQ=-1;aQ=aP.GetActiveRow();if(aQ===-1){if(aI&&aP.IsDeletePending()){aP.WriteRecord();$.callback(this,function(aS){$.setReturnvalue(aS)});return}}}var aJ=aR.SweCommands[E.get("SWE_POST_ON_CHANGE_STR")];aO=aR.SweCommands.SWEBCVals;if(aO!==undefined&&aO!==null){var aN=CCFMiscUtil_CreatePropSet();aN.DecodeFromString(aO);var aL=SiebelApp.S_App.GetActiveView().GetBCBroker(aP);if(aP.IsInQueryState()){}else{aL.InvokeMethod("SetFieldValue",aN)}}$.callback(this,function(aZ){var aX=aR.SweCommands;var aS=[];for(var aW in aX){if(aX[aW]){var aT=this.GetControlById(aW);if(aT){aS.push(aW)}}}var aV=aS.length;var a0=0;var aU;var aY=function(){if(aS[a0]&&(aJ===this.GetControlById(aS[a0]).GetFieldName())){aK=aS[a0]}else{if(aS[a0]){aU=aX[aS[a0]];L.call(this,this.GetControlById(aS[a0]),aU);$.callback(this,function(a1){if(a1.err){$.setReturnValue(a1);return}else{a0++;if(a0<aV){aY.call(this)}}})}}};aY.call(this);$.callback(this,function(a1){if(a1.err){$.setReturnValue(a1);return}if(aK!==null){aU=aX[aK];L.call(this,this.GetControlById(aK),aU)}$.callback(this,function(a2){if(a2.err){$.setReturnValue(a2);return}if(aP&&!aP.IsInQueryState()){if(aI&&aP.IsCommitPending()){aP.WriteRecord()}}$.callback(this,function(a3){if(a3.err){$.setReturnValue(a3)}else{n[v]=aA;y.InvokeRegisteredSvc(n,aH);$.callback(this,function(a4){if(Z.GetTimer()){Z.GetTimer().EndTime("SiebelApp.S_App.Applet.prototype.PostChangesToBC")}aG=a4.retVal;if(aG&&aG.Outputargs){$.setReturnValue({err:a4.err,retVal:aG.Outputargs});return}})}})})})})})}function ai(aI){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.OnActionPostChanges ")}var aG=d.GetActiveRequestObj();var n=aG.SweCommands[E.get("SWE_POST_ON_CHANGE_STR")];var aF=aG.SweCommands[E.get("SWE_POST_FORCE_STR")];var aH=this.GetBusComp();if((n||aF==="Y")&&aH){if(!aH.IsCommitPending()){aH.UpdateRecordX()}$.callback(this,function(){k.call(this,false);$.callback(this,function(){A.PostActions(R.get("ACTION_RPC_COMPLETED"),"OnActionPostChanges");if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.OnActionPostChanges ")}})})}else{if(aH&&!aH.IsCommitPending()&&!aH.IsInQueryState()){SiebelApp.S_App.OfflineErrorObject.SetErrorMsg("IDS_SWE_NO_COMMIT_PENDING","","","","",4,71);$.setReturnValue({err:"IDS_SWE_NO_COMMIT_PENDING"});return}k.call(this,false);$.callback(this,function(){A.PostActions(R.get("ACTION_RPC_COMPLETED"),"OnActionPostChanges");if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.OnActionPostChanges ")}})}}function L(n,aG){var aF=this.GetBusComp();if(n){this.CanUpdateX(n.GetName());$.callback(this,function(aH){if(aH.retVal){if(aF&&aF.IsInQueryState()){aG=aF.DoBldQueryText(n,aG);if(aG===false){$.setReturnValue({err:true});return}aF.SetSearchSpec(aG)}else{if(aF&&!aF.IsExecuted()){$.setReturnValue({err:false,retVal:true});return}var aI;at.call(this,n,aG,false);$.callback(this,function(aJ){if(!aJ.err){aI=aJ.retVal;if(aa.IsEmpty(aI)){}else{aG=aI}}this.SetFieldValue(n,aG);
$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK);return}else{$.setReturnValue({err:false,retVal:true})}})})}}})}}function at(aM,aG,aK){var aN;var aI=this.GetBusComp();var aL=null;if(aI){aL=aI.GetField(aM.GetFieldName())}if(aa.IsEmpty(aL)){return $.setReturnValue({err:false,retVal:aG})}var aF=aL.GetDataType();var aJ=aM.GetDisplayFormat();var n=SiebelApp.S_App.LocaleObject.GetDatum(aF);if(n&&!aa.IsEmpty(aG)){switch(aF){case"number":var aH=aL.GetScale();SiebelApp.S_App.LocaleObject.SetScale(aH);break;case"currency":i.call(this,aM,n,aK,aF);break}$.callback(this,function(aO){if(!aO.err){SiebelApp.S_App.LocaleObject.FormattedToString(aF,aG,aJ);n.SetAsFormattedString(aG,aJ);aN=SiebelApp.S_App.LocaleObject.HasErrorMsg();if(!aN){}aG=n.GetAsString(aG);$.setReturnValue({err:false,retVal:aG})}else{$.setReturnValue({err:true,retVal:aG})}})}else{$.setReturnValue({err:false,retVal:aG})}}function ah(){var aH=d.GetActiveRequestObj();var aF=aH.SweCommands.SWEField;if(aa.IsEmpty(aF)){return}var aG=this.GetControls();var n;for(var aI in aG){if(aG.hasOwnProperty(aI)){if(aG[aI].GetInputName()===aF){n=aG[aI].GetFieldName();break}}}if(aa.IsEmpty(n)){return}var aJ=this.GetDrillDown(n,true);if(aa.IsEmpty(aJ)){return}return aC.call(this,aJ)}function aC(aH,n){var aF;if(aa.IsEmpty(aH)){return}aF=aH.Dynamicdrilldown.length;if(aF){return}var aG=aE.call(this,aH);if(!aG){}return true}function aE(n){var aH=n.viewname;if(aH==="Drill Down To Same View"){if(!SiebelApp.S_App.GetActiveView()||SiebelApp.S_App.GetActiveView().GetName()!==aH){}}var aF=aa.IsEmpty(n.srcFieldName);var aG=aF?"BS_DRILLDOWN":"BS_DRILLDOWNBYFIELD";SiebelApp.OfflineAppMgr.BuildViewAsync(aH,aG,n);return true}ag.prototype.SetFieldValue=function(n,aG,aF){var aI;var aH=this.GetBusComp();if(!aH){$.setReturnValue({err:false});return}this.GetBusComp().FieldValue(n.GetFieldName());$.callback(this,function(aJ){if(!aJ.err){aI=aJ.retVal;if(aI===aG){$.setReturnValue({err:false});return}this.GetBusComp().SetFieldValueX(n.GetFieldName(),aG);$.callback(this,function(aK){if(aK.err){$.setReturnValue(aK);return}if(!this.GetSavedModeState()){if(!this.commitPending){this.GetBusComp().NotifyStateChanged("cp",1)}}})}})};ag.prototype.GetControlById=function(n){var aF=this.GetControls();for(var aG in aF){if(aF[aG].GetInputName()===n){return aF[aG]}}return null};function i(aK,aL,aJ,n){var aF;var aI=this.GetNotIdComp();aL.SetAsString(null);var aG;var aH=this.GetBusComp();if(aa.IsEmpty(aH)){$.setReturnValue(aG);return}var aM=aK.GetFieldName();if(aa.IsEmpty(aM)){$.setReturnValue(aG);return}if(aJ){aF=aH.WSFieldValue(aI,aM,this.GetName())}else{aH.FieldValue(aM)}$.callback(this,function(aS){if(!aS.err){aF=aS.retVal;if(!aa.IsEmpty(aF)){}aL.SetAsString(aF);if(n==="currency"){var aQ=Z.LookupStringCache(aK.GetCurrField());var aO=aQ.indexOf("|");var aT;var aP;if(aO>=0){var aN=(aQ.substring(aO+1).indexOf("|")===-1)?-1:(aQ.substring(aO+1).indexOf("|")+aO);if(aN<0){aN=aQ.length}var aR=aQ.substr(0,aO);if(aR.length!==0){if(aJ){aT=aH.WSFieldValue(aI,aR,this.GetName())}else{aH.FieldValue(aR)}$.callback(this,function(aU){if(!aU.err){aT=aU.retVal;if(!aa.IsEmpty(aT)){}if(aT){aL.SetCurrency(aT)}else{aL.SetCurrency("")}aR=aQ.substr(aO+1,aN-aO);if(aR.length!==0){if(aJ){aP=aH.WSFieldValue(aI,aR,this.GetName())}else{aH.FieldValue(aR)}$.callback(this,function(aV){if(!aV.err){aP=aV.retVal;if(!aa.IsEmpty(aP)){}else{aL.SetExchangeDate(aP)}}else{$.setReturnValue(aV)}})}}else{$.setReturnValue(aU)}})}}}}else{$.setReturnValue(aS)}})}ag.prototype.CheckActiveRowId=function(n,aF){if(n&&n.match(aF)){return true}else{return false}};ag.prototype.PrepareToInvokeMethod=function(n,aG){ay.CcfLogEvent([F,44,4,20,"methodName",n]);if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.PrepareToInvokeMethod ")}this.PositionBaseAncestorFrame();var aF=function(){this.GoBackToRecord(aG);$.callback(this,function(){this.CanPostChangesToBC(n);$.callback(this,function(aH){if(aH.retVal){k.call(this,false)}$.callback(this,function(){this.CanInvokeMethodX(n);if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.PrepareToInvokeMethod ")}})})})};if((n===R.get("POSITION_ON_ROW"))&&this.hasOwnProperty("GetPopupAppletName")&&(this.GetPModel().GetRenderer().GetPopupType()===R.get("ASSOC"))){this.GetBusComp().SelectRow()}$.callback(this,aF)};ag.prototype.GetDefn=function(){return SiebelApp.Metadata.GetAppletDef(this.GetName())};ag.prototype.EnumUserProps=function(){var aG=this.GetDefn();var aF=null;if(aG.userPropMap){aF=[];var n=aG.userPropMap;for(var aH in n){if(n[aH]){aF.push(aH)}}return aF}else{return null}};ag.prototype.GetUserProperty=function(n){if(this.GetDefn().userPropMap){return this.GetDefn().userPropMap[n]}else{return""}};ag.prototype.GetDrillDown=function(aF,aH){var aI=aa.IsEmpty(aH)?false:aH;if(!aI){if(this.GetDefn().drilldown){return this.GetDefn().drilldown[aF]}else{return""}}else{var n=this.GetDefn().drilldown;for(var aG in n){if(n.hasOwnProperty(aG)){var aJ=n[aG].hyperLinkField;aJ=ay.RemoveNonAlphaChars(aJ);aF=ay.RemoveNonAlphaChars(aF);if(aJ===aF){return this.GetDefn().drilldown[aG]}}}return""}};function ax(){var n=this.GetDefn().ddCtrlsArray;return aa.IsEmpty(n)?[]:n}function ae(){var n=this.GetBusComp();if(!n){return}var aO=n.GetActiveRow();var aN;if(aO>=0){var aL;var aG=false;var aK=0;n.SetPrevActiveRow(aO);if(n.GetMultiSelectMode()){var aF=n.GetWS();aN=[];n.IsCurWSRecSelected(this.GetName());$.callback(this,function(aT){if(!aT.err){var aR=[];aL=aT.retVal;aN=this.GetRowSelectArr();aN[aO]=aL;aG=true;n.SetPrevActiveRow(aO);if(n.GetMultiSelectMode()&&this.GetMultiSelect()){aN[0]=true;this.SetMultiSelect(false)}aR.push(this.GetName());for(var aS=0;aS<aF.length;aS++){aR.push(aN[aS]?"1":"0")}if(!n.GetMultiSelectMode()){this.SetRowSelectArr([])}else{this.SetRowSelectArr(aN)}if(aG){n.NotifyGeneric("SWEIRowSelection",aR)}}$.setReturnValue({err:false,retVal:true})})}else{var aP=this.GetNotIdComp();aP=0;var aH=n.WSGetCurrRow(aP,this.GetName());if(!aH.err){var aJ=aH.retVal;n.WSHomeX(aP,this.GetName());aN=this.GetRowSelectArr();var aQ=this.GetRowSelectArr().length===0?true:false;var aI=true;var aM=function(){n.IsCurWSRecSelected(aP);$.callback(this,function(aS){aL=aS.retVal;if(aK<aN.length){if(aL!==aN[aK]){aN[aK]=aL;aG=true}}else{aN.push(aL);aG=true}aK++;var aR=this.WSNextRecordX(aP);if(!aR.err&&aR.retVal){aM.call(this)}else{if(aO===0&&aQ&&aN[0]===true){aG=false}}})};if(aI){aM.call(this)}$.callback(this,function(){n.WSSetCurrRow(aJ);if(window.localStorage.getItem("contextArray")){var aS=JSON.parse(window.localStorage.getItem("contextArray"));var aR=aS.length;for(var aU=0;aU<aR;aU++){var aV=aS[aU].bc;if(n.GetName()===aV){if(n.GetWS()[aO]){aS[aU].Id=n.GetWS()[aO].Id;aS[aU].cursor=n.GetCursor();window.localStorage.setItem("contextArray",JSON.stringify(aS));break}}}}if(aG){var aT=[];aT.push(this.GetName());for(var aU=0;aU<aN.length;aU++){aT.push(aN[aU]?"1":"0")}n.NotifyGeneric("SWEIRowSelection",aT)}this.SetRowSelectArr(aN);$.setReturnValue({err:false,retVal:true})})}}}else{$.setReturnValue({err:false,retVal:true})}}ag.prototype.SetFldSearchSpec=function(aG,n){var aH=aG.GetName();
var aF=this.GetBusComp();if(aF.ValidateFieldDef(aH)){aF.SetFldSearchSpec(aH,n)}};function p(aF){if(Z.GetTimer()){Z.GetTimer().StartTime("Applet.OnActionsDeleteItem ")}var n=this.GetBusComp();n.CanDelete();$.callback(this,function(aG){if(!n||!aG.retVal){SiebelJS.Log("OnActionsDeleteItem: Failed to Delete Item .... ");$.setReturnValue({err:aG.err,retVal:false});return}n.SetDeleteRecordPending(true);n.DeleteRecordX(aF,true);$.callback(this,function(){this.PostLayoutAction(true,aF.methodName);if(Z.GetTimer()){Z.GetTimer().EndTime("Applet.OnActionsDeleteItem ")}});$.setReturnValue({err:aG.err,retVal:true});return})}ag.prototype.PostLayoutAction=function(aH,aG,aK){if(aH){var aJ=SiebelApp.S_App.GetActiveView();var aF=aJ.GetAppletMap();var n;for(var aI in aF){if(aF[aI]){n=aF[aI];if(n.GetBusComp()!==this.GetBusComp()||n===this){continue}if((n.GetSavedModeState()===n.GetMode())){aH=false;n.SetSavedModeState();break}}}}if(aH){SiebelApp.OfflineAppMgr.PostActions(R.get("ACTION_RPC_COMPLETED"))}else{SiebelApp.OfflineAppMgr.PostActions(R.get("ACTION_RPC_REFRESH_VIEW"),aG,aK)}}}());if(typeof(SiebelApp.S_App.OfflineAppletInterface)==="undefined"){SiebelApp.S_App.OfflineAppletInterface=(function(){function a(c){var b=c;var e=this;var f={GetParentApplet:1};for(var d in b){if(b[d]){(function(){var g=d;var h=c;if(typeof(c[g])==="function"&&!e[g]&&!f[g]){e[g]=function(){if(h.constructor.prototype[g]){return(h.constructor.prototype[g].apply(h,arguments))}else{return(h[g].apply(h,arguments))}}}return e[g]}())}}this.GetOfflineApplet=function(){return b};this.GetParentApplet=function(){var g=b.GetParentApplet();if(g){return g.GetInterface()}};this.EndLife=function(){b=null;e=null;f=null}}a.prototype.GetBusComp=function(){var b=SiebelApp.S_App.Model.GetIsInterFace();var d=this.GetOfflineApplet();var c=d.GetBusComp.call(d);if(b>0&&c){return c.GetInterface()}else{return(d.GetBusComp.call(d))}};a.prototype.InvokeMethod=function(b,c){return this.GetOfflineApplet().InvokeMethodX(b,c)};a.prototype.CanInvokeMethod=function(b){return this.GetOfflineApplet().CanInvokeMethodX(b)};a.prototype.CanUpdate=function(){return this.GetOfflineApplet().CanUpdateX()};a.prototype.CanNavigate=function(){return this.GetOfflineApplet().CanNavigateX()};a.prototype.BusComp=function(){return this.GetOfflineApplet().GetBusComp()};a.prototype.BusObj=function(){return this.GetOfflineApplet().GetBusComp().GetBusObj()};a.prototype.Name=function(){return this.GetOfflineApplet().GetName()};return a}())}if(typeof(SiebelApp.S_App.ListApplet)){(function(){var e={};var c=SiebelApp.S_App.ListApplet;var a=SiebelApp.Offlineconstants;var f=a.get("IS_DYNAMIC");e.SetOnLoadRowSelection=c.prototype.SetOnLoadRowSelection;e.LeaveField=c.prototype.LeaveField;var b=SiebelJS.Dependency("SiebelApp.Utils");var d=SiebelJS.Dependency("SiebelApp.Constants");c.prototype.SetOnLoadRowSelection=function(g){if(!(g.GetProperty(f))){return}else{return(e.SetOnLoadRowSelection.call(this,g))}};c.prototype.LeaveField=function(m,q,n){if(!SiebelApp.OfflineAppSettings.GetMode()){return(e.LeaveField.call(this,m,q,n))}else{var p;var o=this.GetBusComp();var i=m.GetFieldName();if(!m&&!this.GetActiveControl()){return true}var h=this.GetFormattedValue(m);if(h!==q){SiebelApp.S_App.OfflineCallMethod("PassOldValue",this,m,q,h);var l=q;if(this.IsInQueryMode()&&!b.IsEmpty(i)){p=m.GetUIType();if(p===d.get("SWE_CTRL_DATE_TZ_PICK")||p===d.get("SWE_CTRL_DATE_TIME_PICK")){if(q&&!q.match(/[><=!&|]/g)){l=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(q,d.get("ISO8601_DATETIME_FORMAT"),m.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat()+" "+SiebelApp.S_App.LocaleObject.GetTimeFormat());if(!b.IsEmpty(l)&&l.charAt(0)!=='"'&&l.charAt(l.length-1)!=='"'){l='"'+l+'"'}if(b.IsEmpty(l)&&!b.IsEmpty(q)){if(q.charAt(0)!=='"'&&q.charAt(q.length-1)!=='"'){l='"'+q+'"'}else{l=q}}}}else{if(p===d.get("SWE_CTRL_DATE_PICK")){if(q&&!q.match(/[><=!&|]/g)){l=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(q,d.get("ISO_DATE_FORMAT"),m.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat());if(b.IsEmpty(l)&&!b.IsEmpty(q)){if(q.charAt(0)!=='"'&&q.charAt(q.length-1)!=='"'){l='"'+q+'"'}else{l=q}}}}}if(!b.IsEmpty(i)){o.GetFieldMap()[i].SetSearchSpec(l)}var j=o.GetNotifyObject();j.NotifyNewFieldQuerySpec(i)}else{if(this.CanUpdate(m.GetName())&&this.IsPrivateField(m.GetName())||o.GetSelection()>=0){if(SiebelApp.S_App.LocaleObject){p=m.GetUIType();if(p===d.get("SWE_CTRL_DATE_TZ_PICK")||p===d.get("SWE_CTRL_DATE_TIME_PICK")){l=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(q,d.get("ISO8601_DATETIME_FORMAT"),m.GetDisplayFormat()||(SiebelApp.S_App.LocaleObject.GetDateFormat()+" "+SiebelApp.S_App.LocaleObject.GetTimeFormat()))}else{if(p===d.get("SWE_CTRL_DATE_PICK")){l=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(q,d.get("ISO_DATE_FORMAT"),m.GetDisplayFormat()||SiebelApp.S_App.LocaleObject.GetDateFormat())}}if(""===l&&""!==q){l=q}}var g=this.SetFormattedValue(m,l);if(g!==undefined){if(!g){this.SetPrsrvControl(this.GetActiveControl());o.ProcessError();return false}}}}}var r=this.GetActiveControl();var k=false;if(!n){if(this.GetActiveControl()){this.SetPrsrvControl(this.GetActiveControl());this.SetActiveControl(null);k=true}}$.callback(this,function(t){var s=this.GetErrStatus();if(s&&g===undefined){if(!n&&k){this.SetActiveControl(r)}this.SetPrsrvControl(this.GetActiveControl());o.ProcessError();this.SetErrStatus(false)}});return true}}}())}})};