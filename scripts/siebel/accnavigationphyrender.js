/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelAppFacade.AccNavigationPhyRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.AccNavigationPhyRenderer");define("siebel/accnavigationphyrender",[],function(){SiebelAppFacade.AccNavigationPhyRenderer=(function(){var l=SiebelJS.Dependency("SiebelApp.Constants");var n=l.get("SWE_SCREEN_NAV_CONTROL_STR");var k=l.get("SWE_AGGR_VIEW_NAV_CONTROL_STR");var q=l.get("SWE_DET_VIEW_NAV_CONTROL_STR");var e=l.get("SWE_DET_SUB_VIEW_NAV_CONTROL_STR");function g(v){var u=v;this.GetPM=function(){return u};this.Init()}g.prototype.Init=function(){if(this.GetPM().Get("GetType")===l.get("SWE_PROP_NC_ID_SCREEN_CONTROL")){this.GetPM().AttachPMBinding("Refresh",this.BindData,{scope:this})}this.GetPM().AttachPMBinding("FocusFirstTabElement",a,{scope:this})};g.prototype.ShowUI=function(){var w=this.GetPM(),y=w.Get("placeholder"),x=$("div#"+y),v=(w.Get("GetType")===l.get("SWE_PROP_NC_ID_SCREEN_CONTROL"))?"siebui-view-navs":"siebui-subview-navs";if(!x.hasClass(v)){x.addClass(v)}if(y===l.get("SWE_PROP_NC_ID_VIEW_CONTROL")){var u=w.Get("SubPlaceholder");if(($("div#"+u)).length!==0){y=u;x=$("div#"+y);if(!x.hasClass("siebui-subview-screennavs")){x.addClass("siebui-subview-screennavs")}}}w.SetProperty("LevelPlaceholder",y)};g.prototype.BindEvents=function(){var u=this.GetPM();var w=u.Get("placeholder");var v=u.Get("LevelPlaceholder");$("#"+w+", #"+v).undelegate(".AccNavBar");$("#"+w).delegate("#"+w+"_tabScreen a","click.AccNavBar",{ctx:this},c);$("#"+v).delegate("#"+v+"_tabView a","click.AccNavBar",{ctx:this},d);$($.unique($("#"+w+", #"+v).get())).delegate("select.siebui-nav-links","click.AccNavBar keypress.AccNavBar blur.AccNavBar",{ctx:this},p).delegate("select.siebui-nav-links","focus.AccNavBar",function(){$(this)[0].selectedIndex=-1});$(window).unbind("resize.NavBar").bind("resize.NavBar",{ctx:this},function(x){x.data.ctx.BindData(true)})};function c(y){var x=$(this);var A=x.attr("data-tabindex");var w=y.data.ctx.GetPM();var v=w.Get("GetTabInfo");if(v[A]){var u="viewName";if(w.Get("GetType")===l.get("SWE_PROP_NC_ID_SCREEN_CONTROL")){u="defaultViewName";v[A]["level"]=n}else{v[A]["level"]=q}var z=v[A][u];if(z){if(!w.OnControlEvent("OnClick",v[A])){$("#"+w.Get("placeholder")+"_tabScreen").tabs("active",Number(w.Get("GetSelectedTabKey").replace("tabScreen",""))||0)}}}}function d(y){var x=$(this);var A=x.attr("data-tabindex");var w=y.data.ctx.GetPM();var v=w.Get("GetSelectedTabLinkInfo");if(w.Get("GetType")===l.get("SWE_PROP_NC_ID_SCREEN_CONTROL")){v[A]["level"]=k}else{v[A]["level"]=e}if(v[A]){var u="viewName";var z=v[A][u];if(z){if(!w.OnControlEvent("OnClick",v[A])){$("#"+w.Get("LevelPlaceholder")+"_tabView").tabs("active",Number(w.Get("GetSelectedLinkKey").replace("tabView",""))||0)}}}}function p(u){if(u.type==="keypress"&&u.which!==$.ui.keyCode.ENTER){}else{var w=u.data.ctx.GetPM();var C=w.Get("placeholder");var v=$(this).attr("id");var x=$(this).val();var y={};var A=w.Get("GetType");if(x){if(v==="j_"+C+"_tabScreen"){y=w.Get("GetTabInfo");if(A===l.get("SWE_PROP_NC_ID_SCREEN_CONTROL")){y[x]["level"]=n}else{y[x]["level"]=q}}else{if(v==="j_"+w.Get("LevelPlaceholder")+"_tabView"){y=w.Get("GetSelectedTabLinkInfo");if(A===l.get("SWE_PROP_NC_ID_SCREEN_CONTROL")){y[x]["level"]=k}else{y[x]["level"]=e}}else{return}}var z=y[x]||{};var B=z.defaultViewName||z.viewName;if(B){w.OnControlEvent("OnClick",y[x])}}}}g.prototype.BindData=function(y){var u=this.GetPM();var w=u.Get("LevelPlaceholder");if(this.GetPM().Get("GetDataReload")===true||y){var x=u.Get("placeholder"),v=$("div#"+x);if(v.length===0){return}m.call(this,x,"tabScreen",u.Get("GetTabInfo"),u.Get("GetSelectedTabKey"));m.call(this,u.Get("LevelPlaceholder"),"tabView",u.Get("GetSelectedTabLinkInfo"),u.Get("GetSelectedLinkKey"));i.call(this);t.call(this)}};function m(B,z,x,w){var A=false;var v=B+"_"+z;var y=r.call(this,B,z,x,w);var u=$("#"+B).children("#"+v);u.remove();u=null;if(y){$("#"+B).append("<div class='siebui-nav-tabs siebui-nav-"+z+"' id="+v+">"+y+"</div>");$("#"+v).find("ol,ul").eq(0).bind("keydown",{ctx:this},j);$("#"+v).tabs({active:(w===undefined)?false:Number((w||"").replace(z,"")),collapsible:true,create:f,beforeActivate:function(C,D){return false}});h.call(this,v,z,x,w);y=null;A=true}else{if(z=="tabView"){$("#"+B).append("<div class='siebui-nav-tabs siebui-empty-tabs siebui-nav-"+z+"' id="+v+"></div>")}}return A}function j(u){if($(u.target).is("li")&&u.which===$.ui.keyCode.ENTER){$(document.activeElement.firstChild).trigger("click")}}function f(v,u){$(u.panel).hide()}function r(B,z,y,v){var u="",x=B+"_"+z+"_noop",w=SiebelApp.S_App.GetDirection();for(var A in y){if(y.hasOwnProperty(A)){u+="<li ";if(v===A){u+=w?" class='siebui-active-navtab siebui-rtl-element-right' ":" class='siebui-active-navtab' ";u+="><a data-tabindex='"+A+"' aria-label='"+String(y[A].captionName)+" "+SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CKEDITOR_SELECTED")+"' href='#"+x+"' >"}else{if(w){u+=" class='siebui-rtl-element-right' "}u+="><a data-tabindex='"+A+"' href='#"+x+"' >"}if(y[A].tabIcon){u+="<img src='"+y[A].tabIcon+"'/>"}u+=String(y[A].captionName)+"</a></li>"}}if(u!==""){u="<ul>"+u+"</ul>";u+='<div class="siebui-invisible-el siebui-nav-'+z+'"  id="'+x+'" ></div>'}return u}function h(w,A,F,C){var K=this.GetPM();var z=$("#"+w);var v=Number((C||"").replace(A,""))||0;var B=Number(z.outerWidth());var E=25;var x=z.children("ul").children("li");E+=x.eq(v).outerWidth()+10;var L=0;for(var G=0,I=x.length;G<I;G++){if(G!==v){E+=x.eq(G).outerWidth()+10;if(E>B){L=(G-1);break}}}if(L!==0&&L<x.length){var J=SiebelApp.S_App.LocaleObject;var H="";if(K.Get("GetType")===l.get("SWE_PROP_NC_ID_SCREEN_CONTROL")){H=(A==="tabScreen")?J.GetLocalString("IDS_SWE_FIRST_LEVEL_VIEW_BAR_TITLE"):J.GetLocalString("IDS_SWE_SECOND_LEVEL_VIEW_BAR_TITLE")}else{H=(A==="tabScreen")?J.GetLocalString("IDS_SWE_THIRD_LEVEL_VIEW_BAR_TITLE"):J.GetLocalString("IDS_SWE_FOURTH_LEVEL_VIEW_BAR_TITLE")}var u="<span></span><li><select class='siebui-nav-links "+(K.Get("IsScreen")?"siebui-nav-screenlist":"siebui-nav-viewlist")+"'  id='j_"+w+"' role='combo' aria-atomic='true' aria-label='"+H+"' >";var D=0;var y=L+1;var M;while(F[A+y]){if(y!==v){u+="<option value='"+(A+y)+"'>"+F[A+y].captionName+"</option>";M=z.children("ul").children("li").eq(y-D);M.remove();M=null;D++}y++}u+="</select></li>";z.tabs("refresh");z.children("ul").append(u);z.children("ul").children("li").last().eq(0).addClass(SiebelApp.S_App.GetDirection()?"siebui-rtl-element-right":"");o.call(this,"select#j_"+w)}}function o(v){if(!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())){var u=$(v).outerWidth();$(v).wrap("<span style='width:"+u+"px; overflow:hidden; float:right;'/>").width("auto").css({position:"relative",left:"-"+($(v).outerWidth()-u)+"px"})}}function i(){var x=this.GetPM();var A=x.Get("placeholder");var z=A+"_tabScreen";var w=x.Get("LevelPlaceholder")+"_tabView";var y=$("#"+z);var v=$("#"+w);var u=SiebelApp.S_App.LocaleObject;if(x.Get("GetType")===l.get("SWE_PROP_NC_ID_SCREEN_CONTROL")){y.attr({role:"navigation",title:u.GetLocalString("IDS_SWE_FIRST_LEVEL_VIEW_BAR_TITLE")}).children("ul").eq(0).attr("aria-live","off");
v.attr({role:"navigation",title:u.GetLocalString("IDS_SWE_SECOND_LEVEL_VIEW_BAR_TITLE")}).children("ul").eq(0).attr("aria-live","off")}else{y.attr({role:"navigation",title:u.GetLocalString("IDS_SWE_THIRD_LEVEL_VIEW_BAR_TITLE")}).children("ul").eq(0).attr("aria-live","off");v.attr({role:"navigation",title:u.GetLocalString("IDS_SWE_FOURTH_LEVEL_VIEW_BAR_TITLE")}).children("ul").eq(0).attr("aria-live","off")}}function b(G,C,F,u){var x=l.get("SWE_PROP_QTP_OT");var E=l.get("SWE_PROP_QTP_RN");var D=l.get("SWE_PROP_QTP_UN");if(F&&(typeof(F.GetProperty)==="function")){G.children("ul").attr("ot",F.GetProperty(x)).attr("rn",F.GetProperty(E)).attr("un",F.GetProperty(D))}if(!u){return}var v=G.children("ul").children("li");var w=v.children("select").length;var H=w?v.length-1:v.length;for(var B=0;B<H-1;B++){if(u[B]&&(typeof(u[B].GetProperty)==="function")){v.eq(B).attr("ot",u[B].GetProperty(x)).attr("rn",u[B].GetProperty(E)).attr("un",u[B].GetProperty(D))}}var z=B;var y=(C==="tabScreen")?this.GetPM().Get("GetSelectedTabKey"):this.GetPM().Get("GetSelectedLinkKey");if(y){var A=parseInt(y.substring(C.length));if(A){z=(A<B)?B:A}}if(u[z]&&(typeof(u[z].GetProperty)==="function")){v.eq(B).attr("ot",u[z].GetProperty(x)).attr("rn",u[z].GetProperty(E)).attr("un",u[z].GetProperty(D))}}function s(D,C,u,z){var w=l.get("SWE_PROP_QTP_OT");var B=l.get("SWE_PROP_QTP_RN");var A=l.get("SWE_PROP_QTP_UN");if(C&&(typeof(C.GetProperty)==="function")){D.attr("ot",C.GetProperty(w)).attr("rn",C.GetProperty(B)).attr("un",C.GetProperty(A))}var v=D.children("option");for(var y=0;y<v.length;y++){var x=Number((v.eq(y).val()||"").replace(z,""));if(x&&u[x]&&(typeof(u[x].GetProperty)==="function")){v.eq(y).attr("ot",u[x].GetProperty(w)).attr("rn",u[x].GetProperty(B)).attr("un",u[x].GetProperty(A))}}}function t(){var y=this.GetPM();var x=y.Get("GetTabContainerQTPInfo");var z=y.Get("GetTabItemsQTPInfo");var v=y.Get("GetTabViewLinkContainerQTPInfo");var w=y.Get("GetTabViewLinkItemsQTPInfo");var A=y.Get("placeholder")+"_tabScreen";var u=y.Get("LevelPlaceholder")+"_tabView";b.call(this,$("#"+A),"tabScreen",x,z);b.call(this,$("#"+u),"tabView",v,w);s.call(this,$("#j_"+A),y.Get("GetJumpTabQTPInfo"),z,"tabScreen");s.call(this,$("#j_"+u),y.Get("GetJumpTabQTPInfo"),w,"tabView")}function a(w){var v=l.get("SWE_PROP_NC_ID_SCREEN_CONTROL");var u=l.get("SWE_PROP_NC_ID_VIEW_CONTROL");switch(w){case n:$("#"+v+" div ul  li ").tabs().eq(0).focus();break;case q:$("#"+u+" div ul  li ").tabs().eq(0).focus();break}}return g}());return"SiebelAppFacade.AccNavigationPhyRenderer"})};