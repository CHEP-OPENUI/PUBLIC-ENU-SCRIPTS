/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelAppFacade.JQMScrollContainer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.JQMScrollContainer");define("siebel/jqmscrollcontainer",["order!3rdParty/jqmobile/mobiscroll.custom-2.5.0.min","order!3rdParty/jqmobile/jquery.swipeButton.min","order!3rdParty/jqmobile/jquery.easing.1.3","order!3rdParty/jqmobile/jquery.mobile.scrollview","order!3rdParty/jquery.mobile.scrollview-ext","order!siebel/jqmsearchctrl","order!siebel/jqmformrenderer"],function(){SiebelAppFacade.JQMScrollContainer=(function(){var a=SiebelJS.Dependency("SiebelApp.Constants");var b="jqm_findquery_popup";var e="jqm_pdquery_popup";function d(g){SiebelAppFacade.JQMScrollContainer.superclass.constructor.call(this,g);var i;var f;var k;var l;var j;var h;this.GetParContforheight=function(){return h};this.SetParContforheight=function(m){h=m};this.SetList=function(m){f=m};this.GetList=function(){return f};this.SetScrollcontainer=function(m){i=m};this.GetScrollcontainer=function(){return i};this.SetIsXdirection=function(m){k=m};this.GetIsXdirection=function(m){return k};this.SetIsYdirection=function(m){l=m};this.GetIsYdirection=function(){return l};this.adjustPopup=undefined}SiebelJS.Extend(d,SiebelAppFacade.JQMFormRenderer);d.prototype.Init=function(){SiebelAppFacade.JQMScrollContainer.superclass.Init.call(this);this.AttachPMBinding("ResetScrollpos",this.ResetScrollposition)};d.prototype.EndLife=function(){$(window).unbind("resize.JQMScrollContainer");SiebelApp.EventManager.removeListner("postload",this.OnPostload,this);SiebelAppFacade.JQMScrollContainer.superclass.EndLife.call(this)};d.prototype.ShowUI=function(){SiebelAppFacade.JQMScrollContainer.superclass.ShowUI.call(this);var f=this.GetPM();if(this.IsPopup()){var g=this.GetPM().Get("GetPlaceholder");$("#"+g).addClass("ui-popup-dimension")}f.ExecuteMethod("SetScrollDir",null);f.ExecuteMethod("SetScrollAmount",0)};function c(k,i){var f=i.data.ctx.GetWidget();var h;var j=-f._maxY;var g=-f._sy;if(i.data.ctx.GetIsYdirection()){if(g>j){h=i.data.ctx.OnPaginationYdir("Scroll Dn")}else{if(g<-2){h=i.data.ctx.OnPaginationYdir("Scroll Up")}}}}d.prototype.EnableListScrolling=function(j,i,g,h){if(this.GetScrollcontainer()){return false}var f="scrollviewcontainer_"+j;$("#"+j).html("<div id='"+f+"'></div>");this.MakecontainerScrollable(f,i,g,h);return true};d.prototype.MakecontainerScrollable=function(g,i,f,h){if(!g){if(this.GetScrollcontainer()){g=this.GetScrollcontainer()}else{return false}}this.SetList(i);if(f&h){this.SetIsYdirection(true);this.SetIsXdirection(true);$("#"+g).attr({"data-scroll":"xy"})}else{if(f){this.SetIsXdirection(true);$("#"+g).attr({"data-scroll":"x"})}else{if(h){this.SetIsYdirection(true);$("#"+g).attr({"data-scroll":"y"})}}}$("#"+g).addClass("scrollviewcontainer");this.SetScrollcontainer(g);this.CreateScrollWidget(f,h);this.BindScrollEvents();return true};d.prototype.ResetScrollposition=function(){if(this.GetPM().Get("IsPopup")){var f=this.GetScrollcontainer();$("#"+f).css("height","auto");this.adjustPopup=1}var g=$("#"+b);if(g.length>0){this.CloseCancelQueryPopup();if(this.cancelqrytimeout!==null){clearTimeout(this.cancelqrytimeout);this.cancelqrytimeout=null}}var h=$("#"+e);if(h.length>0){h.popup("close")}$.mobile.scrollview.prototype.scrollTo.call(this.GetWidget(),0,0,0)};d.prototype.CreateScrollWidget=function(g,h){var f=this.GetScrollcontainer();var i=$("#"+f).closest(".ListAppletContainer");var j=i.attr("id");if(j){this.SetParContforheight(j)}if(!this.GetList()&&f){if(g&h){$("#"+f).scrollview()}else{if(g){$("#"+f).scrollview({direction:"x"})}else{if(h){$("#"+f).scrollview({direction:"y"})}else{return false}}}}else{if(f){$("#"+f).scrolllistview()}}};d.prototype.BindScrollEvents=function(){var g=this.GetPM();var h=g.Get("GetName");var f=this.GetScrollcontainer();if(f){$("#"+f).bind("touchend",{ctx:this},function(i){$(".menuitem").remove();c(this,i)});$("#"+f).bind("mouseup",{ctx:this},function(i){$(".menuitem").remove();c(this,i)});if(!this.IsPopup()){SiebelApp.EventManager.addListner("postload",this.OnPostload,this);$("#"+f).bind("orientationchange",{ctx:this},function(i){i.data.ctx.fixHeight(i.data.ctx)});$(window).bind("resize.JQMScrollContainer",{ctx:this},function(i){i.data.ctx.fixHeight(i.data.ctx)})}}h=null;f=null};d.prototype.OnPostload=function(){this.fixHeight()};d.prototype.GetWidget=function(){var f=this.GetScrollcontainer();if(this.GetList()){return($("#"+f).data("mobileScrolllistview"))}else{return($("#"+f).data("mobileScrollview"))}};d.prototype.fixHeight=function(){var f=300;if(this.IsPopup()){f=this.calcPopHeight();this.setHeight(f)}else{if(this.IsContVisible()){f=this.calcHeight();this.setHeight(f)}}};d.prototype.fixWidth=function(g){SiebelAppFacade.JQMScrollContainer.superclass.fixWidth.call(this,g);if(this.IsPopup()){var f=$(".AppletStylePopup").width();$(".AppletStylePopup").attr("style","max-width:"+g+" !important; width: "+f+"px !important")}};d.prototype.IsContVisible=function(){var h=this.GetPM();var f=this.GetScrollcontainer();var k=$("#s_"+h.Get("GetFullId")+"_div");var j=(!($("#"+f).is(":visible")))||($("#"+f).is(":hidden"));var g=(!(k.is(":visible")))||(k.is(":hidden"));var i=k.offset();var l=$("#"+f).offset();if(!j&&!g&&i&&l){return true}else{return false}};d.prototype.calcHeight=function(){var i=this.GetPM();var j=$("#_sweview").offset();var o=$(window).height();var l=$("#s_"+i.Get("GetFullId")+"_div");var p=this.GetScrollcontainer();var k=this.GetParContforheight();var n=null;var h=null;var m=$("#"+k).offset();if(k&&m){n=$("#"+k).height();h=$("#"+p).offset().top-m.top}var g=$("#"+p).offset().top-l.offset().top;var f;if(n!==null){n=n-h;f=n}else{if(o*(0.3)>j.top){f=o-j.top-g}else{f=o-g}}return f};d.prototype.calcPopHeight=function(){var k=parseInt($("#popup-popup").css("height"),10);var l=parseInt($(".popupContainer").css("height"),10);var j=parseInt($(".jqmpopup_title").css("height"),10);var h=this.GetScrollcontainer();var g=parseInt($("#"+h).css("height"),10);var f=l-g;var i=k-f-2*j;return i};d.prototype.ReSizePopup=function(){this.adjustPopup=undefined;var g=parseInt($(window).height(),10);var i=parseInt($("#popup-popup").css("height"),10);var f=parseInt((g-i)/2,10);$("#popup-popup").css("top",f);this.fixHeight()};d.prototype.setHeight=function(g){var f=this.GetScrollcontainer();var j;$("#"+f).css("height",g+"px");var k=this.GetWidget();if(!k){return}var h=-k._sy;var m=-k._maxY;j=this.GetListHeight();if(m){var i=j-g;var l=(h*i)/m;if(l>i){l=i}k._maxY=-i;$.mobile.scrollview.prototype.scrollTo.call(k,0,-l,0)}};d.prototype.SetNewscrollpos=function(g,n){if(g===null||n===0){return}if(n<0){n=-n}var h=this.GetPM();var j=-1;var m;var l=this.GetWidget();if(l._maxY===undefined){return}var o=-l._maxY;var p=$("#"+this.GetScrollcontainer()).height();var i=p+o;var f=h.Get("GetRecordSet").length;var k=-l._sy;if(!g){j=this.GetOffset(0,n);m=k+j}else{j=this.GetOffset(f-n-1,f-1);m=k-j}if(m<0){m=0}else{if(m>o){m=o}}$.mobile.scrollview.prototype.scrollTo.call(l,0,-m,0)};d.prototype.GetOffset=function(m,i){var h=this.GetPM();
var g=h.Get("GetRecordSet").length;var l=i-m;var k=-this.GetWidget()._maxY;var n=$("#"+this.GetScrollcontainer()).height();var j=n+k;var f=(j/g)*l;return f};d.prototype.CheckScrollboundries=function(k){var f=this.GetListHeight();var h=$("#"+this.GetScrollcontainer()).height();var i=this.GetWidget();if(!i){return}var g=-i._sy;var j;if(f<h){j=0}else{j=f-h}if(g>j){g=j;$.mobile.scrollview.prototype.scrollTo.call(i,0,-g,0)}else{if(g<0){g=0;$.mobile.scrollview.prototype.scrollTo.call(i,0,-g,0)}}};d.prototype.OnPaginationYdir=function(h){var g="";switch(h){case"Next Record":g=a.get("PAG_NEXT_RECORD");break;case"Next Set Of Record":g=a.get("PAG_NEXT_SET");break;case"Previous Record":g=a.get("PAG_PREV_RECORD");break;case"Previous Set Of Record":g=a.get("PAG_PREV_SET");break;case"Scroll Up":g=a.get("PAG_SCROLL_UP");break;case"Scroll Dn":g=a.get("PAG_SCROLL_DN");break}var f=this.GetPM();if(!this.GetPM().OnControlEvent(a.get("PHYEVENT_VSCROLL_LIST"),g)){return false}return true};return d}());return"SiebelAppFacade.JQMScrollContainer"})};