/*<ORACLECOPYRIGHT>
* Copyright (C) 1994-2013 Oracle and/or its affiliates. All rights reserved.
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
* UNIX is a registered trademark of The Open Group.
*
* This software and related documentation are provided under a license agreement
* containing restrictions on use and disclosure and are protected by intellectual property laws.
* Except as expressly permitted in your license agreement or allowed by law, you may not use, copy,
* reproduce, translate, broadcast, modify, license, transmit, distribute, exhibit, perform, publish,
* or display any part, in any form, or by any means. Reverse engineering, disassembly,
* or decompilation of this software, unless required by law for interoperability, is prohibited.
*
* The information contained herein is subject to change without notice and is not warranted to be error-free.
* If you find any errors, please report them to us in writing.
*
* U.S. GOVERNMENT RIGHTS Programs, software, databases, and related documentation and technical data delivered to U.S.
* Government customers are "commercial computer software" or "commercial technical data" pursuant to the applicable
* Federal Acquisition Regulation and agency-specific supplemental regulations.
* As such, the use, duplication, disclosure, modification, and adaptation shall be subject to the restrictions and
* license terms set forth in the applicable Government contract, and, to the extent applicable by the terms of the
* Government contract, the additional rights set forth in FAR 52.227-19, Commercial Computer Software License
* (December 2007). Oracle America, Inc., 500 Oracle Parkway, Redwood City, CA 94065.
*
* This software or hardware is developed for general use in a variety of information management applications.
* It is not developed or intended for use in any inherently dangerous applications, including applications that
* may create a risk of personal injury. If you use this software or hardware in dangerous applications,
* then you shall be responsible to take all appropriate fail-safe, backup, redundancy,
* and other measures to ensure its safe use. Oracle Corporation and its affiliates disclaim any liability for any
* damages caused by use of this software or hardware in dangerous applications.
*
* This software or hardware and documentation may provide access to or information on content,
* products, and services from third parties. Oracle Corporation and its affiliates are not responsible for and
* expressly disclaim all warranties of any kind with respect to third-party content, products, and services.
* Oracle Corporation and its affiliates will not be responsible for any loss, costs,
* or damages incurred due to your access to or use of third-party content, products, or services.
</ORACLECOPYRIGHT>*/
if(typeof(SiebelAppFacade.PhysicalRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.PhysicalRenderer");define("siebel/phyrenderer",[],function(){SiebelAppFacade.PhysicalRenderer=(function(){var X=SiebelJS.Dependency("SiebelApp.Utils");var i=SiebelJS.Dependency("SiebelApp.Constants");var j=i.get("SWE_PST_BUTTON_CTRL");var ay=i.get("SWE_CTRL_DETAIL");var ar=i.get("SWE_CTRL_MVG");var a=i.get("SWE_CTRL_PICK");var Q=i.get("SWE_CTRL_RADIO");var N=i.get("SWE_CTRL_CHECKBOX");var O=i.get("SWE_CTRL_COMBOBOX");var l=i.get("SWE_CTRL_CHART");var x=i.get("SWE_CTRL_PLAINTEXT");var S=i.get("SWE_CTRL_DATE_TIME_PICK");var Z=i.get("SWE_CTRL_DATE_PICK");var ai=i.get("SWE_CTRL_CALC");var o=i.get("SWE_CTRL_DATE_TZ_PICK");var an=i.get("SWE_CTRL_CURRENCY_CALC");var am=i.get("SWE_CTRL_TEXT");var u=i.get("SWE_CTRL_TEXTAREA");var A=i.get("SWE_CTRL_RTCEMBEDDED");var n=i.get("SWE_CTRL_RTCEMBEDDEDTEXTONLY");var M=i.get("SWE_CTRL_RTCEMBEDDEDLINKFIELD");var ah=i.get("SWE_CTRL_RTCPOPUP");var t=i.get("SWE_CTRL_RTCIO");var C=i.get("SWE_CTRL_INKDATA");var m=i.get("SWE_CTRL_LINK");var p=i.get("SWE_CTRL_LABEL");var s=i.get("SWE_CTRL_URL");var Y=i.get("SWE_CTRL_MAILTO");var z=/(About Record Applet\w*)|(About SRF Applet\w*)|(About Siebel Applet\w*)|(About View Applet\w*)|(Record Count Applet\w*)|(Technical Support Applet\w*)/;var ae=i.get("SWE_CTRL_EFFDAT");var K=i.get("SWE_CTRL_IMAGECONTROL");var e=i.get("SWE_CTRL_FILE");var g=i.get("SWE_PST_COL");var b=i.get("SWE_PST_APPLET_MODE_QUERY");var J=i.get("SWE_PST_APPLET_MODE_EDIT");var au=i.get("SWE_PST_APPLET_MODE_NEW");function ac(aC){SiebelAppFacade.PhysicalRenderer.superclass.constructor.call(this,aC);var aE=null;this.SetFirstControl=function(aG){aE=aG};this.GetFirstControl=function(){return aE};var aD=new SiebelAppFacade.SearchCtrl(this);this.GetSearchCtrl=function(){return aD};var aF=false;this.SetIsGridBaseForm=function(aG){aF=aG};this.GetIsGridBaseForm=function(){return aF};this._EndLife=function(){aE=null;aD=null}}SiebelJS.Extend(ac,SiebelAppFacade.BasePR);ac.prototype.Init=function(){SiebelAppFacade.PhysicalRenderer.superclass.Init.call(this);this.AttachPMBinding("UpdateQuickPickInfo",this.UpdatePick);this.AttachPMBinding("UpdateAppletMessage",P);this.AttachPMBinding("UpdateCSQueryMsg",aq);this.AttachPMBinding("UpdateCurrencyCalcInfo",H);this.AttachPMBinding("UpdateConditionals",c);this.AttachPMBinding("ProcessCancelQueryPopup",B);this.AttachPMBinding("FocusOnApplet",q);this.AttachPMBinding("HandleCtrlDefChange",this.RefreshControl);this.AttachPMBinding("SetCanInvokeState",v);this.AttachPMBinding("BeginQueryState",E);this.AttachPMBinding("EndQueryState",ab);this.AttachPMBinding("UpdateRowCounter",aa);this.AttachPMBinding("ShowPopup",this.ShowPopup);this.AttachPMBinding("isControlPopupOpen",k);this.AttachPMBinding("ShowSelection",this.ShowSelection);this.AttachPMBinding("ResetAppletState",this.ResetRendererState);this.AttachPMBinding("RefreshData",this.BindData);this.AttachPMBinding("FieldChange",this.SetControlValue);this.AttachPMBinding("UpdateStateChange",this.UpdateUIControls);this.AttachPMBinding("InvokeStateChange",this.UpdateUIButtons);this.AttachPMBinding("GetPhysicalControlValue",this.GetPhysicalControlValue);this.AttachPMBinding("SetFocusToCtrl",this.SetFocusToControl);this.AttachPMBinding("FocusFirstControl",this.FocusFirstControl);this.AttachPMBinding("SetHighlightState",ak);this.AttachPMBinding("UpdateUI",function(){this.ShowSelection()})};ac.prototype.RefreshControl=function(aD){var aC=$("#"+aD.GetInputName())[0]||$("[name="+aD.GetInputName()+"]");if(aC.length>0){aC.nextAll().remove();this.ShowUIControl(aD);this.BindControlEvents(aD);this.EnableControl(aD,this.GetPM().ExecuteMethod("CanUpdate",aD.GetName()));aw.call(this,aD)}};ac.prototype.EndLife=function(){var aG=this.GetPM(),aI=aG.Get(i.get("SWE_VIS_MODE_LIST")),aH=aI?aI.length:0,aC=aG.Get("GetFullId"),aD="",aE=aG.Get("GetPlaceholder");if(aH>0){for(var aF=0;aF<aH;aF++){if($("#"+aE+"_"+aI[aF]+"_btn").length>0){$("#"+aE+"_"+aI[aF]+"_btn").unbind("click")}}}$("#s_"+this.GetPM().Get("GetFullId")+"_div").off("click click.drilldown");this._EndLife();SiebelAppFacade.PhysicalRenderer.superclass.EndLife.call(this)};ac.prototype.ResetRendererState=function(){};ac.prototype.UpdatePick=function(){var aC=arguments[arguments.length-1];var aD=this.GetPM().Get("GetActiveControl");if(!aD){return}L.call(this,aD,aC);delete this.inProgress};function y(aI,aG,aH,aE){var aD=this.GetPM();var aC=aG.GetUIType();if(aC===consts.get("SWE_CTRL_DATE_TZ_PICK")||aC===consts.get("SWE_CTRL_DATE_TIME_PICK")){aI.val(aH);aH=X.toISOFormat(aH,true)||aH}else{if(aC===consts.get("SWE_CTRL_DATE_PICK")){aH=X.toISOFormat(aH,false)||aH}}aI.datetimepicker("destroy");this.SetFocusToControl(aG.GetName(),true);aD.SetProperty("isControlPopupOpen",false);var aF=aI.attr("data");if(aE===true){aI.val(aF)}else{aD.ExecuteMethod("LeaveField",aG,aH,true)}aI.removeAttr("data")}function L(aE,aC){var aD=$('input[name="'+aE.GetInputName()+'"]');if(aE){if(!this.GetPM().ExecuteMethod("CanUpdate",aE.GetName())||aD.is(":disabled")){aD.focus();return false}}if(aC===null){aD.autocomplete("option","source",[]);this.GetPM().OnControlEvent(i.get("PHYEVENT_INVOKE_COMBO"),aE);return}if(aD.length!==0){aD.autocomplete("option","source",aC).autocomplete("option","minLength",0).autocomplete("search","");aD.autocomplete("widget").attr("role","combobox");aD.autocomplete("widget").children().find("a").attr("role","option");aD.focus()}aD=null}function H(){var aD=this.GetPM();var aG=SiebelApp.S_App.GetPopupPM();$("div[name='popup']").find("div[name=CurrencyCalc]").remove();var aE=aD.ExecuteMethod("GetCurrencyCalInfo");var aH={pickId:aE[0],pickName:aE[1],pickValue:aE[2],dateId:aE[3],dateName:aE[4],dateValue:aE[5],calcId:aE[6],calcName:aE[7],calcValue:aE[8],hideExchDate:aE[9],CCodeReadOnly:aE[10],eDateReadOnly:aE[11],AmountReadOnly:aE[12],sourceField:aE[13],qtpInfo:aE[14]};var aF=aD.Get("GetActiveControl");if(!aF){var aJ=aD.Get("GetControls");for(var aI in aJ){if(aJ.hasOwnProperty(aI)){if(aJ[aI].GetInputName()===aH.sourceField){aF=aJ[aI];break}}}}var aC='<div name="CurrencyCalc" class="siebui-popup-currency">';aC+='<input type="hidden" autofocus="autofocus"/>';aC+='<div id="'+aH.pickId+'_cc" class="siebui-popup-input-row"><span class="siebui-popup-label">'+aH.pickName+'</span><input type="text" id="'+aH.pickId+'" tabindex="100" aria-label="'+aH.pickName+'" value="'+aH.pickValue+'" '+(aH.CCodeReadOnly?'readonly="readonly" ':"")+"></div>";if(!aH.hideExchDate){aC+='<div id="'+aH.dateId+'_cc" class="siebui-popup-input-row"><span class="siebui-popup-label">'+aH.dateName+'</span><input type="text" id="'+aH.dateId+'" tabindex="101" aria-label="'+aH.dateName+'" value="'+aH.dateValue+'" '+(aH.eDateReadOnly?' readonly="readonly" ':"")+"></div>"}aC+='<div id="'+aH.calcId+'_cc" class="siebui-popup-input-row"><span class="siebui-popup-label">'+aH.calcName+'</span><input type="text" id="'+aH.calcId+'" tabindex="102" aria-label="'+aH.calcName+'" value="'+aH.calcValue+'" '+(aH.AmountReadOnly?'readonly="readonly" ':"")+"></div>";
aC+="</div>";if(aG.Get("state")===i.get("POPUP_STATE_UNLOADED")){aG.Setup()}aG.SetProperty("isCurrencyOpen",true);aG.ExecuteMethod("OpenPopup",aC,0,0,false,false,true);aG.SetProperty("isCurrencyOpen",true);$("div[name=popup] ").find("div[name=CurrencyCalc]").parents("div.ui-dialog").children("div.ui-dialog-titlebar").hide().end().end().bind("keydown",{ctx:this,ctrl:aF,popPM:aG},function(aL){if(aL.keyCode===$.ui.keyCode.ESCAPE){if(aL.data.popPM.Get("isCurrencyOpen")){aL.data.popPM.SetProperty("isCurrencyOpen",false);aL.data.ctx.GetPM().ExecuteMethod("NotifyClosePopup");aL.data.ctx.SetFocusToControl(aL.data.ctrl.GetName(),true)}}if(aL.keyCode===$.ui.keyCode.ESCAPE||aL.keyCode===$.ui.keyCode.ENTER){aL.stopPropagation()}});$("div[name=CurrencyCalc]").parents("div.ui-dialog-content").removeClass("minWidthContainer");SiebelAppFacade.ControlBuilder.Pick({target:"#"+aH.pickId,className:"applet-form-pick",scope:this,control:aF,click:function(aL){this.GetPM().ExecuteMethod("ShowPickPopup")}});SiebelAppFacade.ControlBuilder.DatePick({target:"#"+aH.dateId,className:"applet-form-date",control:aF,scope:this,showPopup:false,click:function(aN,aM){if(!aH.eDateReadOnly){this.GetPM().SetProperty("isControlPopupOpen",true);$.data(this,"innerCtrlElem",{date:aM});var aL=this;SiebelAppFacade.ControlBuilder.DatePick({target:aM,className:"applet-form-date",control:aN,scope:this,showPopup:true,yearRange:"c-100:c+100",getISOVal:function(){return X.toISOFormat($(this.target).val(),false)},onClose:function(aQ,aP){$(this).datetimepicker("destroy").focus();aL.GetPM().SetProperty("isControlPopupOpen",false);$.removeData("innerCtrlElem");if(X.IsISO(consts.get("SWE_CTRL_DATE_PICK"),aQ)){var aO=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aQ,consts.get("ISO_DATE_FORMAT"),SiebelApp.S_App.LocaleObject.GetDateFormat());$(this).val(aO)}else{$(this).val(aQ)}}})}}});SiebelAppFacade.ControlBuilder.Calculator({target:"#"+aH.calcId,className:"applet-form-calculator",control:aF,scope:this,click:function(aN,aM){if(!this.GetPM().ExecuteMethod("CanUpdate",aN.GetName())){return}this.GetPM().SetProperty("isControlPopupOpen",true);$.data(this,"innerCtrlElem",{calc:aM});this.SetControlValue(aN,this.GetPM().ExecuteMethod("GetFieldValue",aN));var aL=this;SiebelAppFacade.ControlBuilder.Calculator({target:aM,className:"applet-form-calculator",control:aN,show:true,beforeShow:function(aS,aR){var aQ=aS;var aO=$("#"+aH.pickId).val();if(aO){var aP;var aT=SiebelApp.S_App.LocaleObject.GetCurrency(aO);aT=aT?aT.m_sSymbol:null;aP=aT?aT.length:0;if((aT&&aQ.substr(0,aP)===aT)&&(aQ.length>aP)){aQ=parseFloat(aQ.substring(aP))}}$(this).val(aQ)},close:function(aO){var aP=aO.replace(/\[/g,"").replace(/\]/g,"");aL.SetControlValue(aN,aP);$(this).calculator("destroy").next("img").show().end().focus();aL.GetPM().SetProperty("isControlPopupOpen",false);$.removeData("innerCtrlElem");aL.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_FOCUS"),aN)}})}});U.call(this,aH.qtpInfo);$("#"+aH.pickId).bind("focus",{ctx:this,ctrl:aF},function(aL){aL.data.ctx.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_FOCUS"),aL.data.ctrl,$(this).val())}).bind("blur",{ctx:this,ctrl:aF,ctrlType:aH.pickName},function(aM){aM.data.ctx.onBlurCurrency(aM.data.ctrlType,$(this).val());aM.data.ctx.GetPM().ExecuteMethod("CurrencyPostChanges");var aN=aM.data.ctx.GetPM().ExecuteMethod("GetCurrencyCalInfo");var aL=$("#"+aN[6]);aL.val(aN[8])}).bind("keydown",{ctx:this,ctrl:aF,readOnly:aH.CCodeReadOnly},function(aL){aL.data.ctx.HandleKeyEvents($(this),aL,$(this).val())});$("#"+aH.calcId).bind("focus",{ctx:this,ctrl:aF},function(aL){aL.data.ctx.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_FOCUS"),aL.data.ctrl,$(this).val())}).bind("blur",{ctx:this,ctrl:aF},function(aN){if(aN.data.ctx.GetPM().Get("isControlPopupOpen")===false){var aO=$(this).val();var aM=0;while(isNaN(aO.charAt(aM))){aM++}aO=aO.substring(aM);aN.data.ctx.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_BLUR"),aN.data.ctrl,aO);aN.data.ctx.GetPM().ExecuteMethod("CurrencyPostChanges");var aP=aN.data.ctx.GetPM().ExecuteMethod("GetCurrencyCalInfo");var aL=$("#"+aP[6]);aL.val(aP[8])}}).bind("keydown",{ctx:this,ctrl:aF,readOnly:aH.AmountReadOnly},function(aL){aL.data.ctx.HandleKeyEvents($(this),aL,$(this).val())});$("#"+aH.dateId).bind("blur",{ctx:this,ctrl:aF,readOnly:aH.eDateReadOnly},function(aM){if(!aM.data.readOnly){var aN=X.Trim($(this).val());var aO=X.toISOFormat(aN,false)||aN;if(X.IsISO(consts.get("SWE_CTRL_DATE_PICK"),aO)){var aL=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aO,consts.get("ISO_DATE_FORMAT"),SiebelApp.S_App.LocaleObject.GetDateFormat());$(this).val(aL)}else{$(this).val(aO)}}return false}).bind("keydown",{ctx:this,ctrl:aF,readOnly:aH.eDateReadOnly},function(aL){aL.data.ctx.HandleKeyEvents($(this),aL,$(this).val())});$("div.ui-widget-overlay").bind("click",{ctx:this,ctrl:aF,popPM:aG},function(aL){if(aL.data.popPM.Get("isCurrencyOpen")){aL.data.popPM.SetProperty("isCurrencyOpen",false);aL.data.ctx.GetPM().ExecuteMethod("NotifyClosePopup");aL.data.ctx.SetFocusToControl(aL.data.ctrl.GetName(),true)}});var aK=this;setTimeout(function(){var aL=$("#"+aF.GetInputName()+"_icon")||$("#"+aF.GetInputName().replace("_0","_"+aD.Get("GetSelection"))+ +"_icon");if(aL.length===0&&typeof(aK.GetColumnHelper)==="function"){aL=$('[name="'+aK.GetColumnHelper().GetModifiedColumnName(aF.GetName())+'"]').next("img");if(aL.length===0){aL=aL.end()}}$("div[name=popup] ").find("div[name=CurrencyCalc]").parents("div.ui-dialog").position({my:"top",at:"bottom",collision:"flipfit",of:aL});setTimeout(function(){$("#"+aH.pickId).focus()},5)},15)}ac.prototype.onBlurCurrency=function(aE,aD){var aC=this.GetPM().ExecuteMethod("GetCurrencyCalInfo");var aF;aD=aD.toUpperCase();if(aE==="Currency Code"){aF=aC[0];var aG=SiebelApp.S_App.LocaleObject.GetCurrency(aD);if(aG){$("#"+aF).val(aD)}else{$("#"+aF).val(aC[2])}}};function U(aG){if(aG){var aC=aG.GetChildCount();for(var aD=0;aD<aC;aD++){var aF=aG.GetChild(aD);var aE=aF.GetProperty(consts.get("SWE_PROP_ID"));$("#"+aE).attr({ot:aF.GetProperty(consts.get("SWE_PROP_QTP_OT")),rn:aF.GetProperty(consts.get("SWE_PROP_QTP_RN")),un:aF.GetProperty(consts.get("SWE_PROP_QTP_UN"))})}}}function P(){var aF=this.GetPM().Get("GetQueryModePrompt");var aE=this.GetPM().Get("GetId");var aD=$(".AppletButtons","#a_"+aE);var aC=$("#"+aE+"_msg");if(aC.length===0){aD.append("<td nowrap><span id="+aE+"_msg><span></td>")}if(aF!==null){aF=aF+".";$("#"+aE+"_msg").html(aF)}}function aq(aD){var aH="";var aG=true;if(aD){if(!this.GetPM().Get("IsInQueryMode")){aG=false}aH=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_MSG")}if(aG){var aF=this.GetPM().Get("GetId");var aE=$(".AppletButtons","#a_"+aF);var aC=$("#"+aF+"_ctrlmsg");if(aC.length===0){aE.append("<td nowrap><span id="+aF+"_ctrlmsg><span></td>")}if(aH!==null){$("#"+aF+"_ctrlmsg").html(aH)}}}function B(){var aH=SiebelApp.S_App.GetPopupPM();$("[name=cancelQuery]").remove();var aG=$('<div name="cancelQuery"></div>');var aK="";var aM=SiebelApp.S_App.LocaleObject;
var aJ=aM.GetLocalString("IDS_CANCELQRY_INITIALTEXT");var aE=aM.GetLocalString("IDS_CANCELQRY_RESPONSETEXT");var aL=aM.GetLocalString("IDS_CANCELQRY_HEADERTEXT");var aD=aM.GetLocalString("IDS_CANCELQRY_BUTTONTEXT");aK+='<div align ="center" id = "responseTxt_div"><p id="initTxt_CQ"><b>'+aJ+"</b></p></div><br />";var aC='<button id="cancelQry_Ctrl_CQ" class="appletButton" type="button" title="'+aD+'" >'+aD+"</button>";aK+='<div align="center" id = "cancelbtn_div">'+aC+"</div>";aG.append(aK);if(aH.Get("state")===i.get("POPUP_STATE_UNLOADED")){aH.Setup()}aH.SetProperty("IsCancelQryPopupOpen",true);aH.ExecuteMethod("SetPopupVisible",true);aH.SetProperty("content",aG);var aI=$("#cancelQry_Ctrl_CQ");if(aI.length!==0){var aF=this;aI.bind("click",function(aN){var aO='<p id="responseTxt_CQ"><b>'+aE+"</b></p>";$("#initTxt_CQ").replaceWith(aO);aH.OnControlEvent(i.get("PHYEVENT_CANCEL_QRY_POPUP"),aN)})}}function v(){var aC=this.GetPM();var aD=$("#s_"+aC.Get("GetFullId")+"_div");if(aC.ExecuteMethod("IsMethodDefault","MaximizeApplet")&&aC.ExecuteMethod("CanInvokeMethod","MaximizeApplet")===false){aD.removeClass("siebui-applet-minimize").addClass("siebui-applet-maximize")}else{if(aC.ExecuteMethod("IsMethodDefault","MinimizeApplet")&&aC.ExecuteMethod("CanInvokeMethod","MinimizeApplet")===false){aD.removeClass("siebui-applet-maximize").addClass("siebui-applet-minimize")}else{aD.removeClass("siebui-applet-maximize siebui-applet-minimize")}}}function I(aE,aD,aC){if(this.GetPM().Get("IsInQueryMode")&&aE.GetCaseSensitive()){if(aC==true&&$(aD).val()===""){$(aD).val(SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK"));$(aD).addClass("siebui-watermark-text")}else{if(aC==false&&$(aD).val()===SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK")){$(aD).val("");$(aD).removeClass("siebui-watermark-text")}}}}ac.prototype.ShowUI=function(){SiebelAppFacade.PhysicalRenderer.superclass.ShowUI.call(this);var aF=this.GetPM(),aI=aF.Get(i.get("SWE_VIS_MODE_LIST")),aS=aF.Get(i.get("SWE_LDC_VIS_MODE_LIST")),aC=aI?aI.length:0,aR=aS?aS.length:0,aK=aF.Get("GetFullId"),aM=aF.Get("GetPlaceholder"),aE,aL,aQ=aF.Get(i.get("SWE_VIS_MODE_DEFAULT")),aP="<div align='center' id = 's_div_"+aM+"_VisualModes' class = 'siebui-viz-buttonbar'>";v.call(this);var aJ=$("#s_"+this.GetPM().Get("GetFullId")+"_div");if(aJ.find("table[data-siebel-form-table='true']").length>0){this.SetIsGridBaseForm(true)}if(X.IsTrue(SiebelApp.S_App.GetAccessibilityEnhanced())){aJ.attr({role:"region",title:this.GetPM().Get("LandMarkTitle")})}var aO=this.GetPM().Get("GetControls");for(var aH in aO){if(aO.hasOwnProperty(aH)){this.ShowUIControl(aO[aH])}}if(!this.GetPM().Get("IsPopup")){this.ShowSearch()}this.InjectAppletQTPInfo(aJ);W.call(this);this.ShowCollapseExpand();if(aC>0&&aR>0&&aC===aR){for(var aG=0;aG<aC;aG++){if(aI[aG]!==aQ){aL="appletButton siebui-mode-button-enable"}else{aL="appletButtonDis siebui-mode-button-disable"}if($("#"+aM+"_"+aI[aG]+"_btn").length===0){aE='<button id="'+aM+"_"+aI[aG]+"_btn\" class='"+aL+"' aria-label='"+aS[aG]+"' "+((aL==="appletButton siebui-mode-button-enable")?" ":' disabled="disabled" ')+'type="button" title="'+aS[aG]+'" >'+aS[aG]+"</button>";aP+='<div align="center" id = "s_div_'+aM+"_"+aI[aG]+"\" class='siebui-viz-button-"+aI[aG].toLowerCase()+"' >"+aE+"</div>"}}if(aE){aP+="</div>";var aD=$("#s_"+aF.Get("GetId")+"_rc");if(aD.parent().prev("td").length){aD.parent().prev("td").append(aP)}else{aD.parent().prepend(aP)}aD=null}}if(this.GetIsGridBaseForm()===true){aj.call(this,aJ)}else{var aN=$("#SWEBottomHidden"+this.GetPM().Get("GetId"));aN.attr("tabindex","-1")}};function W(){var aC="#s_"+this.GetPM().Get("GetFullId")+"_div";setTimeout(function(){$(aC).find("div.mceGridField input, td.siebui-form-data input, td.scField input, span.mceField input").not("[type=checkbox]").not(".siebui-input-popup").each(function(){$(this).width($(this).width()+16)})},2)}function aj(aF){if(aF&&aF.length){var aH="#SWEBottomHidden"+this.GetPM().Get("GetId"),aG=aF.find("[tabindex]").not(aH);for(var aD=0,aC=aG.length;aD<aC;aD++){var aE=aG.eq(aD);if(Number(aE.attr("tabindex"))>=0){aE.attr({"data-seq":aE.attr("tabindex"),tabindex:"0"})}}aF.on("keydown","input[type=file][data-seq], button[data-seq], input[type=button][data-seq],div[data-seq],span[data-seq],a[data-seq]",{ctx:this},function(aI){az.call(aI.data.ctx,aI.target,null,aI)})}}ac.prototype.ShowUIControl=function(aT){if(!ad(aT)){return}var aS=arguments[1]?arguments[1]:aT.GetInputName();var a4=this;var aX=0;if(this.GetIsGridBaseForm()===true){aX=aT.GetSeq()||0}var aO=$('[name="'+aS+'"]')[0]||$("#"+aS)[0];if(!aO){return}aO=$(aO);switch(aT.GetUIType()){case s:aO.attr("maxlength",aT.GetMaxSize()||256).attr("tabindex",aX).addClass("siebui-input-align-"+aT.GetJustification());if(aT.GetName()==="BookmarkImage"&&this.GetPM().GetPMName()==="Bookmark URL Popup Applet (SWE)_PM"){aO.remove();$($("table.FormSection")[0]).remove()}this.InjectQTPInfo(aO,aT);aO=null;break;case j:case ay:var aM=aT.GetMethodName();var aF=aT.GetDisplayName();var aI=this.GetPM().ExecuteMethod("CanInvokeMethod",aM);var aU=this.GetPM().Get("GetAppletLabel");if(aU!==""){aU=aU+":"}var aZ;if(aM==="NewFileAttachment"){var bb=aI?aT.GetEnabledBmp():aT.GetDisabledBmp();var a5=aS+"_"+i.get("SWE_FILE_NAME_STR");if(!bb){aZ="<div id='"+aS+"' class='siebui-file-label "+((aI===true)?"appletButton":"appletButtonDis")+"'>"+aF+"<input id='"+a5+"'"+((aI===true)?" ":' disabled="disabled" ')+"tabindex='"+aX+"' title='"+aU+aF+"' aria-label='"+aU+aF+"' type='file' class='siebui-file-input' multiple name='"+i.get("SWE_FILE_NAME_STR")+"'/></div>"}else{aZ="<div id='"+aS+"' class='"+((aI===true)?"siebui-btn-icon-e siebui-file-label":"siebui-btn-icon-d siebui-file-label")+"'"+((aI===true)?' tabindex="'+aX+'"':" disabled='disabled' tabindex='-1'")+'><a role="button">'+bb+"</a><input id='"+a5+"' aria-label='"+aU+aF+"' type='file' class='siebui-file-input' multiple name='"+i.get("SWE_FILE_NAME_STR")+"'/></div>"}aO.replaceWith(aZ);var a0=$("#"+a5);var a1=$("#s_"+this.GetPM().Get("GetFullId")+"_div").find("#a_"+this.GetPM().Get("GetId"));SiebelAppFacade.ControlBuilder.FileUploader({url:SiebelApp.S_App.GetPageURL(),dropZone:a1,fileInput:a0,formData:{},change:af,fail:av,done:d,drop:af,scope:this});aZ=a0=a1=null}else{aZ='<button id="'+aS+'_Ctrl" class="'+(aI?"appletButton":"appletButtonDis")+'" type="button" data-display="'+aF+'" tabindex="'+aX+'" title="'+aU+aF+'" aria-label="'+aU+aF+'" '+((aI===true)?" ":'disabled="disabled"')+">"+aF+"</button>";if(aM==="ShowQueryAssistant"){aZ+='<div id="'+aS+'"class="SearchCtrl"/>'}}if(aM==="NewFileAttachment"){this.InjectQTPInfo($("#"+a5),aT)}else{var bb=aI?aT.GetEnabledBmp():aT.GetDisabledBmp();if(bb){aO.append('<a  role="button" >'+bb+"</a>").addClass(aI?"siebui-btn-icon-e":"siebui-btn-icon-d").children("a").attr("tabindex",aI?aX:"-1").find("img").attr("alt",aU+$(bb).attr("alt")).attr("title",aU+$(bb).attr("title"));this.InjectQTPInfo(aO,aT)}else{aO.replaceWith(aZ);this.InjectQTPInfo($("#"+aS+"_Ctrl"),aT)
}}aO=null;break;case e:var aM=aT.GetMethodName();var aF=aT.GetDisplayName();var aI=this.GetPM().ExecuteMethod("CanInvokeMethod",aM);var aE=aT.GetPMPropSet();var aZ="";var ba=false;if(aE){ba=aE.GetProperty("UploadTriggerControl")}var a0=null;var a1=$("#s_"+this.GetPM().Get("GetFullId")+"_div").find("#a_"+this.GetPM().Get("GetId"));if(!ba){aZ="<input id='"+aS+"' tabindex='"+aX+"' type='file' name='"+i.get("SWE_FILE_NAME_STR")+"'/>";aO.replaceWith(aZ);a0=$("#"+aS);SiebelAppFacade.ControlBuilder.FileUploader({url:SiebelApp.S_App.GetPageURL(),dropZone:a1,fileInput:a0,formData:{},change:af,fail:av,done:d,drop:af,scope:this})}else{aZ="<input id='"+aS+"' tabindex='"+aX+"' type='file' name='"+aT.GetName()+"'/>";aO.replaceWith(aZ);a0=$("#"+aS);SiebelAppFacade.ControlBuilder.FileUploader({url:SiebelApp.S_App.GetPageURL(),dropZone:a1,fileInput:a0,formData:{},add:ao,fail:av,done:h,drop:ao,isDisplayOption:ba,scope:this})}this.InjectQTPInfo($("#"+aS),aT);aO=a0=a1=null;break;case O:var aW=aT.GetHTMLAttr();var aQ='[name="'+aS+'"]';var a8=null;var aP=aW.toLowerCase();if(aW&&aP.indexOf("size=")>=0){a8=aP.substring(aP.indexOf("size=")+5,aP.length)}if(!a8){var a2=($(aQ).eq(0).clone().html("").wrap("<p/>").parent().html()||"").replace(/select/ig,"input");$(aQ).replaceWith(a2);aQ='input[name="'+aS+'"]'}$(aQ).attr("maxlength",aT.GetMaxSize()||256).addClass("siebui-input-align-"+aT.GetJustification());$(aQ).bind("keydown",{ctx:this,ctrl:aT},function(be){if(be.which===$.ui.keyCode.TAB&&$(this).prop("readonly")){be.stopImmediatePropagation()}return be.data.ctx.HandleKeyEvents($(this),be,$(this).val())});if(!a8){SiebelAppFacade.ControlBuilder.SelectCtrl({target:aQ,className:"applet-form-combo",scope:this,click:function(be){L.call(this,be,null)},control:aT,inputName:aS})}$(aQ).width(Number(aT.GetWidth())!==0?aT.GetWidth():i.get("DFLT_COMBO_WIDTH")).height(Number(aT.GetHeight())!==0?aT.GetHeight():i.get("DFLT_COMBO_HEIGHT")).attr("role","combobox").attr("tabindex",aX);if(a8){$(aQ).attr("size",a8)}else{$(aQ).autocomplete({source:[]}).autocomplete("option","position",{my:"center top",at:"center bottom",of:$(aQ),collision:"flipfit flipfit"}).bind("autocompletefocus",function(be,bf){$(this).attr("aria-activedescendant",$(this).autocomplete("widget").attr("aria-activedescendant"))})}this.InjectQTPInfo($(aQ),aT);break;case x:if(X.IsTrue(SiebelApp.S_App.GetAccessibilityEnhanced())){$(aO).attr("tabindex",aX).append('<Label id="'+$(aO).attr("id")+'_Label"></Label>').parent().addClass("siebui-input-align-"+aT.GetJustification());aO=null}break;case Q:var aH=aT.GetRadioGroupPropSet();var aG=aT.GetDisplayName();if(aH.IsEmpty()){break}var aN=aS;var a7=$("[name="+aN+"]");var aC=a7.outerWidth();var aL=a7.parent();a7.remove();for(var a9=0;a9<aH.GetChildCount();a9++){var bc=aH.GetChild(a9);var aR=bc.GetProperty("DisplayName");var aY="<input type='radio' tabindex=\""+aX+"\" role='radio' name='"+aS+"'>"+aR+"<br>";aL.append(aY);$($("[name="+aS+"]")[a9]).attr({value:bc.GetProperty("FieldValue"),"aria-label":(aG?(aG+" "):"")+aR})}a7=aL=null;break;case ar:aO.attr("maxlength",aT.GetMaxSize()||256).attr("tabindex",aX);SiebelAppFacade.ControlBuilder.Mvg({target:aO,className:"applet-form-mvg",scope:this,click:function(be){this.GetPM().OnControlEvent(i.get("PHYEVENT_INVOKE_MVG"),be)},control:aT,inputName:aS});this.InjectQTPInfo(aO,aT);break;case ae:SiebelAppFacade.ControlBuilder.EffDat({target:aO,className:"applet-form-effdat",scope:this,click:function(be){this.GetPM().OnControlEvent(i.get("PHYEVENT_INVOKE_EFFDAT"),be)},control:aT,inputName:aS});aO.attr("tabindex",aX);this.InjectQTPInfo(aO,aT);break;case a:aO.attr("maxlength",aT.GetMaxSize()||256).attr("tabindex",aX);SiebelAppFacade.ControlBuilder.Pick({target:aO,className:"applet-form-pick",scope:this,click:function(be){this.GetPM().OnControlEvent(i.get("PHYEVENT_INVOKE_PICK"),be)},control:aT,inputName:aS});this.InjectQTPInfo(aO,aT);break;case Z:aO.attr("maxlength",aT.GetMaxSize()||256).attr("tabindex",aX);SiebelAppFacade.ControlBuilder.DatePick({target:aO,className:"applet-form-date",control:aT,inputName:aS,scope:this,showPopup:false,click:function(bg,bi,bf){if(!this.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_FOCUS"),bg)){return}if(!this.GetPM().ExecuteMethod("CanUpdate",bg.GetName())){return}var bh=$(bi);bh.attr("data",bh.val());this.GetPM().SetProperty("isControlPopupOpen",true);var be=this;SiebelAppFacade.ControlBuilder.DatePick({target:bi,className:"applet-form-date",control:bg,inputName:bf,scope:be,showPopup:true,yearRange:"c-100:c+100",getISOVal:function(){return X.toISOFormat($(this.target).val(),false)},onClose:function(bk,bj){y.call(be,$(this),bg,bk,bj.isEscapeKey)}})}});this.InjectQTPInfo(aO,aT);break;case S:case o:aO.attr("maxlength",aT.GetMaxSize()||256).attr("tabindex",aX);SiebelAppFacade.ControlBuilder.DateTimePick({target:aO,className:"applet-form-datetime",control:aT,inputName:aS,scope:this,showPopup:false,click:function(bg,bi,bf){if(!a4.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_FOCUS"),bg)){return}if(!a4.GetPM().ExecuteMethod("CanUpdate",bg.GetName())){return}var bh=$(bi);bh.attr("data",bh.val());this.GetPM().SetProperty("isControlPopupOpen",true);var be=this;SiebelAppFacade.ControlBuilder.DateTimePick({target:bi,className:"applet-form-datetime",control:bg,inputName:bf,scope:be,showPopup:true,yearRange:"c-100:c+100",getISOVal:function(){return X.toISOFormat($(this.target).val(),true)},onClose:function(bk,bj){y.call(be,$(this),bg,bk,bj.isEscapeKey)}})}});this.InjectQTPInfo(aO,aT);break;case ai:aO.attr("maxlength",aT.GetMaxSize()||256).attr("tabindex",aX);SiebelAppFacade.ControlBuilder.Calculator({target:aO,className:"applet-form-calculator",controlClass:"siebui-element-ltr",control:aT,inputName:aS,scope:this,click:function(bg,bf,be){if(!a4.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_FOCUS"),bg)){return}if(!a4.GetPM().ExecuteMethod("CanUpdate",bg.GetName())){return}this.GetPM().SetProperty("isControlPopupOpen",true);a4.SetControlValue(bg,a4.GetPM().ExecuteMethod("GetFieldValue",bg));SiebelAppFacade.ControlBuilder.Calculator({target:bf,className:"applet-form-calculator",control:bg,inputName:be,show:true,close:function(bh){var bi=bh.replace(/\[/g,"").replace(/\]/g,"");a4.SetControlValue(bg,bi);$(this).calculator("destroy");$(this).next("img").show();$(this).focus();a4.GetPM().SetProperty("isControlPopupOpen",false);a4.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_FOCUS"),bg)}})}});this.InjectQTPInfo(aO,aT);break;case an:aO.attr("maxlength",aT.GetMaxSize()||256).attr("tabindex",aX);SiebelAppFacade.ControlBuilder.Currency({target:aO,className:"applet-form-currency",controlClass:"siebui-element-ltr",scope:this,click:function(be){this.GetPM().OnControlEvent(i.get("PHYEVENT_INVOKE_CURRENCY"),be)},control:aT,inputName:aS});this.InjectQTPInfo(aO,aT);break;case A:SiebelAppFacade.ControlBuilder.RTCeditor({target:aO,blur:function(bf,be){if(a4.GetPM().Get("IsInQueryMode")&&bf.GetCaseSensitive()&&(be===SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK"))){be=""
}a4.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_BLUR"),bf,be);if(a4.GetPM().Get("IsInQueryMode")&&bf.GetCaseSensitive()&&(be==="")){be=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK");$("[name="+bf.GetInputName()+"]").ckeditor(function(bh){var bg=this;setTimeout(function(bi){bg.setData(bi)},2)})}},focus:function(bf,be){if(a4.GetPM().Get("IsInQueryMode")&&bf.GetCaseSensitive()&&(be===SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK"))){be="";$("[name="+bf.GetInputName()+"]").ckeditor(function(bh){var bg=this;setTimeout(function(bi){bg.setData(bi)},2)})}a4.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_FOCUS"),bf,be)},control:aT,inputName:aS});aO.attr("tabindex",aX);this.InjectQTPInfo(aO,aT);break;case C:var bd=aS;a7=$("[name="+bd+"]");var a6=a7.data("value");aL=a7.parent();a7.remove();aO='<div id ="'+bd+'" name ="'+bd+'" class = "siebui-ctrl-sigpad"><canvas class="siebui-ctrl-pad" width="632" height="144"></canvas><p class="siebui-ctrl'+bd+'-clearButton" style="display:none"></p><input class = "'+bd+'" style="display:none"></input></div>';aL.append(aO);if(this.GetPM().ExecuteMethod("CanUpdate",aT.GetName())){$("#"+bd).signaturePad({output:$("."+bd),clear:".siebui-ctrl"+bd+"-clearButton"})}else{try{if(a6===""){a6=this.GetPM().ExecuteMethod("GetFieldValue",aT)}$("#"+bd).signaturePad({displayOnly:true}).regenerate(a6)}catch(aV){if(aV.name==="SyntaxError"){if(a6===""||a6.match("Cancelled*")){$("#"+bd).signaturePad({displayOnly:true}).regenerate("[]")}else{$("#"+bd).empty().append("<span>Unexpected Format</span>")}}else{SiebelJS.Log(aV)}}}this.InjectQTPInfo($("[name='"+aS+"']"),aT);a7=aL=null;break;case m:if(aO.length===1){var aM=aT.GetMethodName();var aI=this.GetPM().ExecuteMethod("CanInvokeMethod",aM);var bb=aI?aT.GetEnabledBmp():aT.GetDisabledBmp();if(bb){aO.append('<a href= "javascript:void()" role="link">'+bb+"</a>").addClass(aI?"siebui-link-icon-e":"siebui-link-icon-d");aO.children("a").attr("tabindex",aI?aX:"-1")}else{aO.append(R.call(this,aT,aS)).parent().addClass("siebui-ctrl-link siebui-input-align-"+aT.GetJustification())}}this.InjectQTPInfo(aO,aT);aO=null;break;case p:if(aT.GetMethodName()){aO.append(R.call(this,aT,aS)).attr("tabindex",aX).parent().addClass("siebui-ctrl-label siebui-input-align-"+aT.GetJustification());this.InjectQTPInfo(aO,aT);aO=null}break;case am:aO.attr("maxlength",aT.GetMaxSize()||256).attr("tabindex",aX).addClass("siebui-input-align-"+aT.GetJustification());if(aT.GetPopupType()){SiebelAppFacade.ControlBuilder.DetailPopup({target:aO,className:"applet-form-pick",scope:this,click:function(be){this.GetPM().OnControlEvent(i.get("PHYEVENT_INVOKE_DETAIL_POPUP"),be)},control:aT,inputName:aS})}else{if(SiebelApp.S_App.CommToolbar){var aK=this.GetPM().ExecuteMethod("GetFieldDataType",aT.GetFieldName());if(aK.toLowerCase()===i.get("SWE_CTRL_PHONE").toLowerCase()){SiebelAppFacade.ControlBuilder.PhoneCtrl({target:aO,className:"applet-form-phone",click:function(be,bf){if(SiebelApp.S_App.CommToolbar.CallContactFromUIEnabled()){SiebelApp.S_App.CommToolbar.OpenCallContactFromUIPopup(bf.val(),$("[id='"+(bf.attr("id")||aS)+"_icon']"))}},control:aT,inputName:aS})}}}this.InjectQTPInfo(aO,aT);break;case K:aO.addClass("siebui-input-align-"+aT.GetJustification());this.InjectQTPInfo(aO,aT);break;case n:var aO=$('[name="'+aT.GetInputName()+'"]')[0]||$("#"+aT.GetInputName())[0];if(!aO){return}aO=$(aO);aO.text("");var aD=aO.next("textarea");if(aD.length>0){aD.height(aT.GetHeight()).width(aT.GetWidth()).attr("name",aT.GetInputName()).attr("aria-labelledby",(aT.GetFieldName().replace(/\s+/g,"")+"_Label")).attr("aria-label",aT.GetDisplayName()).attr("maxlength",aT.GetMaxSize()||256).attr("tabindex",aX).addClass("siebui-input-align-"+aT.GetJustification());this.InjectQTPInfo($("[name='"+aT.GetInputName()+"']"),aT)}var a3=aO.parent().next().find("img.stripTagBtn");if(a3.length>0){var aJ=SiebelApp.S_App.LocaleObject.GetLocalString("RTCStripHTML");a3.attr("alt",aJ).attr("title",aJ)}break;default:aO.attr("maxlength",aT.GetMaxSize()||256).attr("tabindex",aX).addClass("siebui-input-align-"+aT.GetJustification());this.InjectQTPInfo(aO,aT);break}};function R(aD){var aC=arguments[1]?arguments[1]:aD.GetInputName();if($("#"+aC+"_mb").length>0){return}return'<a  id ="'+aC+'_mb" tabindex ="'+aD.GetSeq()+'" href="javascript:void(0)" >'+aD.GetDisplayName()+"</a>"}ac.prototype.ShowSearch=function(){};ac.prototype.ShowCollapseExpand=function(){var aE=this.GetPM().Get("defaultAppletDisplayMode");if(aE){var aC=this.GetPM().Get("GetAppletLabel");if(aC!==""){aC=aC+":"}var aG;var aD;var aF="#s_"+this.GetPM().Get("GetFullId")+"_div";aD=aC+SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_APPLET_EXPAND");aG="<span class='siebui-button-secondary siebui-btn-icon-expanded'><a href='javascript:void()' role='link' tabindex='0' aria-label='"+aD+"'></a></span>";aD="";aD=aC+SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_APPLET_COLLAPSE");aG+="<span class='siebui-button-secondary siebui-btn-icon-collapsed'><a href='javascript:void()' role='link' tabindex='0' aria-label='"+aD+"'></a></span>";$(aF).find(".siebui-collapsible-applet-container").prepend(aG).find(".siebui-btn-icon-"+aE).hide();if(aE==="collapsed"){$(aF).find(".siebui-collapsible-applet-content").hide()}}};ac.prototype.BindEvents=function(aO,aK){SiebelAppFacade.PhysicalRenderer.superclass.BindEvents.call(this);var aD=this.GetPM(),aJ=aD.Get(i.get("SWE_VIS_MODE_LIST")),aC=aJ?aJ.length:0,aL=aD.Get("GetFullId"),aR="",aN=aD.Get("GetPlaceholder"),aE=aD.Get("UiContext"),aH="#s_"+this.GetPM().Get("GetFullId")+"_div",aI=aE?$(aH,aE):$(aH);if(aC>0){for(var aG=0;aG<aC;aG++){if($("#"+aN+"_"+aJ[aG]+"_btn").length>0){$("#"+aN+"_"+aJ[aG]+"_btn").bind("click",{ctx:this,visMode:aJ[aG]},function(aX){var aT=aX.data.ctx,aV=aT.GetPM(),aS=CCFMiscUtil_CreatePropSet(),aU={};aU.async=true;var aW=this;aU.cb=function(){var aY=Array.prototype.slice.call(arguments);var aZ=aY?aY[aY.length-1]:"";if(aZ===true){aV.SetProperty("DefaultVisualMode",aX.data.visMode);$(aW).attr("disabled","disabled");$(aW).removeClass("appletButton siebui-mode-button-enable");$(aW).addClass("appletButtonDis siebui-mode-button-disable")}};aS.SetProperty("VisualMode",aX.data.visMode);aV.OnControlEvent(i.get("PHYEVENT_INVOKE_CONTROL"),aV.Get(i.get("SWE_VIS_MODE_FLIP_METHOD")),aS,aU)})}}}if(this.constructor==ac){var aP=$("#SWEBottomHidden"+this.GetPM().Get("GetId"));$(aP).bind("focus",{ctx:this},function(aS){al.call(aS.data.ctx,aS)})}$("#s_"+this.GetPM().Get("GetFullId")+"_div").on("click",".siebui-collapsible-applet-header .siebui-button-secondary",{ctx:this},function(aS){$(this).parents(".siebui-collapsible-applet-header").find(".siebui-button-secondary").toggle().parents(".siebui-collapsible-applet:first").find(".siebui-collapsible-applet-content").slideToggle("fast","linear");(aS.data.ctx.resize||$.noop).call(aS.data.ctx)});aI.bind("click",{ctx:this},function(aT){var aS=aT.data.ctx;if(!aS.IsValidClick(aT.srcElement||aT.target)){return true}if(aS&&aS.GetPM()){var aU=aS.GetPM().OnControlEvent(i.get("PHYEVENT_APPLET_FOCUS"));
if(aU===false&&aT.target){clearTimeout($(aT.target).data("pendingAction"));$(aT.target).removeData("pendingAction")}if(SiebelApp.S_App.GetPopupPM().Get("state")===consts.get("POPUP_STATE_VISIBLE")){aT.stopPropagation()}ap.call(aS,aT)}});aI.on("click",".siebui-btn-icon-e",{ctx:this},function(aU){var aS=aU.data.ctx.GetPM().Get("GetControls");var aT=this.id;for(var aW in aS){if(aS.hasOwnProperty(aW)){var aV=aS[aW];if(aV.GetInputName()===aT&&aV.GetMethodName()!=="NewFileAttachment"){setTimeout(function(){aU.data.ctx.InvokeControlMethod(aV)},0);break}}}});aI.on("click.drilldown",".siebui-ctrl-drilldown",{ctx:this},function(aV){var aS=aV.data.ctx.GetPM().Get("GetControls");var aT=this.id.indexOf("_mb");var aU=this.id.substring(0,aT);for(var aX in aS){if(aS.hasOwnProperty(aX)){var aW=aS[aX];if(aW.GetInputName()===aU){aV.data.ctx.GetPM().OnControlEvent(i.get("PHYEVENT_DRILLDOWN_FORM"),aW)}}}});var aM=this.GetPM().ExecuteMethod("GetControlId");if(aM){$("[name="+aM+"]").bind("change",{ctx:this},function(aS){aS.data.ctx.GetPM().OnControlEvent(i.get("PHYEVENT_INVOKE_TOGGLE"),$(this).val())})}if(aK===true){return}var aQ=aO||this.GetPM().Get("GetControls");for(var aF in aQ){if(aQ.hasOwnProperty(aF)){this.BindControlEvents(aQ[aF])}}aQ=null;aI=null};ac.prototype.InvokeControlMethod=function(aG){SiebelApp.S_App.uiStatus.Busy({});var aD={};aD.async=true;aD.cb=function(){var aH=Array.prototype.slice.call(arguments);var aI=aH?aH[aH.length-1]:"";if(aI!==i.get("SWE_RPC_PROP_NEW_LAYOUT")&&aI!==i.get("SWE_RPC_PROP_REFRESH_LAYOUT")&&aI!==i.get("SWE_RPC_PROP_NEW_PAGE")){SiebelApp.S_App.uiStatus.Free()}};var aE=aG.GetMethodPropSet();var aC=aE.Clone();var aF=this.GetPM().OnControlEvent(i.get("PHYEVENT_INVOKE_CONTROL"),aG.GetMethodName(),aC,aD);if(aF===false){SiebelApp.S_App.uiStatus.Free();return false}};ac.prototype.IsValidClick=function(aC){return(X.IndexOf(["input","textarea","button","a","img"],aC.tagName.toLowerCase())===-1)};ac.prototype.FormatDDInQueryMode=function(aE,aD){if(this.GetPM().Get("IsInQueryMode")){var aC=this.GetPM().Get("DDUserSelected");if(aC&&aD&&aD.charAt(0)!=='"'&&aD.charAt(aD.length-1)!=='"'&&aC.ctrl===aE&&aC.value===aD){aD='"'+aD+'"';this.GetPM().SetProperty("DDUserSelected",undefined)}}return aD};ac.prototype.BindControlEvents=function(aF){if(!ad(aF)){return}var aG=$("[name="+aF.GetInputName()+"]");var aE=this.GetPM();if(aG.length===0&&aF.GetControlType()===g&&X.IndexOf([b,J,au],aE.Get("GetMode"))!==-1){var aC=aF.GetSpanPrefix()+"0";aG=$("[name="+aC+"]")}if(aG.length===0&&$("#"+aF.GetInputName()).length===0&&$("#"+(aF.GetInputName()+"_Ctrl")).length===0){return}switch(aF.GetUIType()){case ay:case j:if(aF.GetMethodName()==="NewFileAttachment"){return false}else{if(aF.GetMethodName()==="ClearSignature"){$("#"+(aF.GetInputName()+"_Ctrl")).bind("click",{ctx:this,ctrl:aF},function(aH){var aJ=aH.data.ctx.GetPM().Get("GetControls");for(var aI in aJ){if(aJ.hasOwnProperty(aI)){if(aJ[aI].GetUIType()==="JInkData"){$(".siebui-ctrl"+aJ[aI].GetInputName()+"-clearButton").trigger("click");$("."+aJ[aI].GetInputName()).attr({value:""});$("#"+aJ[aI].GetInputName()).trigger("vmouseup")}}}})}else{$("#"+(aF.GetInputName()+"_Ctrl")).bind("click",{ctx:this,ctrl:aF},function(aH){var aI=setTimeout(function(){var aK=aH.data.ctx.GetPM().Get("GetControls");var aO=aH.data.ctrl.GetPMPropSet();var aJ;if(aO&&aO.GetProperty("FileUploadControl")){aJ=aO.GetProperty("FileUploadControl");var aM=aK[aJ];var aN=$("#"+aM.GetInputName());var aL=$(aN).fileupload("option","importfiles")}if(aL){f.call(aH.data.ctx,aH.data.ctrl,aN)}else{aH.data.ctx.InvokeControlMethod(aH.data.ctrl)}},0);$(this).data("pendingAction",aI);aH.preventDefault()})}}break;case O:aG.bind("focus",{ctx:this,ctrl:aF},function(aH){aH.data.ctx.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_FOCUS"),aH.data.ctrl,$(this).val());I.call(aH.data.ctx,aH.data.ctrl,this,false)}).bind("blur",{ctx:this,ctrl:aF},function(aH){if($(document.activeElement).parents(".ui-autocomplete").length>0||($(this).data("ui-autocomplete")&&$(this).data("ui-autocomplete").menu.active)){return}var aI=aH.data.ctx.FormatDDInQueryMode(aH.data.ctrl,$(this).val());aH.data.ctx.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_BLUR"),aH.data.ctrl,aI);I.call(aH.data.ctx,aH.data.ctrl,this,true)}).bind("autocompleteselect",{ctx:this,ctrl:aF},function(aH,aI){if(aH.data.ctx.GetPM().Get("IsInQueryMode")){aH.data.ctx.GetPM().SetProperty("DDUserSelected",{ctrl:aH.data.ctrl,value:aI.item.value})}$(this).data("pendingSelect",aI.item.value)}).bind("autocompleteopen",{ctx:this,ctrl:aF},function(aH){aH.data.ctx.GetPM().SetProperty("isControlPopupOpen",true)}).bind("autocompleteclose",{ctx:this,ctrl:aF},function(aH){if(aH.data.ctx.GetPM().Get("IsInQueryMode")){aH.data.ctx.GetPM().SetProperty("DDUserSelected",{ctrl:aH.data.ctrl,value:aH.target.value})}var aI=$(this).data("pendingSelect");if(aI){$(this).removeData("pendingSelect");var aJ=aH.data.ctx.GetPM().ExecuteMethod("LeaveField",aH.data.ctrl,aI,true);if(aJ===false){return aJ}}aH.data.ctx.GetPM().SetProperty("isControlPopupOpen",false)});break;case Q:case N:aG.bind("keydown",{ctx:this,ctrl:aF},function(aH){return aH.data.ctx.HandleKeyEvents($(this),aH,$(this).val())}).bind("focus",{ctx:this,ctrl:aF},function(aH){aH.data.ctx.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_FOCUS"),aH.data.ctrl,$(this).val())}).bind("mousedown",{ctx:this},function(aH){$(this).data("webkit-mousedown",true);$(this).data("readonly-value",$(this).prop("checked"))}).bind("blur",{ctx:this,ctrl:aF},function(aI){var aH=$(this);if(aH.data("webkit-mousedown")){aH.removeData("webkit-mousedown");return}aI.data.ctx.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_BLUR"),aI.data.ctrl,aH.val())}).bind("click",{ctx:this,ctrl:aF},function(aJ){var aI=$(this);var aH=aI.attr("readonly");if(typeof aH!=="undefined"&&aH!==false){aI.prop("checked",aI.data("readonly-value")!==undefined?aI.data("readonly-value"):!aI.prop("checked"));aI.removeData("readonly-value")}if(aI.attr("type")==="checkbox"){aI.val(aI.prop("checked")?"Y":"N")}if(aI.data("webkit-mousedown")){aI.removeData("webkit-mousedown")}var aK=$(document.activeElement);if((aI.attr("id")||"")!==(aK.attr("id")||"")||(aI.attr("name")||"")!==(aK.attr("name")||"")){aI.focus()}});break;case m:case p:if(aF.GetMethodName()){aG=$("#"+aF.GetInputName());aG.bind("click",{ctx:this,ctrl:aF},function(aI){var aH=$(this);setTimeout(function(){if(aH.hasClass("siebui-link-icon-d")){return}aI.data.ctx.InvokeControlMethod(aI.data.ctrl)},0)})}break;case C:aG.bind("mouseup",{ctx:this,ctrl:aF},function(aH){aH.data.ctx.GetPM().ExecuteMethod("SetActiveControl",aH.data.ctrl);aH.data.ctx.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_BLUR"),aH.data.ctrl,$("."+aH.data.ctrl.GetInputName()).val())});aG.bind("mouseover",{ctx:this,ctrl:aF},function(aH){aH.data.ctx.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_FOCUS"),aH.data.ctrl,$("."+aH.data.ctrl.GetInputName()).val())});break;case Z:case S:case o:aG.bind("keydown",{ctx:this,ctrl:aF},function(aH){var aI=$(this).val();
if(aH.data.ctx.GetPM().Get("IsInQueryMode")===false){aI=X.toISOFormat(aI,(aH.data.ctrl.GetUIType()!==Z))||aI}return aH.data.ctx.HandleKeyEvents($(this),aH,aI)});aG.bind("blur",{ctx:this,ctrl:aF},function(aL){var aM=$(this).val();if(aL.data.ctx.GetPM().Get("isControlPopupOpen")==false){if(aL.data.ctx.GetPM().Get("IsInQueryMode")===false){aM=X.toISOFormat(aM,(aL.data.ctrl.GetUIType()!==Z))||aM}aL.data.ctx.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_BLUR"),aL.data.ctrl,aM)}else{var aI=aF.GetUIType()===Z;var aH=SiebelApp.S_App.LocaleObject.GetDateFormat();var aK=i.get("ISO_DATE_FORMAT");if(!aI){aH+=" "+SiebelApp.S_App.LocaleObject.GetTimeFormat();aK=i.get("ISO8601_DATETIME_FORMAT")}var aJ=SiebelApp.S_App.LocaleObject.GetStringFromDateTime(aM,aK,aL.data.ctrl.GetDisplayFormat()||aH);$(this).val(aJ===""?aM:aJ)}});aG.bind("focus",{ctx:this,ctrl:aF},function(aH){var aI=$(this).val();if(aH.data.ctx.GetPM().Get("IsInQueryMode")===false){aI=X.toISOFormat(aI,(aH.data.ctrl.GetUIType()!==Z))||aI}aH.data.ctx.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_FOCUS"),aH.data.ctrl,aI)});break;case n:var aD=aG.parent().next().find("a.stripTagBtn");if(aD.length>0){aD.bind("click",function(){var aI=SiebelApp.S_App.LocaleObject.GetLocalString("RTCStripHtmlConfirm");var aH=X.Confirm(aI);if(aH==true){var aJ=$("textarea[name='"+aF.GetInputName()+"']");aJ.val(SiebelApp.Utils.stripOUIHTMLTag(aJ.val()));aJ.focus()}})}default:aG.bind("keydown",{ctx:this,ctrl:aF},function(aH){return aH.data.ctx.HandleKeyEvents($(this),aH,$(this).val())});aG.bind("blur",{ctx:this,ctrl:aF},function(aH){I.call(aH.data.ctx,aH.data.ctrl,this,false);var aI=aH.data.ctx.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_BLUR"),aH.data.ctrl,$(this).val());I.call(aH.data.ctx,aH.data.ctrl,this,true)});aG.bind("focus",{ctx:this,ctrl:aF},function(aH){I.call(aH.data.ctx,aH.data.ctrl,this,false);var aI=aH.data.ctx.GetPM().OnControlEvent(i.get("PHYEVENT_CONTROL_FOCUS"),aH.data.ctrl,$(this).val());if(aI===false){aH.preventDefault();aH.stopPropagation();return false}});break}aG=null};ac.prototype.HandleKeyEvents=function(aE,aF,aH){var aC=false;var aD=this.GetPM();if(aE&&aE.length===1&&aF){var aG=aF.data.ctrl;if(aG){switch(aF.which){case $.ui.keyCode.ENTER:aC=at.call(this,aE,aG,aF);break;case $.ui.keyCode.ESCAPE:aC=ag.call(this,aE,aG,aF);break;case $.ui.keyCode.UP:aC=aA.call(this,aE,aG,aF);break;case $.ui.keyCode.DOWN:aC=D.call(this,aE,aG,aF);break;case $.ui.keyCode.LEFT:case $.ui.keyCode.RIGHT:aC=G.call(this,aE,aG,aF);break;case $.ui.keyCode.BACKSPACE:aC=F.call(this,aE,aG,aF);if(aC){aF.preventDefault()}break;case $.ui.keyCode.TAB:aC=az.call(this,aE,aG,aF);break;case i.get("SWE_F2_KEY"):aC=r.call(this,aE,aG,aF);break}}}if(aC){aF.stopImmediatePropagation()}};function aA(aC,aE,aD){switch(aE.GetUIType()){case O:if(aD.ctrlKey||aD.altKey||aD.shiftKey){$(aC).autocomplete("option","source",[])}break}return false}function D(aC,aE,aD){switch(aE.GetUIType()){case O:if(aD.ctrlKey||aD.altKey||aD.shiftKey){$(aC).autocomplete("option","source",[])}else{if(!($(aC).autocomplete("widget").is(":visible"))){L.call(this,aE,null);return true}}}return false}function G(aD,aF,aE){var aC=false;if(aE.altKey){aC=ag.call(this,aD,aF,aE)}return aC}function at(aC,aE,aD){switch(aE.GetUIType()){case u:case s:case C:case A:case n:case M:case ah:case t:case j:return true}return(this.GetPM().OnControlEvent(i.get("PHYEVENT_ENTER_KEY_PRESS"),aE))}function ag(aC,aF,aD){var aE=this.GetPM().Get("isControlPopupOpen");this.GetPM().OnControlEvent(i.get("PHYEVENT_ESCAPE_KEY_PRESS"),aF);if(this.GetPM().Get("isControlPopupOpen")!==aE){return true}return false}function F(aD,aG,aE){var aC=aD.attr("type");if(aC==="checkbox"){return true}var aF=this.GetPM().ExecuteMethod("CanUpdate",aG.GetName());if(!aF){return true}else{return false}}function r(aC,aE,aD){if(!aD.data.readOnly){$(aC).nextAll("img[id$='_icon']").click()}return true}function az(aC,aH,aI){if(aI.keyCode===$.ui.keyCode.TAB){ap.call(this,aI);var aF=$("#s_"+this.GetPM().Get("GetFullId")+"_div"),aK=aF.find("[data-seq]").not(":hidden,:disabled"),aT=aK.index($(aC)),aJ=Number($(aC).attr("data-seq"));if((aT===-1)||(aI.shiftKey&&aT===0)){return}var aS=null,aP=aI.shiftKey?aT-1:aT+1,aE=aI.shiftKey?0:aK.length,aQ=aI.shiftKey?-1:1,aO=aP;if(aJ==0){while(true){if(Number(aK.eq(aO).attr("data-seq"))===0){aS=aO;break}if(aO===aE){break}aO+=aQ}}if(aS===null){var aR=null,aG=null,aN=function(aV,aU){return aV>aU},aM=function(aV,aU){return aV<aU},aD=aI.shiftKey?aM:aN;for(aO=0,len=aK.length;aO<len;aO++){if(aO!==aT){var aL=Number(aK.eq(aO).attr("data-seq"));if((!aR&&aD(aL,aJ))||aR&&aD(aL,aJ)&&aD(aR,aL)){aR=aL;aG=aO}}}if(aG){aS=aG}}if(aS!==null){aK.eq(aS).focus();aI.preventDefault()}else{V.call(this,aI);aI.preventDefault()}}}function al(aD){var aH=$("#s_"+this.GetPM().Get("GetFullId")+"_div"),aG=aH.find("[data-seq]").not(":hidden,:disabled"),aC=aG.length,aJ=-1,aF=-1;for(var aE=aC;aE>=0;aE--){var aI=Number(aG.eq(aE).attr("data-seq"));if(aJ<aI){aJ=aI;aF=aE}}aG.eq(aF).focus()}function V(aE){var aD=$(aE.target),aG="SWEBottomHidden"+this.GetPM().Get("GetId"),aF=$("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, *[tabindex], *[contenteditable]").not(":hidden").add("a#"+aG).not("[tabindex=-1]"),aC=aF.length;lastindex=aF.index($("#"+aG));if((lastindex+1)===aC){aF.eq(0).focus()}else{aF.eq(lastindex+1).focus()}}function k(){if(this.GetPM().Get("isControlPopupOpen")===false){var aG=this.GetPM().Get("GetActiveControl");if(aG){var aF=$($('input[name="'+aG.GetInputName()+'"]')[0]||$("#"+aG.GetInputName())[0]);switch(aG.GetUIType()){case O:aF.autocomplete("close");break;case Z:case S:case o:aF.datetimepicker("hide");break;case ai:aF.calculator("hide");break;case an:var aE=$.data(this,"innerCtrlElem");if(aE&&aE.hasOwnProperty("calc")){var aC=$(aE.calc);if(aC&&aC.size()>0){aC.calculator("hide")}}else{if(aE.hasOwnProperty("date")){var aD=$(aE.date);if(aD&&aD.size()>0){aD.datetimepicker("hide")}}}break}}}}ac.prototype.BindData=function(){SiebelAppFacade.PhysicalRenderer.superclass.BindData.call(this);this.ShowSelection()};ac.prototype.ShowSelection=function(aD){if(this.inProgress){return false}var aE=this.GetPM(),aC=aE.Get("GetControls");for(var aF in aC){if(aC.hasOwnProperty(aF)){aw.call(this,aC[aF],aD)}}};function aw(aE,aG){var aM=!aG?0:aG,aD=this.GetPM(),aC=aE.GetName(),aF=aE.GetFieldName(),aL=aD.Get("IsInQueryMode"),aI=aD.Get("IsPure"),aH=aD.ExecuteMethod("IsPrivateField",aC);if((!X.IsEmpty(aF)||aH||!aI)&&aE.GetUIType()!==j){var aK="";if(aL||aH||!aI){if((aL&&aH)||!aL||!aI){if(aG===undefined||aG===null){aK=aD.ExecuteMethod("GetFormattedFieldValue",aE,false)}else{aK=aD.ExecuteMethod("GetFormattedFieldValue",aE,true,aM)}}else{var aJ=aD.Get("GetRecordSet");if(X.IsEmpty(aJ[aM][aF])){if((aE.GetUIType()!=="PlainText"&&aE.GetCaseSensitive()&&this.GetPM().ExecuteMethod("CanUpdate",aE.GetName())&&aE!=this.GetPM().Get("GetActiveControl"))){aK=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK")
}else{aK=""}}else{aK=aJ[aM][aF]}}}else{if(aG===undefined||aG===null){aK=aD.ExecuteMethod("GetFormattedFieldValue",aE,true)}else{aK=aD.ExecuteMethod("GetFormattedFieldValue",aE,true,aM)}}if(aG===undefined||aG===null){this.EnableControl(aE,aD.ExecuteMethod("CanUpdate",aC));this.SetControlValue(aE,aK)}else{this.EnableControl(aE,aD.ExecuteMethod("CanUpdate",aC),aM);this.SetControlValue(aE,aK,aM)}}}ac.prototype.IconMapFormatter=function(aF,aK,aG){var aC="";var aJ=SiebelApp.S_App.GetIconMap();var aE=aJ[SiebelApp.S_App.LookupStringCache(aF.GetIconMap())];if(aE){for(var aH=0;aH<aE.length;aH++){var aL=$(aE[aH].iconImage),aD=aF.GetDisplayName();if(aD){var aI=aL.attr("alt");aL.attr("alt",(aI?(aD+":"+aI):aI));aI=aL.attr("title");aL.attr("title",(aI?(aD+":"+aI):aI));aL=aL[0].outerHTML}else{aL=aE[aH].iconImage}if(!X.IsEmpty(aK)&&aE[aH].iconName==aK){return aL}if(aE[aH].iconName=="Default"){aC=aL}}if(!X.IsEmpty(aC)){return aC}}return""};ac.prototype.ControlHtmlFormatter=function(aD,aE,aC,aG,aF){if(aC){if(aD.next("."+aE).length===1){aD.next("."+aE).html(aC)}else{aD.after("<span class='"+aE+"'>"+aC+"</span>")}aD.next("."+aE).show()}else{aD.next("."+aE).hide()}if(aG||(!aG&&X.IsEmpty(aF))){aD.val(aF).show()}else{aD.hide()}};function ax(aG,aI){if(X.IsEmpty(aI)){aG.next().hide();aG.val(aI).show();return}var aH=$.parseHTML(aI.trim());var aF=false;var aD="";var aC="";aI="";for(var aE=0;aH&&aE<aH.length;aE++){aD=$("<span></span>").append(aH[aE]).find("*").addBack();aC=aD.filter("a");if(aC.length&&aC.attr("href")){aF=true;aI=(X.IsEmpty(aI)?"":aI+" ")+$(aC).attr("target","_blank")[0].outerHTML}else{aI=(X.IsEmpty(aI)?"":aI+" ")+aH[aE].textContent}}if(aF){aI="<span>"+aI+"<span>";if(aG.next().length<1){aG.after(aI)}else{aG.next().replaceWith(aI)}aG.next().show();aG.hide()}else{aG.next().hide();aG.val(aI).show()}}ac.prototype.SetControlValue=function(aQ,aX,aN){if(!ad(aQ)){return}var aE=!aN?0:aN;var a3=this.GetPM();var aG="";var aZ=this.GetPM().ExecuteMethod("CanUpdate",aQ.GetName());var aF=$("#"+aQ.GetInputName())[aE]||$("[name="+aQ.GetInputName()+"]")[aE];if(!aF){return}aF=$(aF);if(aQ.GetShowBase()&&aQ.GetUIType()!=="checkBoxCtrl"){aG=this.IconMapFormatter(aQ,aX,aF)}var aD=this.GetPM().ExecuteMethod("CanNavigate",aQ.GetName(),aN);switch(aQ.GetUIType()){case x:if(X.IsTrue(SiebelApp.S_App.GetAccessibilityEnhanced())){if($("#"+aQ.GetInputName()+"_Label").length===1){aF=$("#"+aQ.GetInputName()+"_Label")}}if(!X.IsEmpty(aG)){aF.html(aG)}else{if(X.IsTrue(aQ.IsEncode())){X.IsEmpty(aX)?aF.html(""):aF.html(HtmlEncode(aX))}else{X.IsEmpty(aX)?aF.html(""):aF.html(aX)}}break;case N:aF.val(aX);if(aF.prop("checked")!==X.IsTrue(aX)){aF.prop("checked",X.IsTrue(aX))}break;case Q:var a4=aQ.GetRadioGroupPropSet(),aI,aS,aR;for(var a1=0;a1<a4.GetChildCount();a1++){aR=a4.GetChild(a1);aS=aR.GetProperty("FieldValue");aI=aR.GetProperty("Selected");if(aI){aX=aS;break}}$("[name="+aQ.GetInputName()+"]").filter(function(){return $(this).val()===aX}).attr("checked",true);break;case A:if($(aF).length>0){$(aF).ckeditor(function(){var a7=aX;var a6=this;a6.setData(a7,function(){this.fire("updateData")});aF=null})}break;case s:var aU="";var aK=HtmlEncode(aX);if(typeof(aX)==="string"){if((aK.indexOf("http://")!=0)&&(aK.indexOf("https://")!=0)){aK="http://"+aK}}if(!aZ&&!X.IsEmpty(aX)){aU="<a href='"+aK+"' target='_blank' >"+aK+"</a>"}else{if(aG){aU="<a href='"+aK+"' target='_blank' >"+aG+"</a>"}}if(aQ.GetName()==="BookmarkURL"&&this.GetPM().GetPMName()==="Bookmark URL Popup Applet (SWE)_PM"){var aO=aF.replaceWith('<textarea name="'+aQ.GetInputName()+'" readonly="readonly" rows="3" cols="150" value=\''+aX+"'>"+aX+"</textarea>")}else{this.ControlHtmlFormatter(aF,"siebui-ctrl-url",aU,aZ,aX)}break;case Y:var aW="";aX=HtmlEncode(aX);if(!aZ&&!X.IsEmpty(aX)){aW='<a href="mailto:'+aX+'">'+aX+"</a>"}else{if(aG){aW='<a href="mailto:'+aX+'">'+aG+"</a>"}}this.ControlHtmlFormatter(aF,"siebui-ctrl-mail",aW,aZ,aX);break;case K:var aM="",aC=aQ.GetSeq()||0;var a0=aX.toLowerCase();if(a0.indexOf("<img")>=0){aM=aX}else{aM='<img src="'+aX+'" alt="'+aQ.GetDisplayName()+'" title="'+aQ.GetDisplayName()+'"></img>'}X.IsEmpty(aX)?aF.html(""):aF.html('<a role="img" tabindex="0" data-seq="'+aC+'">'+aM+"<a>");break;case l:X.IsEmpty(aX)?aF.html(""):aF.replaceWith(aX);break;case n:var a2=aF.next("textarea");if(a2.length>0){X.IsEmpty(aX)?a2.val(""):a2.val(aX)}break;case O:var aL=aQ.GetRadioGroupPropSet();var aH=aQ.GetHTMLAttr();var aY=null;var aP=aH.toLowerCase();if(aH&&aP.indexOf("size=")>=0){aY=aP.substring(aP.indexOf("size=")+5,aP.length)}if(aY){aF.html("");var a5="";for(var a1=0;a1<aL.GetChildCount();a1++){var aR=aL.GetChild(a1);var aT=aR.GetProperty("DisplayName");a5+="<option>"+aT+"</option> <br>"}aF.attr("size",aY);aF.html(a5);break}default:if(aQ.GetCaseSensitive()&&this.GetPM().Get("IsInQueryMode")&&(aX=="")){aX=SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK")}if(z.test(a3.GetPMName())){aF.replaceWith('<div role="document" tabindex="0" title="'+aX+'" name="'+aF.attr("name")+'" aria-label="'+aQ.GetDisplayName()+'">'+aX+"</div>")}else{if(aQ.GetShowBase()&&!aZ&&aQ.GetUIType()!=="checkBoxCtrl"){ax.call(this,aF,aX)}else{if(aD&&!X.IsEmpty(aX)&&!this.GetPM().Get("IsInQueryMode")){if(aZ){if(aF.nextAll("img#"+aF.attr("name")+"_icon").length){aB.call(this,aQ,aX,aF,aE)}else{var aV=aF,aJ=this;setTimeout(function(){aB.call(aJ,aQ,aX,aV,aE);aV=aJ=null},2)}}else{w.call(this,aQ,aX,aF,aE)}}else{if(aF.nextAll().length>0){aF.nextAll("div#"+aQ.GetInputName()+"_IPEField").remove();aF.nextAll("[id^='"+aQ.GetInputName()+"']").hide()}aF.show();if(aX===SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK")){aF.addClass("siebui-watermark-text")}else{aF.removeClass("siebui-watermark-text")}aF.nextAll("img#"+aF.attr("name")+"_icon").show();X.IsEmpty(aX)?aF.val(""):aF.val(aX)}}}aF=null;break}};function aB(aE,aJ,aF,aM){aF.nextAll("a#"+aE.GetInputName()+"_mb").remove();if(aF.hasClass("siebui-watermark-text")){aF.removeClass("siebui-watermark-text")}var aG='<a  id ="'+aE.GetInputName()+'_mb"  class = "siebui-ctrl-drilldown"  name = "'+aE.GetName()+'"  tabindex="-1" rowId = "'+(aM+1)+'"  href="javascript:void(0)" >'+HtmlEncode(aJ)+"</a>";var aL="siebui-drilldown-input siebui-input-align-"+aE.GetJustification();var aD=aE.GetInputName()+"_IPEField";var aH=aF.attr("data-seq");var aI=aF.attr("style");var aC='<div data-seq= "'+aH+'"tabindex= "0" id = "'+aD+'" style = "'+aI+'" class= "'+aL+'">'+aG+"<\div>";var aK=(document.activeElement===aF[0]);if(!aK){aK=(document.activeElement===aF.nextAll("div#"+aD)[0])}aF.nextAll("div#"+aD).remove();aF.after(aC);aF.val(aJ);aF.hide();aF.nextAll("img#"+aF.attr("name")+"_icon").hide();aF.nextAll("div#"+aD).show();(function(aO,aN){aO.nextAll("div#"+aD).click(function(aP){T.call(aN,true,aO)}).bind("keypress",function(aP){if(aP.keyCode===13){T.call(aN,true,aO)}});aO.bind("blur",function(aP){ap.call(aN)})})(aF,this);if(aK){aF.nextAll("div#"+aD).focus()}}function w(aG,aF,aE,aC){aE.nextAll("a#"+aG.GetInputName()+"_mb").remove();aE.nextAll("div#"+aG.GetInputName()+"_IPEField").remove();
var aD='<a  id ="'+aG.GetInputName()+'_mb"  class = "siebui-ctrl-drilldown siebui-anchor-readonly"  name = "'+aG.GetName()+'"  rowId = "'+(aC+1)+'"  href="javascript:void(0)" >'+HtmlEncode(aF)+"</a>";if(aE.next(":not(br,img)").length===1){if(aE.next(":not(br,img)").attr("id")!==aG.GetInputName()+"_mb"||aE.next(":not(br,img)").html()!==aF){aE.next(":not(br,img)").html(aD)}}else{aE.after(aD)}this.InjectQTPInfo($("#"+aG.GetInputName()+"_mb"),aG);aE.val(aF);aE.next().show();aE.hide();aE.nextAll("img#"+aE.attr("name")+"_icon").hide()}function T(aD,aE,aC){if(aD){var aF=aE.nextAll("div#"+aE.attr("name")+"_IPEField").text();aE.nextAll("div#"+aE.attr("name")+"_IPEField").hide();aE.nextAll("img#"+aE.attr("name")+"_icon").show();aE.show();aE.val(aF)}else{var aF=aE.val();aE.nextAll("div#"+aE.attr("name")+"_IPEField").show();aE.nextAll("img#"+aE.attr("name")+"_icon").hide();aE.hide();aE.nextAll("div#"+aE.attr("name")+"_IPEField").children().val(aF)}if(aC!==true){aE.focus()}}function ap(aD){if(this.GetPM()&&!this.GetPM().Get("IsInQueryMode")){var aE=this.GetPM();var aF=$("#s_"+this.GetPM().Get("GetFullId")+"_div").find("div[id$='_IPEField']").filter(":hidden");var aC=aF.attr("id");if(aC){var aG=aF.prevAll("[name="+aC.substring(0,aC.indexOf("_IPEField"))+"]").eq(0);if((aF.length&&aD&&aD.keyCode===$.ui.keyCode.TAB)||document.activeElement!==aG[0]){T.call(this,false,aG,true)}}}}ac.prototype.EnableControl=function(aE,aJ,aG){var aF,aL,aH;if(!ad(aE)){return}aG=!aG?0:aG;if(aE.GetUIType()===j){var aD=aE.GetEnabledBmp();var aK=aE.GetDisabledBmp();if(aD||aK){var aI=aJ?aD:aK;var aF=$("#"+aE.GetInputName());if(aI){aF.removeClass("siebui-btn-icon-e siebui-btn-icon-d").addClass(aJ?"siebui-btn-icon-e":"siebui-btn-icon-d").find("a").attr("tabindex",aJ?(aE.GetSeq()||0):"-1").attr("data-seq",aJ?(aE.GetSeq()||0):"-1").html(aI)}}else{aH=aE.GetInputName();if(aE.GetMethodName()==="NewFileAttachment"){aF=$("#"+aH);aL=aF.children("input.siebui-file-input")}else{aF=$("#"+(aH+"_Ctrl"));aL=aF}aF.removeClass("appletButton appletButtonDis").addClass((aJ?"appletButton":"appletButtonDis"));aL.removeAttr("disabled");if(!aJ){aL.attr("disabled","disabled")}}}else{if(aE.GetUIType()===A){aF=$("#"+aE.GetInputName())[aG]||$("[name="+aE.GetInputName()+"]")[aG];if($(aF).length>0&&CKEDITOR.instances[aE.GetInputName()]){CKEDITOR.instances[aE.GetInputName()].setReadOnly(!aJ)}}else{if(aE.GetUIType()==n){aF=$("[name="+aE.GetInputName()+"]");if(aF.length>0){aF.attr("readOnly",!aJ).attr("aria-readonly",!aJ);var aC=aF.parent().next().find("a.stripTagBtn");if(aC.length>0){aJ?$(aC).show():$(aC).hide()}}}else{aF=$("#"+aE.GetInputName())[aG]||$("[name="+aE.GetInputName()+"]")[aG];$(aF).removeAttr("readOnly").attr("readOnly",!aJ).attr("aria-readonly",!aJ)}}}};ac.prototype.UpdateUIControls=function(aC){var aC=this.GetPM().Get("GetControls");for(var aE in aC){if(aC.hasOwnProperty(aE)){var aD=aC[aE];var aF=aD.GetFieldName();if(!X.IsEmpty(aF)){this.EnableControl(aD,this.GetPM().ExecuteMethod("CanUpdate",aD.GetName()))}}}};ac.prototype.UpdateUIButtons=function(){var aC=this.GetPM().Get("GetControls");for(var aF in aC){if(aC.hasOwnProperty(aF)){var aE=aC[aF];if(aE.GetUIType()===j){var aD=aE.GetDisplayName();var aG=this.GetPM().ExecuteMethod("CanInvokeMethod",aE.GetMethodName());this.EnableControl(aE,aG)}}}};ac.prototype.FocusFirstControl=function(){var aD=this.GetPM().Get("GetControls");var aC=9999;this.SetFirstControl(null);for(var aG in aD){if(aD.hasOwnProperty(aG)){var aF=aD[aG];var aH=aF.GetFieldName();if(!X.IsEmpty(aH)){if(aF.GetIndex()&&aF.GetIndex()<aC){var aE=false;if(this.GetPM().Get("IsInQueryMode")===false){aE=this.GetPM().ExecuteMethod("CanUpdate",aG)}else{aE=true}if(aE&&!X.IsEmpty(aF.GetUIType())&&(aF.isBasicControl()||aF.GetUIType()[0]==="J"||aF.GetUIType()===ar||aF.GetUIType()===a)){aC=aF.GetIndex();this.SetFirstControl($("#"+aF.GetInputName())[0]||$("[name="+aF.GetInputName()+"]")[0]);break}}}}}if(this.GetFirstControl()!=null){if(document.activeElement===this.GetFirstControl()){I.call(this,aF,this.GetFirstControl(),false)}else{this.GetFirstControl().focus()}return}this.FocusFirstNonEditableControl()};ac.prototype.FocusFirstNonEditableControl=function(){var aD=this.GetPM().Get("GetControls");var aC=9999;var aG;for(var aF in aD){if(aD.hasOwnProperty(aF)){var aE=aD[aF];if(aE.GetIndex()<aC&&(!X.IsEmpty(aE.GetUIType())&&aE.GetUIType()!=="Button"&&aE.GetUIType()!=="Label")){this.SetFirstControl($("#"+aE.GetInputName())[0]||$("[name="+aE.GetInputName()+"]")[0]);break}}}aG=this.GetFirstControl();if(aG&&$(aG).length>0){$(aG).focus()}};ac.prototype.SetFocusToControl=function(aE,aD){var aC=this.GetPM().Get("GetControls");var aF=null;for(var aH in aC){if(aC.hasOwnProperty(aH)){var aG=aC[aH];if(aE==aH){if(!X.IsEmpty(aG.GetMethodName())){aF=$("#"+(aG.GetInputName()+"_Ctrl"))}else{aF=$("#"+aG.GetInputName())[0]||$("[name="+aG.GetInputName()+"]")[0]}if(aD){$(aF).focus()}else{$(aF).blur()}return true}}}};function ak(aD,aE){var aC=$("#s_"+this.GetPM().Get("GetFullId")+"_div").find("#a_"+this.GetPM().Get("GetId"));if(aD){aC.addClass("Selected siebui-applet-active").removeClass("NotSelected siebui-applet-nonactive")}else{aC.removeClass("Selected siebui-applet-active").addClass("NotSelected siebui-applet-nonactive")}}function q(){var aC=$("#s_"+this.GetPM().Get("GetFullId")+"_div");aC=aC.find("#a_"+this.GetPM().Get("GetId"))[0]||aC;$(aC).attr("tabindex",0).focus()}function ad(aC){return(typeof(aC.GetInputName)==="function")}function af(aF,aE,aD){var aC=this.GetPM().ExecuteMethod("NewFileAttachment");var aG=i.get("SWE_PROP_SESSION_RANDOM_NUMBER")+"="+SiebelApp.S_App.GetSRN();$(aD).fileupload("option","formData",aC);$(aD).fileupload("option","url",SiebelApp.S_App.GetPageURL()+i.get("SWE_ARG_START")+aG)}function ao(aE,aD,aC){var aF=i.get("SWE_PROP_SESSION_RANDOM_NUMBER")+"="+SiebelApp.S_App.GetSRN();$(aC).fileupload("option","url",SiebelApp.S_App.GetPageURL()+i.get("SWE_ARG_START")+aF)}function f(aF,aD){var aG=this.GetPM().ExecuteMethod("NewFileAttachment",aF);var aC=$(aD).fileupload("option","importfiles");$(aD).fileupload("option","formData",aG);var aE={files:aC};SiebelApp.S_App.uiStatus.Busy({target:SiebelApp.S_App.GetTargetViewContainer(),mask:true,timeOut:false,message:""});$(aD).fileupload("send",aE)}function d(aE,aD){var aC;if(aD.dataType==="iframe "){aC=$(aD.result).find("body").html()}else{aC=aD.result}if(!X.IsEmpty(aC)){SiebelApp.S_App.ProcessResponse(aC);if(this.GetPM()){this.FocusFirstControl()}}}function h(aG,aF){var aC;if(aF.dataType==="iframe "){aC=$(aF.result).find("body").html()}else{aC=aF.result}var aE=CCFMiscUtil_CreatePropSet();for(var aD in aF.formData){if(aF.formData.hasOwnProperty(aD)){aE.SetProperty(aD,aF.formData[aD])}}this.GetPM().ExecuteMethod("ForceProcessResponse",aF.formData.SWEMethod,aE,aC);return}function av(aD,aC){}ac.prototype.InjectQTPInfo=function(aD,aC){if((aD.length!=0)&&(aC!=undefined)){if(typeof(aC.GetObjectType)=="function"){$(aD).attr("ot",aC.GetObjectType())}if(typeof(aC.GetRepstrName)=="function"){$(aD).attr("rn",aC.GetRepstrName())
}if(typeof(aC.GetUIName)=="function"){$(aD).attr("un",aC.GetUIName())}}};ac.prototype.InjectAppletQTPInfo=function(aD){var aC=this.GetPM();if((aD.length!=0)&&aC){if(typeof(aC.Get("GetObjectType"))==="string"){$(aD).attr("ot",aC.Get("GetObjectType"))}if(typeof(aC.Get("GetRepstrName"))==="string"){$(aD).attr("rn",aC.Get("GetRepstrName"))}if(typeof(aC.Get("GetUIName"))==="string"){$(aD).attr("un",aC.Get("GetUIName"))}}};ac.prototype.ShowPopup=function(aC){switch(aC.GetUIType()){case ai:case S:case Z:case o:case O:$("[name='"+aC.GetInputName()+"']").next().click();break}return};ac.prototype.GetPhysicalControlValue=function(aE){var aD,aC;if(aE){this.GetPM().AddProperty("PhysicalCtrlVal",aC);aD=$("[name='"+aE.GetInputName()+"']");aC=aD.val()||"";if(this.GetPM().Get("IsInQueryMode")&&aE.GetCaseSensitive()&&(aC===SiebelApp.S_App.LocaleObject.GetLocalString("IDS_SWE_CSQ_WATERMARK"))){aC=""}switch(aE.GetUIType()){case Z:case S:case o:if(this.GetPM().Get("IsInQueryMode")===false){aC=X.toISOFormat(X.Trim(aC),(aE.GetUIType()!==Z))||aC}break;case Q:aC=aD.filter(":checked").val()||"";break;case O:aC=this.FormatDDInQueryMode(aE,aC);break}this.GetPM().AddProperty("PhysicalCtrlVal",aC)}};function c(){var aE=this.GetPM();var aC=aE.Get("GetControls");var aF=aE.Get("IsInQueryMode");aE.ExecuteMethod("SetUpdateConditionals",false);for(var aI in aC){if(aC.hasOwnProperty(aI)){var aH=aC[aI];var aG=aH.GetMethodName();var aD=$("#"+(aH.GetInputName()+"_Ctrl"))[0]||$("#"+aH.GetInputName())[0];if($(aD).length===0&&X.IsEmpty(aH.GetFieldName())){aD=$('[name="'+aH.GetInputName()+'"]')[0]}aD=$(aD);if((aI==="PopupQueryCombobox")||(aI==="PopupQuerySrchspec")||(aI==="PopupQueryExecute")){if(aF){aD.attr("disabled","disabled");if(aI==="PopupQueryExecute"){if(aD.hasClass("appletButton")){aD.removeClass("appletButton")}aD.addClass("appletButtonDis")}}else{if(aD.attr("disabled")){aD.removeAttr("disabled");if(aI==="disabled"){if(aD.hasClass("appletButtonDis")){aD.removeClass("appletButtonDis")}aD.addClass("appletButton")}}}continue}else{if(aI==="QueryAssistant"){if(aF){if(aD.attr("disabled")){aD.removeAttr("disabled");if(aD.hasClass("appletButtonDis")){aD.removeClass("appletButtonDis")}aD.addClass("appletButton")}aD.next().hide()}else{aD.attr("disabled","disabled");if(aD.hasClass("appletButton")){aD.removeClass("appletButton")}aD.addClass("appletButtonDis");aD.next().show()}}}if((!aF&&X.IndexOf(["UndoQuery","ExecuteQuery","ShowQueryAssistant"],aG)!==-1)||(aF&&X.IndexOf(["NewQuery","ToggleListRowCount"],aG)!==-1)){$(aD).hide()}else{if(!X.IsEmpty(aG)&&aE.ExecuteMethod("CanInvokeMethod",aG)){if((aG!=="Drilldown")||!(aD.nextAll("[id^='"+aH.GetInputName()+"']").is(":visible"))){aD.show()}}else{if(aF&&aG&&X.IndexOf(["Find","AddRecords","AddAllRecords","DeleteRecords","DeleteAllRecords"],aG)===-1){aD.hide()}else{aD.show()}}}}}}function E(){var aC=this.GetPM().Get("GetControls");for(var aF in aC){if(aC.hasOwnProperty(aF)){var aE=aC[aF];var aF=aE.GetInputName();var aD=$("#"+aF)[0]||$("input[name="+aF+"]")[0]||$("textarea[name="+aF+"]")[0];if(aD){$(aD).removeAttr("maxLength")}}}}function ab(){var aC=this.GetPM().Get("GetControls");for(var aF in aC){if(aC.hasOwnProperty(aF)){var aE=aC[aF];var aF=aE.GetInputName();var aD=$("#"+aF)[0]||$("input[name="+aF+"]")[0]||$("textarea[name="+aF+"]")[0];if(aD){$(aD).attr("maxlength",aE.GetMaxSize()||256)}}}}function aa(){var aF=this.GetPM();var aD=aF.ExecuteMethod("GetWSStartRowNum");var aG=Number(aF.Get("GetRowListRowCount"));var aH=(aG>1)?i.get("SWE_ROW_COUNTER_LIST"):i.get("SWE_ROW_COUNTER_FORM");var aC=[];var aJ;var aI;var aK;if(aD===0){aI=SiebelApp.S_App.GetRowCounterTemplateMap(i.get("SWE_ROW_COUNTER_NO_RECORDS"))}else{if(aD>0){aC.push(aD);if(aG>1){aC.push(Number(aF.Get("GetWSEndRowNum")))}aC.push(Number(aF.Get("GetNumRows")));aJ=aH+(aF.Get("IsNumRowsKnown")?i.get("SWE_ROW_COUNTER_TOTAL_KNOWN"):i.get("SWE_ROW_COUNTER_TOTAL_UNKNOWN"));aI=SiebelApp.S_App.GetRowCounterTemplateMap(aJ)}else{if(aD<0&&aD>=-1*aG){if(aG>1){aC.push(Number(-1*aD))}aJ=aH+i.get("SWE_ROW_COUNTER_LAST_RECORD");aI=SiebelApp.S_App.GetRowCounterTemplateMap(aJ)}else{aC.push(Number((-1-aD)));if(aG>1){aC.push(Number(-1-Number(aF.Get("GetWSEndRowNum"))))}aJ=aH+i.get("SWE_ROW_COUNTER_FROM_LAST");aI=SiebelApp.S_App.GetRowCounterTemplateMap(aJ)}}}aK=X.FormatString(aI,aC);var aE=$("#s_"+aF.Get("GetId")+"_rc");aE.addClass("siebui-row-counter").text(aK)}return ac}());return"SiebelAppFacade.PhysicalRenderer"})}if(typeof(SiebelAppFacade.PopupRenderer)==="undefined"){SiebelJS.Namespace("SiebelAppFacade.PopupRenderer");SiebelAppFacade.PopupRenderer=(function(){var g=SiebelJS.Dependency("SiebelApp.Utils");var e=SiebelJS.Dependency("SiebelApp.Constants");var a=Number(e.get("DEFAULT_POPUP_WIDTH"));var d=Number(e.get("DEFAULT_POPUP_HEIGHT"));function b(k){SiebelAppFacade.PopupRenderer.superclass.constructor.call(this,k)}SiebelJS.Extend(b,SiebelAppFacade.BasePR);b.prototype.Init=function(){SiebelAppFacade.PopupRenderer.superclass.Init.call(this);this.AttachPMBinding("state",f);this.AttachPMBinding("url",c);this.AttachPMBinding("content",h);this.AttachPMBinding("OnLoadPopupContent",j);this.AttachPMBinding("OnLoadPopupContent",i);this.AttachPMBinding("StandAlonePopup",this.ProcessStandAlonePopup)};function c(){SiebelApp.contentUpdater.AddCallBack(this.GetPM().Get("url"),function(){this.ExecuteMethod("OnLoadPopupContent")},this.GetPM());var k=$("[name=popup]");if(SiebelApp.S_App.GetEnablePerfHooks()&&SiebelApp.S_App.GetTimer()){SiebelApp.S_App.GetTimer().TimePopupApplet("","Call GetLayout")}k.attr("src",this.GetPM().Get("url"));k=null;setTimeout(function(){SiebelApp.contentUpdater.loadContent(true)},1)}function h(){SiebelApp.S_App.uiStatus.Free();$("[name=popup]").children().remove();$("[name=popup]").addClass("minWidthContainer");$("[name=popup]").dialog("open");$("[name=popup]").html("");$("[name=popup]").append(this.GetPM().Get("content"))}function f(){var k=this.GetPM().Get("state");var t=this.GetPM().Get("isCurrencyOpen");var n=true;if(t){n=false}if(k==e.get("POPUP_STATE_HIDDEN")){if(SiebelApp.S_App.IsMobileApplication()==="false"){$("[name=popup]").dialog("close")}var l=$("div[name=popup]"),q=l.find("textarea"),u=q.length;for(var p=0;p<u;p++){var r=CKEDITOR.instances[$(q[p]).attr("name")];if(r){r.destroy(true)}}l.children().remove().end().dialog("option","buttons",{}).parent().find("div.ui-dialog-buttonset").empty();this.GetPM().SetProperty("isCurrencyOpen",false)}else{if(k==e.get("POPUP_STATE_VISIBLE")){if(SiebelApp.S_App.IsMobileApplication()==="false"){$("div[name=popup]").dialog("open");$("div[name=popup]").parents("div.ui-dialog").children("div.ui-dialog-titlebar").show();$("div[name=popup]").dialog("option","height","auto").dialog("option","width","auto").dialog("option","resizable",n).dialog("option","minWidth",a).dialog("option","minHeight",d);$("div[name=popup]").dialog("option","position","center");var o=this.GetPM();var m;var s;$(".ui-widget-overlay").droppable({drop:function(w,D){if(D.draggable&&D.draggable.is("tr.jqgrow")){var v=D.draggable.attr("id");
var E=false;if(v>0){var A=D.draggable.parent().parent().jqGrid("getRowData",v)}var G=$("#s_"+o.Get("baseParentAppletId")+"_div");if(G.length>0){var C=G.offset().top+G.height();var F=G.offset().left+G.width()}if((G.offset().left<w.originalEvent.clientX&&w.originalEvent.clientX<F)&&(G.offset().top<w.originalEvent.clientY&&w.originalEvent.clientY<C)){if(o.Get("isPopupPick")){m=o.Get("PickAppletObject");m.GetPModel().ExecuteMethod("SetSelectionOnDragNDrop",v);E=m.GetPModel().ExecuteMethod("HandleDragNDropInPopup","PickRecord")}if(o.Get("isPopupMVGAssoc")){s=o.Get("MVGAssocParentAppletObject");if(!o.Get("ismultislectmode")){s.GetPModel().ExecuteMethod("SetSelectionOnDragNDrop",v)}var B=s.GetPModel().ExecuteMethod("HandleDragNDropInPopup","AddRecords");if(B){E=s.GetPModel().ExecuteMethod("HandleDragNDropInPopup","CloseApplet")}}if(o.Get("isPopupAssoc")){var z=CCFMiscUtil_CreatePropSet();m=o.Get("AssocAppletObject");if(!o.Get("ismultislectmode")){m.GetPModel().ExecuteMethod("SetSelectionOnDragNDrop",v)}E=m.GetPModel().ExecuteMethod("HandleDragNDropInPopup","AddRecord")}if(!E){D.draggable.animate(D.draggable.data().origPosition,"slow")}else{D.draggable.detach();o.SetProperty("isPopupPick",false);o.SetProperty("isPopupMVGAssoc",false);o.SetProperty("isPopupMVGSelected",false);o.SetProperty("isPopupAssoc",false)}}else{D.draggable.animate(D.draggable.data().origPosition,"slow")}o.SetProperty("ismultislectmode",false)}}});j.call(this);SiebelApp.S_App.uiStatus.LocalBusy({mask:true})}}}}function i(){var k=Number(this.GetPM().Get("width"))||0;var l=false;var m=$("div[name=popup]");if(m.find("div.ui-jqgrid").length>0){if(k===a){k*=2}m.width(k);$(window).resize()}else{if(k<a){m.width(a)}else{l=true}}if(l){setTimeout(function(){var o=$("div[name=popup]"),n=o.width();if(o[0]&&o[0].scrollWidth>n&&o[0].scrollWidth<k){n=o[0].scrollWidth}o.width(n).dialog("option","position","center")},3)}else{m.dialog("option","position","center")}m=null}function j(){if(this.GetPM().Get("currPopups")&&this.GetPM().Get("currPopups")[0]){$("[name='popup']").dialog("option","title",SiebelApp.S_App.LookupStringCache(this.GetPM().Get("currPopups")[0].GetTitle()));if(g.IsTrue(SiebelApp.S_App.IsAutoOn())){$("div[name=popup]").parent(".ui-dialog").find("span.ui-dialog-title").attr("ot","popup").attr("rn","popup").attr("un",this.GetPM().Get("currPopups")[0].GetUIName()+" popup")}}else{$("[name='popup']").dialog("option","title","")}}b.prototype.BindData=function(){SiebelAppFacade.PopupRenderer.superclass.BindData.call(this)};b.prototype.ShowUI=function(){SiebelAppFacade.PopupRenderer.superclass.ShowUI.call(this);if($("[name=popup]").length===0){var k=$('<div name="popup"></div>');var l=SiebelApp.S_App.GetDirection();SiebelApp.S_App.GetTargetViewContainer().append(k);SiebelApp.S_App.uiStatus.LocalBusy({target:"[name=popup]",mask:false});if(SiebelApp.S_App.IsMobileApplication()==="false"){$("[name=popup]").dialog({position:"center",modal:true,autoOpen:false,closeOnEscape:false});$("div[name=popup]").parents("div.ui-dialog").children("div.ui-dialog-titlebar").removeAttr("role").children("span.ui-dialog-title").addClass(l?"ui-dialog-title-rtl":"").next().addClass(l?"ui-dialog-titlebar-close-rtl":"").removeClass(l?"ui-dialog-titlebar-close":"")}}};b.prototype.BindEvents=function(){SiebelAppFacade.PopupRenderer.superclass.BindEvents.call(this);var k=$("[name=popup]");k.data("context",this);k.dialog({beforeClose:function(m,n){if($(m.currentTarget,"[class*=ui-dialog-titlebar-close]").length>0){var l=$("[name=popup]").data("context");if(g.Confirm("Click OK to discard unsaved data and close all popups.")){l.GetPM().OnControlEvent("ClosePopupByX",m);return true}return false}}})};b.prototype.ProcessStandAlonePopup=function(m,k){var l=window.open(m,"subWind",k)};return b})()};